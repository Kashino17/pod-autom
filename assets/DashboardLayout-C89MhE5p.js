import{j as e}from"./vendor-query-CpRdniug.js";import{u as z,i as S,r as h,L as v}from"./vendor-react-4xEIaAEA.js";import{u as y}from"./useShopify-Bi_TIP8F.js";import{b as k,u as D}from"./index-BNM9HcXn.js";import{a8 as B,a9 as q,aa as I,G as M,W as O,m as A,M as E,b as T,e as C,y as _,B as f,ab as $,ac as R,c as j,l as N,J as U,ad as H,U as K,ae as V,X as W}from"./vendor-ui-BMWb517o.js";const F=[{path:"/dashboard",label:"Übersicht",icon:e.jsx(I,{className:"w-5 h-5"})},{path:"/dashboard/niches",label:"Nischen",icon:e.jsx(M,{className:"w-5 h-5"})},{path:"/dashboard/prompts",label:"KI-Prompts",icon:e.jsx(O,{className:"w-5 h-5"})},{path:"/dashboard/products",label:"Produkte",icon:e.jsx(A,{className:"w-5 h-5"})},{path:"/dashboard/campaigns",label:"Kampagnen",icon:e.jsx(E,{className:"w-5 h-5"})},{path:"/dashboard/winners",label:"Winner Scaling",icon:e.jsx(T,{className:"w-5 h-5"}),requiredTier:"premium"},{path:"/dashboard/analytics",label:"Analytics",icon:e.jsx(C,{className:"w-5 h-5"}),requiredTier:"premium"}],Y=[{path:"/settings",label:"Einstellungen",icon:e.jsx(f,{className:"w-5 h-5"})},{path:"/help",label:"Hilfe",icon:e.jsx($,{className:"w-5 h-5"})}];function G({isCollapsed:t,onToggleCollapse:c}){const d=z(),{tier:x,subscription:p}=k(),i={basis:{name:"Basis",color:"text-zinc-400",bg:"bg-zinc-700"},premium:{name:"Premium",color:"text-violet-400",bg:"bg-violet-500/20"},vip:{name:"VIP",color:"text-amber-400",bg:"bg-amber-500/20"}},o=x||"basis",a=i[o],m=s=>{if(!s)return!0;const l=["basis","premium","vip"],u=l.indexOf(o),b=l.indexOf(s);return u>=b},r=s=>{const l=d.pathname===s.path;return m(s.requiredTier)?e.jsxs(S,{to:s.path,end:s.path==="/dashboard",className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${t?"justify-center":""} ${l?"bg-violet-500/20 text-violet-300":"text-zinc-400 hover:bg-zinc-800 hover:text-white"}`,title:t?s.label:void 0,children:[s.icon,!t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1",children:s.label}),s.badge&&e.jsx("span",{className:"px-2 py-0.5 bg-violet-500 text-white text-xs rounded-full",children:s.badge})]})]},s.path):e.jsxs("div",{className:`flex items-center gap-3 px-3 py-2.5 rounded-lg text-zinc-600 cursor-not-allowed ${t?"justify-center":""}`,title:t?`${s.label} (${s.requiredTier}+)`:void 0,children:[s.icon,!t&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1",children:s.label}),e.jsx(_,{className:"w-4 h-4 text-amber-500/50"})]})]},s.path)};return e.jsxs("aside",{className:`fixed left-0 top-0 h-full bg-zinc-900 border-r border-zinc-800 flex flex-col transition-all duration-300 z-40 ${t?"w-16":"w-64"}`,children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-zinc-800",children:[!t&&e.jsxs("span",{className:"text-xl font-bold text-white",children:["POD Auto",e.jsx("span",{className:"text-violet-500",children:"M"})]}),e.jsx("button",{onClick:c,className:`p-1.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors ${t?"mx-auto":""}`,children:t?e.jsx(B,{className:"w-4 h-4"}):e.jsx(q,{className:"w-4 h-4"})})]}),e.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto",children:F.map(r)}),e.jsxs("div",{className:"p-3 border-t border-zinc-800 space-y-1",children:[Y.map(r),!t&&p&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-zinc-800/50 border border-zinc-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:"Plan"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${a.bg} ${a.color}`,children:a.name})]}),o!=="vip"&&e.jsx("a",{href:"/pricing",className:"block mt-2 text-xs text-violet-400 hover:text-violet-300 transition-colors",children:"Upgrade verfügbar"})]})]})]})}function J({onMenuClick:t,selectedShopId:c,onShopChange:d}){const{user:x,signOut:p}=D(),{shops:i}=y(),[o,a]=h.useState(!1),[m,r]=h.useState(!1),s=h.useRef(null),l=h.useRef(null),u=i.find(n=>n.id===c)||i[0];h.useEffect(()=>{const n=g=>{s.current&&!s.current.contains(g.target)&&a(!1),l.current&&!l.current.contains(g.target)&&r(!1)};return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[]);const b=async()=>{await p()};return e.jsxs("header",{className:"h-16 bg-zinc-900 border-b border-zinc-800 flex items-center justify-between px-4 lg:px-6 safe-top",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 min-w-0 flex-1",children:[e.jsx("button",{onClick:t,className:"lg:hidden p-2.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors touch-manipulation","aria-label":"Menu oeffnen",children:e.jsx(R,{className:"w-5 h-5"})}),i.length>0&&e.jsxs("div",{className:"relative min-w-0 flex-1 sm:flex-none",ref:l,children:[e.jsxs("button",{onClick:()=>r(!m),className:"flex items-center gap-2 px-3 py-2.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 transition-colors touch-manipulation w-full sm:w-auto",children:[e.jsx(j,{className:"w-4 h-4 text-violet-400 flex-shrink-0"}),e.jsx("span",{className:"text-white font-medium truncate text-sm sm:text-base max-w-[100px] sm:max-w-[150px]",children:u?.internal_name||u?.shop_domain||"Shop"}),e.jsx(N,{className:"w-4 h-4 text-zinc-400 flex-shrink-0 hidden sm:block"})]}),m&&e.jsxs("div",{className:"absolute top-full left-0 mt-2 w-[calc(100vw-2rem)] sm:w-72 max-w-sm bg-zinc-800 border border-zinc-700 rounded-xl shadow-xl overflow-hidden z-50",children:[e.jsx("div",{className:"p-2 max-h-[60vh] overflow-y-auto",children:i.map(n=>e.jsxs("button",{onClick:()=>{d(n.id),r(!1)},className:`w-full flex items-center gap-3 px-3 py-3 rounded-lg text-left transition-colors touch-manipulation ${n.id===c?"bg-violet-500/20 text-violet-300":"text-zinc-300 hover:bg-zinc-700 active:bg-zinc-600"}`,children:[e.jsx(j,{className:"w-4 h-4 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:n.internal_name||n.shop_domain}),n.internal_name&&e.jsx("p",{className:"text-xs text-zinc-500 truncate",children:n.shop_domain})]}),e.jsx("span",{className:`w-2.5 h-2.5 rounded-full flex-shrink-0 ${n.connection_status==="connected"?"bg-emerald-500":n.connection_status==="error"?"bg-red-500":"bg-zinc-500"}`})]},n.id))}),e.jsx("div",{className:"border-t border-zinc-700 p-2",children:e.jsxs(v,{to:"/settings",onClick:()=>r(!1),className:"flex items-center gap-2 px-3 py-3 rounded-lg text-zinc-400 hover:text-white hover:bg-zinc-700 active:bg-zinc-600 transition-colors touch-manipulation",children:[e.jsx(U,{className:"w-4 h-4"}),"Neuen Shop verbinden"]})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-1 sm:gap-2 flex-shrink-0",children:[e.jsxs("button",{className:"relative p-2.5 rounded-lg hover:bg-zinc-800 active:bg-zinc-700 text-zinc-400 hover:text-white transition-colors touch-manipulation","aria-label":"Benachrichtigungen",children:[e.jsx(H,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1.5 right-1.5 w-2 h-2 bg-violet-500 rounded-full"})]}),e.jsxs("div",{className:"relative",ref:s,children:[e.jsxs("button",{onClick:()=>a(!o),className:"flex items-center gap-2 p-2 rounded-lg hover:bg-zinc-800 active:bg-zinc-700 transition-colors touch-manipulation","aria-label":"Benutzermenu",children:[e.jsx("div",{className:"w-9 h-9 sm:w-8 sm:h-8 bg-violet-500/20 rounded-full flex items-center justify-center",children:e.jsx(K,{className:"w-4 h-4 text-violet-400"})}),e.jsx(N,{className:"w-4 h-4 text-zinc-400 hidden sm:block"})]}),o&&e.jsxs("div",{className:"absolute top-full right-0 mt-2 w-[calc(100vw-2rem)] sm:w-64 max-w-[280px] bg-zinc-800 border border-zinc-700 rounded-xl shadow-xl overflow-hidden z-50",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-700",children:[e.jsx("p",{className:"text-white font-medium truncate text-sm sm:text-base",children:x?.email}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:["ID: ",x?.id?.slice(0,8),"..."]})]}),e.jsxs("div",{className:"p-2",children:[e.jsxs(v,{to:"/settings",onClick:()=>a(!1),className:"flex items-center gap-3 px-3 py-3 rounded-lg text-zinc-300 hover:bg-zinc-700 active:bg-zinc-600 hover:text-white transition-colors touch-manipulation",children:[e.jsx(f,{className:"w-4 h-4"}),"Einstellungen"]}),e.jsxs("button",{onClick:b,className:"w-full flex items-center gap-3 px-3 py-3 rounded-lg text-red-400 hover:bg-zinc-700 active:bg-zinc-600 hover:text-red-300 transition-colors touch-manipulation",children:[e.jsx(V,{className:"w-4 h-4"}),"Abmelden"]})]})]})]})]})]})}const X=[{path:"/dashboard",label:"Übersicht",icon:e.jsx(I,{className:"w-5 h-5"})},{path:"/dashboard/niches",label:"Nischen",icon:e.jsx(M,{className:"w-5 h-5"})},{path:"/dashboard/prompts",label:"KI-Prompts",icon:e.jsx(O,{className:"w-5 h-5"})},{path:"/dashboard/products",label:"Produkte",icon:e.jsx(A,{className:"w-5 h-5"})},{path:"/dashboard/campaigns",label:"Kampagnen",icon:e.jsx(E,{className:"w-5 h-5"})},{path:"/dashboard/winners",label:"Winner Scaling",icon:e.jsx(T,{className:"w-5 h-5"}),requiredTier:"premium"},{path:"/dashboard/analytics",label:"Analytics",icon:e.jsx(C,{className:"w-5 h-5"}),requiredTier:"premium"}],Z=[{path:"/settings",label:"Einstellungen",icon:e.jsx(f,{className:"w-5 h-5"})},{path:"/help",label:"Hilfe",icon:e.jsx($,{className:"w-5 h-5"})}];function Q({isOpen:t,onClose:c}){const d=z(),{tier:x,subscription:p}=k(),i=x||"basis",a={basis:{name:"Basis",color:"text-zinc-400",bg:"bg-zinc-700"},premium:{name:"Premium",color:"text-violet-400",bg:"bg-violet-500/20"},vip:{name:"VIP",color:"text-amber-400",bg:"bg-amber-500/20"}}[i],m=s=>{if(!s)return!0;const l=["basis","premium","vip"],u=l.indexOf(i),b=l.indexOf(s);return u>=b},r=s=>{const l=d.pathname===s.path;return m(s.requiredTier)?e.jsxs(S,{to:s.path,end:s.path==="/dashboard",onClick:c,className:`flex items-center gap-3 px-4 py-3.5 rounded-xl transition-colors touch-manipulation ${l?"bg-violet-500/20 text-violet-300":"text-zinc-300 hover:bg-zinc-800 active:bg-zinc-700"}`,children:[s.icon,e.jsx("span",{children:s.label})]},s.path):e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3.5 rounded-xl text-zinc-600 cursor-not-allowed",children:[s.icon,e.jsx("span",{className:"flex-1",children:s.label}),e.jsx(_,{className:"w-4 h-4 text-amber-500/50"})]},s.path)};return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-40 lg:hidden",onClick:c,"aria-hidden":"true"}),e.jsxs("div",{className:"fixed left-0 top-0 h-full w-[280px] max-w-[85vw] bg-zinc-900 border-r border-zinc-800 z-50 lg:hidden flex flex-col safe-top safe-bottom",children:[e.jsxs("div",{className:"h-16 flex items-center justify-between px-4 border-b border-zinc-800",children:[e.jsxs("span",{className:"text-xl font-bold text-white",children:["POD Auto",e.jsx("span",{className:"text-violet-500",children:"M"})]}),e.jsx("button",{onClick:c,className:"p-2.5 rounded-xl hover:bg-zinc-800 active:bg-zinc-700 text-zinc-400 hover:text-white transition-colors touch-manipulation","aria-label":"Menu schliessen",children:e.jsx(W,{className:"w-5 h-5"})})]}),e.jsx("nav",{className:"flex-1 p-3 space-y-1 overflow-y-auto overscroll-contain",children:X.map(r)}),e.jsxs("div",{className:"p-3 border-t border-zinc-800 space-y-1 safe-bottom",children:[Z.map(r),p&&e.jsxs("div",{className:"mt-3 p-3 rounded-xl bg-zinc-800/50 border border-zinc-700",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:"Plan"}),e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium ${a.bg} ${a.color}`,children:a.name})]}),i!=="vip"&&e.jsx("a",{href:"/checkout",className:"block mt-2 py-2 text-center text-sm text-violet-400 hover:text-violet-300 active:text-violet-200 transition-colors touch-manipulation",children:"Upgrade verfuegbar"})]})]})]})]}):null}function ee({targetId:t="main-content",children:c="Zum Hauptinhalt springen"}){return e.jsx("a",{href:`#${t}`,className:`sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[100]
                 focus:px-4 focus:py-2 focus:bg-violet-500 focus:text-white focus:rounded-lg
                 focus:shadow-lg focus:outline-none focus:ring-2 focus:ring-violet-400 focus:ring-offset-2
                 focus:ring-offset-black`,children:c})}const L="pod-autom-sidebar-collapsed",P="pod-autom-selected-shop";function se(){try{return localStorage.getItem(L)==="true"}catch{return!1}}function te(t){try{localStorage.setItem(L,String(t))}catch{}}function ae(){try{return localStorage.getItem(P)}catch{return null}}function w(t){try{localStorage.setItem(P,t)}catch{}}function oe({children:t}){const{shops:c}=y(),[d,x]=h.useState(se),[p,i]=h.useState(!1),[o,a]=h.useState(ae);h.useEffect(()=>{const s=c[0];s&&!o&&(a(s.id),w(s.id))},[c,o]);const m=()=>{const s=!d;x(s),te(s)},r=s=>{a(s),w(s)};return e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsx(ee,{}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-violet-500/5 via-transparent to-violet-500/5 pointer-events-none"}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(G,{isCollapsed:d,onToggleCollapse:m})}),e.jsx(Q,{isOpen:p,onClose:()=>i(!1)}),e.jsxs("div",{className:`relative min-h-screen transition-all duration-300 ${d?"lg:ml-16":"lg:ml-64"}`,children:[e.jsx(J,{onMenuClick:()=>i(!0),selectedShopId:o,onShopChange:r}),e.jsx("main",{id:"main-content",className:"p-4 lg:p-6",tabIndex:-1,children:t})]})]})}export{oe as D};
//# sourceMappingURL=DashboardLayout-C89MhE5p.js.map
