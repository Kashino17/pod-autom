{"version":3,"file":"DashboardPrompts-DXg_mfWz.js","sources":["../../src/components/dashboard/PromptManager.tsx","../../src/hooks/usePrompts.ts","../../src/pages/DashboardPrompts.tsx"],"sourcesContent":["import { useState } from 'react'\nimport {\n  Wand2,\n  Image,\n  Type,\n  FileText,\n  Edit3,\n  Save,\n  RotateCcw,\n  Copy,\n  Check,\n  Loader2,\n  ChevronDown,\n  ChevronUp,\n  Sparkles,\n  Eye,\n  AlertCircle,\n} from 'lucide-react'\n\n// =====================================================\n// TYPES\n// =====================================================\n\nexport type PromptType = 'image' | 'title' | 'description'\n\nexport interface Prompt {\n  id: string\n  type: PromptType\n  name: string\n  content: string\n  isDefault: boolean\n  isActive: boolean\n  usageCount: number\n  lastUsed?: string\n  createdAt: string\n}\n\ninterface PromptManagerProps {\n  prompts: Prompt[]\n  isLoading: boolean\n  onSave: (type: PromptType, content: string) => void\n  onReset: (type: PromptType) => void\n  isSaving?: boolean\n}\n\n// Default prompts\nconst DEFAULT_PROMPTS: Record<PromptType, string> = {\n  image: `Create a modern, eye-catching print-on-demand design.\n\nStyle: Clean, minimalist, trendy\nColors: Vibrant, high contrast\nBackground: Transparent or solid color\nFormat: Suitable for t-shirts and hoodies\n\nNiche: {{niche}}\nTheme: {{theme}}\n\nThe design should appeal to {{niche}} enthusiasts and be instantly recognizable.`,\n\n  title: `Create a catchy, SEO-optimized product title.\n\nRequirements:\n- Length: 50-70 characters\n- Include main keyword: {{niche}}\n- Product type: {{product_type}}\n- Unique and appealing\n- Avoid generic phrases like \"Best\" or \"Amazing\"\n\nFormat: [Adjective] [Niche-related word] [Product type] - [Unique selling point]`,\n\n  description: `Write a compelling product description for {{niche}} enthusiasts.\n\nProduct: {{product_type}}\nDesign theme: {{theme}}\n\nStructure:\n1. Hook (1 sentence) - Grab attention\n2. Benefits (2-3 bullet points) - Why they need it\n3. Quality details - Premium materials, print quality\n4. Call to action - Limited availability, order now\n\nTone: Enthusiastic but professional\nLength: 100-150 words\nInclude relevant keywords naturally.`,\n}\n\nconst PROMPT_CONFIG: Record<PromptType, { icon: React.ReactNode; label: string; description: string }> = {\n  image: {\n    icon: <Image className=\"w-5 h-5\" />,\n    label: 'Bild-Prompt',\n    description: 'Für die KI-Bildgenerierung (DALL-E / Midjourney)',\n  },\n  title: {\n    icon: <Type className=\"w-5 h-5\" />,\n    label: 'Titel-Prompt',\n    description: 'Für SEO-optimierte Produkttitel',\n  },\n  description: {\n    icon: <FileText className=\"w-5 h-5\" />,\n    label: 'Beschreibungs-Prompt',\n    description: 'Für überzeugende Produktbeschreibungen',\n  },\n}\n\nconst AVAILABLE_VARIABLES = [\n  { key: '{{niche}}', description: 'Aktuelle Nische (z.B. \"Fitness\")' },\n  { key: '{{theme}}', description: 'Design-Thema (z.B. \"Motivation\")' },\n  { key: '{{product_type}}', description: 'Produkttyp (z.B. \"T-Shirt\")' },\n  { key: '{{style}}', description: 'Stil (z.B. \"Minimalist\")' },\n  { key: '{{color}}', description: 'Hauptfarbe (z.B. \"Schwarz\")' },\n]\n\n// =====================================================\n// PROMPT CARD COMPONENT\n// =====================================================\n\ninterface PromptCardProps {\n  type: PromptType\n  content: string\n  isEditing: boolean\n  isSaving: boolean\n  hasChanges: boolean\n  onEdit: () => void\n  onSave: (content: string) => void\n  onReset: () => void\n  onCancel: () => void\n}\n\nfunction PromptCard({\n  type,\n  content,\n  isEditing,\n  isSaving,\n  hasChanges,\n  onEdit,\n  onSave,\n  onReset,\n  onCancel,\n}: PromptCardProps) {\n  const [editedContent, setEditedContent] = useState(content)\n  const [showPreview, setShowPreview] = useState(false)\n  const [copied, setCopied] = useState(false)\n\n  const config = PROMPT_CONFIG[type]\n\n  const handleCopy = async () => {\n    await navigator.clipboard.writeText(editedContent)\n    setCopied(true)\n    setTimeout(() => setCopied(false), 2000)\n  }\n\n  const handleSave = () => {\n    onSave(editedContent)\n  }\n\n  const handleReset = () => {\n    setEditedContent(DEFAULT_PROMPTS[type])\n    onReset()\n  }\n\n  const handleCancel = () => {\n    setEditedContent(content)\n    onCancel()\n  }\n\n  // Preview with sample values\n  const getPreview = () => {\n    return editedContent\n      .replace(/\\{\\{niche\\}\\}/g, 'Fitness')\n      .replace(/\\{\\{theme\\}\\}/g, 'Motivation')\n      .replace(/\\{\\{product_type\\}\\}/g, 'T-Shirt')\n      .replace(/\\{\\{style\\}\\}/g, 'Minimalist')\n      .replace(/\\{\\{color\\}\\}/g, 'Schwarz')\n  }\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden\">\n      {/* Header */}\n      <div className=\"flex items-center justify-between p-4 border-b border-zinc-800\">\n        <div className=\"flex items-center gap-3\">\n          <div className=\"w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center text-violet-400\">\n            {config.icon}\n          </div>\n          <div>\n            <h3 className=\"font-medium text-white\">{config.label}</h3>\n            <p className=\"text-xs text-zinc-500\">{config.description}</p>\n          </div>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          {hasChanges && !isEditing && (\n            <span className=\"w-2 h-2 bg-amber-500 rounded-full\" />\n          )}\n          {!isEditing ? (\n            <button\n              onClick={onEdit}\n              className=\"btn-secondary text-sm\"\n            >\n              <Edit3 className=\"w-4 h-4 mr-1\" />\n              Bearbeiten\n            </button>\n          ) : (\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={handleCancel}\n                className=\"btn-secondary text-sm\"\n              >\n                Abbrechen\n              </button>\n              <button\n                onClick={handleSave}\n                disabled={isSaving}\n                className=\"btn-primary text-sm\"\n              >\n                {isSaving ? (\n                  <Loader2 className=\"w-4 h-4 animate-spin mr-1\" />\n                ) : (\n                  <Save className=\"w-4 h-4 mr-1\" />\n                )}\n                Speichern\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"p-4\">\n        {isEditing ? (\n          <div className=\"space-y-4\">\n            <textarea\n              value={editedContent}\n              onChange={(e) => setEditedContent(e.target.value)}\n              className=\"input min-h-[200px] font-mono text-sm resize-none\"\n              placeholder={`${config.label} eingeben...`}\n            />\n\n            {/* Actions */}\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex gap-2\">\n                <button\n                  onClick={handleCopy}\n                  className=\"btn-secondary text-sm\"\n                >\n                  {copied ? (\n                    <Check className=\"w-4 h-4 mr-1 text-emerald-400\" />\n                  ) : (\n                    <Copy className=\"w-4 h-4 mr-1\" />\n                  )}\n                  {copied ? 'Kopiert!' : 'Kopieren'}\n                </button>\n                <button\n                  onClick={handleReset}\n                  className=\"btn-secondary text-sm\"\n                >\n                  <RotateCcw className=\"w-4 h-4 mr-1\" />\n                  Standard\n                </button>\n                <button\n                  onClick={() => setShowPreview(!showPreview)}\n                  className=\"btn-secondary text-sm\"\n                >\n                  <Eye className=\"w-4 h-4 mr-1\" />\n                  Vorschau\n                </button>\n              </div>\n            </div>\n\n            {/* Preview */}\n            {showPreview && (\n              <div className=\"p-4 rounded-lg bg-zinc-800 border border-zinc-700\">\n                <p className=\"text-xs text-zinc-500 mb-2 flex items-center gap-1\">\n                  <Sparkles className=\"w-3 h-3\" />\n                  Vorschau mit Beispielwerten\n                </p>\n                <pre className=\"text-sm text-zinc-300 whitespace-pre-wrap font-mono\">\n                  {getPreview()}\n                </pre>\n              </div>\n            )}\n          </div>\n        ) : (\n          <div className=\"relative\">\n            <pre className=\"text-sm text-zinc-400 whitespace-pre-wrap font-mono bg-zinc-800/50 rounded-lg p-4 max-h-[150px] overflow-y-auto\">\n              {content}\n            </pre>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// =====================================================\n// PROMPT MANAGER COMPONENT\n// =====================================================\n\nexport function PromptManager({\n  prompts,\n  isLoading,\n  onSave,\n  onReset,\n  isSaving = false,\n}: PromptManagerProps) {\n  const [editingType, setEditingType] = useState<PromptType | null>(null)\n  const [showVariables, setShowVariables] = useState(false)\n\n  const getPromptContent = (type: PromptType): string => {\n    const prompt = prompts.find((p) => p.type === type)\n    return prompt?.content || DEFAULT_PROMPTS[type]\n  }\n\n  const hasChanges = (type: PromptType): boolean => {\n    const prompt = prompts.find((p) => p.type === type)\n    return prompt ? prompt.content !== DEFAULT_PROMPTS[type] : false\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center h-64\">\n        <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n        <div>\n          <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\n            <Wand2 className=\"w-5 h-5 text-violet-400\" />\n            KI-Prompts\n          </h2>\n          <p className=\"text-sm text-zinc-400 mt-1\">\n            Passe die Prompts an, um die KI-generierten Inhalte zu steuern.\n          </p>\n        </div>\n      </div>\n\n      {/* Variables Info */}\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden\">\n        <button\n          onClick={() => setShowVariables(!showVariables)}\n          className=\"w-full flex items-center justify-between p-4 text-left hover:bg-zinc-800/50 transition-colors\"\n        >\n          <div className=\"flex items-center gap-3\">\n            <div className=\"w-8 h-8 bg-violet-500/20 rounded-lg flex items-center justify-center\">\n              <Sparkles className=\"w-4 h-4 text-violet-400\" />\n            </div>\n            <div>\n              <p className=\"font-medium text-white\">Verfügbare Variablen</p>\n              <p className=\"text-xs text-zinc-500\">\n                Dynamische Platzhalter für deine Prompts\n              </p>\n            </div>\n          </div>\n          {showVariables ? (\n            <ChevronUp className=\"w-5 h-5 text-zinc-400\" />\n          ) : (\n            <ChevronDown className=\"w-5 h-5 text-zinc-400\" />\n          )}\n        </button>\n\n        {showVariables && (\n          <div className=\"p-4 pt-0 border-t border-zinc-800\">\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 mt-4\">\n              {AVAILABLE_VARIABLES.map((variable) => (\n                <div\n                  key={variable.key}\n                  className=\"flex items-start gap-2 p-3 rounded-lg bg-zinc-800/50\"\n                >\n                  <code className=\"px-2 py-0.5 bg-violet-500/20 text-violet-300 rounded text-xs font-mono\">\n                    {variable.key}\n                  </code>\n                  <p className=\"text-xs text-zinc-400 flex-1\">\n                    {variable.description}\n                  </p>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n\n      {/* Tips */}\n      <div className=\"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20\">\n        <div className=\"flex gap-3\">\n          <AlertCircle className=\"w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5\" />\n          <div>\n            <p className=\"text-sm text-amber-300 font-medium\">Tipps für bessere Ergebnisse</p>\n            <ul className=\"mt-2 text-xs text-zinc-400 space-y-1\">\n              <li>• Sei spezifisch bei Stil, Format und gewünschtem Output</li>\n              <li>• Nutze Variablen für dynamische, nischenspezifische Inhalte</li>\n              <li>• Teste Änderungen zuerst mit einzelnen Produkten</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n\n      {/* Prompt Cards */}\n      <div className=\"space-y-4\">\n        {(['image', 'title', 'description'] as PromptType[]).map((type) => (\n          <PromptCard\n            key={type}\n            type={type}\n            content={getPromptContent(type)}\n            isEditing={editingType === type}\n            isSaving={isSaving}\n            hasChanges={hasChanges(type)}\n            onEdit={() => setEditingType(type)}\n            onSave={(content) => {\n              onSave(type, content)\n              setEditingType(null)\n            }}\n            onReset={() => onReset(type)}\n            onCancel={() => setEditingType(null)}\n          />\n        ))}\n      </div>\n    </div>\n  )\n}\n\nexport default PromptManager\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@src/contexts/AuthContext'\nimport { api } from '@src/lib/api'\nimport { useToastStore } from '@src/lib/store'\nimport type { Prompt, PromptType } from '@src/components/dashboard/PromptManager'\n\n// =====================================================\n// DEFAULT PROMPTS\n// =====================================================\n\nconst DEFAULT_PROMPTS: Record<PromptType, string> = {\n  image: `Create a modern, eye-catching print-on-demand design.\n\nStyle: Clean, minimalist, trendy\nColors: Vibrant, high contrast\nBackground: Transparent or solid color\nFormat: Suitable for t-shirts and hoodies\n\nNiche: {{niche}}\nTheme: {{theme}}\n\nThe design should appeal to {{niche}} enthusiasts and be instantly recognizable.`,\n\n  title: `Create a catchy, SEO-optimized product title.\n\nRequirements:\n- Length: 50-70 characters\n- Include main keyword: {{niche}}\n- Product type: {{product_type}}\n- Unique and appealing\n- Avoid generic phrases like \"Best\" or \"Amazing\"\n\nFormat: [Adjective] [Niche-related word] [Product type] - [Unique selling point]`,\n\n  description: `Write a compelling product description for {{niche}} enthusiasts.\n\nProduct: {{product_type}}\nDesign theme: {{theme}}\n\nStructure:\n1. Hook (1 sentence) - Grab attention\n2. Benefits (2-3 bullet points) - Why they need it\n3. Quality details - Premium materials, print quality\n4. Call to action - Limited availability, order now\n\nTone: Enthusiastic but professional\nLength: 100-150 words\nInclude relevant keywords naturally.`,\n}\n\n// =====================================================\n// MOCK DATA GENERATOR\n// =====================================================\n\nfunction generateMockPrompts(): Prompt[] {\n  return [\n    {\n      id: '1',\n      type: 'image',\n      name: 'Bild-Prompt',\n      content: DEFAULT_PROMPTS.image,\n      isDefault: true,\n      isActive: true,\n      usageCount: 145,\n      lastUsed: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n      createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: '2',\n      type: 'title',\n      name: 'Titel-Prompt',\n      content: DEFAULT_PROMPTS.title,\n      isDefault: true,\n      isActive: true,\n      usageCount: 145,\n      lastUsed: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n      createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: '3',\n      type: 'description',\n      name: 'Beschreibungs-Prompt',\n      content: DEFAULT_PROMPTS.description,\n      isDefault: true,\n      isActive: true,\n      usageCount: 145,\n      lastUsed: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),\n      createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n  ]\n}\n\n// =====================================================\n// USE PROMPTS HOOK\n// =====================================================\n\nexport function usePrompts(settingsId: string | null) {\n  const { session } = useAuth()\n  const addToast = useToastStore((state) => state.addToast)\n  const queryClient = useQueryClient()\n\n  // Fetch prompts\n  const {\n    data: prompts,\n    isLoading,\n    error,\n  } = useQuery({\n    queryKey: ['prompts', settingsId],\n    queryFn: async () => {\n      if (!settingsId) {\n        return generateMockPrompts()\n      }\n\n      try {\n        const response = await api.get<{\n          success: boolean\n          prompts: Prompt[]\n        }>(`/api/pod-autom/prompts/${settingsId}`)\n        return response.prompts\n      } catch {\n        // Fall back to mock data\n        return generateMockPrompts()\n      }\n    },\n    enabled: !!session,\n    staleTime: 1000 * 60 * 5,\n  })\n\n  // Save prompt mutation\n  const savePromptMutation = useMutation({\n    mutationFn: async ({ type, content }: { type: PromptType; content: string }) => {\n      if (!settingsId) {\n        // Mock save for demo\n        return { type, content }\n      }\n\n      const response = await api.put<{\n        success: boolean\n        prompt: Prompt\n        error?: string\n      }>(`/api/pod-autom/prompts/${settingsId}/${type}`, {\n        prompt_text: content,\n      })\n\n      if (!response.success) {\n        throw new Error(response.error || 'Failed to save prompt')\n      }\n      return { type, content }\n    },\n    onSuccess: ({ type, content }) => {\n      queryClient.setQueryData<Prompt[]>(['prompts', settingsId], (old) =>\n        old?.map((p) =>\n          p.type === type ? { ...p, content, isDefault: false } : p\n        ) || []\n      )\n      addToast({\n        type: 'success',\n        title: 'Prompt gespeichert',\n        description: 'Deine Änderungen wurden übernommen.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Fehler',\n        description: error.message,\n      })\n    },\n  })\n\n  // Reset prompt mutation\n  const resetPromptMutation = useMutation({\n    mutationFn: async (type: PromptType) => {\n      if (!settingsId) {\n        return { type, content: DEFAULT_PROMPTS[type] }\n      }\n\n      const response = await api.put<{\n        success: boolean\n        error?: string\n      }>(`/api/pod-autom/prompts/${settingsId}/${type}`, {\n        prompt_text: DEFAULT_PROMPTS[type],\n      })\n\n      if (!response.success) {\n        throw new Error(response.error || 'Failed to reset prompt')\n      }\n      return { type, content: DEFAULT_PROMPTS[type] }\n    },\n    onSuccess: ({ type, content }) => {\n      queryClient.setQueryData<Prompt[]>(['prompts', settingsId], (old) =>\n        old?.map((p) =>\n          p.type === type ? { ...p, content, isDefault: true } : p\n        ) || []\n      )\n      addToast({\n        type: 'success',\n        title: 'Prompt zurückgesetzt',\n        description: 'Der Standard-Prompt wurde wiederhergestellt.',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Fehler',\n        description: error.message,\n      })\n    },\n  })\n\n  return {\n    prompts: prompts || [],\n    isLoading,\n    error,\n    savePrompt: (type: PromptType, content: string) =>\n      savePromptMutation.mutate({ type, content }),\n    isSaving: savePromptMutation.isPending,\n    resetPrompt: resetPromptMutation.mutate,\n    isResetting: resetPromptMutation.isPending,\n    defaultPrompts: DEFAULT_PROMPTS,\n  }\n}\n\nexport default usePrompts\n","import { DashboardLayout } from '@src/components/layout'\nimport { PromptManager } from '@src/components/dashboard/PromptManager'\nimport { useShops, useShopSettings } from '@src/hooks/useShopify'\nimport { usePrompts } from '@src/hooks/usePrompts'\nimport { Loader2 } from 'lucide-react'\n\n// =====================================================\n// DASHBOARD PROMPTS PAGE\n// =====================================================\n\nexport default function DashboardPrompts() {\n  const { shops, isLoading: shopsLoading } = useShops()\n  const currentShopId = shops[0]?.id || null\n  const { settings, isLoading: settingsLoading } = useShopSettings(currentShopId)\n\n  const {\n    prompts,\n    isLoading: promptsLoading,\n    savePrompt,\n    isSaving,\n    resetPrompt,\n  } = usePrompts(settings?.id || null)\n\n  const isLoading = shopsLoading || settingsLoading || promptsLoading\n\n  if (isLoading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-64\">\n          <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <PromptManager\n        prompts={prompts}\n        isLoading={isLoading}\n        onSave={savePrompt}\n        onReset={resetPrompt}\n        isSaving={isSaving}\n      />\n    </DashboardLayout>\n  )\n}\n"],"names":["DEFAULT_PROMPTS","PROMPT_CONFIG","jsx","Image","Type","FileText","AVAILABLE_VARIABLES","PromptCard","type","content","isEditing","isSaving","hasChanges","onEdit","onSave","onReset","onCancel","editedContent","setEditedContent","useState","showPreview","setShowPreview","copied","setCopied","config","handleCopy","handleSave","handleReset","handleCancel","getPreview","jsxs","Loader2","Save","Edit3","e","Check","Copy","RotateCcw","Eye","Sparkles","PromptManager","prompts","isLoading","editingType","setEditingType","showVariables","setShowVariables","getPromptContent","p","prompt","Wand2","ChevronUp","ChevronDown","variable","AlertCircle","generateMockPrompts","usePrompts","settingsId","session","useAuth","addToast","useToastStore","state","queryClient","useQueryClient","error","useQuery","api","savePromptMutation","useMutation","response","old","resetPromptMutation","DashboardPrompts","shops","shopsLoading","useShops","currentShopId","settings","settingsLoading","useShopSettings","promptsLoading","savePrompt","resetPrompt","DashboardLayout"],"mappings":"0gBA8CA,MAAMA,EAA8C,CAClD,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kFAYP,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kFAWP,YAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAcf,EAEMC,EAAmG,CACvG,MAAO,CACL,KAAMC,EAAAA,IAACC,EAAA,CAAM,UAAU,SAAA,CAAU,EACjC,MAAO,cACP,YAAa,kDAAA,EAEf,MAAO,CACL,KAAMD,EAAAA,IAACE,EAAA,CAAK,UAAU,SAAA,CAAU,EAChC,MAAO,eACP,YAAa,iCAAA,EAEf,YAAa,CACX,KAAMF,EAAAA,IAACG,EAAA,CAAS,UAAU,SAAA,CAAU,EACpC,MAAO,uBACP,YAAa,wCAAA,CAEjB,EAEMC,EAAsB,CAC1B,CAAE,IAAK,YAAa,YAAa,kCAAA,EACjC,CAAE,IAAK,YAAa,YAAa,kCAAA,EACjC,CAAE,IAAK,mBAAoB,YAAa,6BAAA,EACxC,CAAE,IAAK,YAAa,YAAa,0BAAA,EACjC,CAAE,IAAK,YAAa,YAAa,6BAAA,CACnC,EAkBA,SAASC,EAAW,CAClB,KAAAC,EACA,QAAAC,EACA,UAAAC,EACA,SAAAC,EACA,WAAAC,EACA,OAAAC,EACA,OAAAC,EACA,QAAAC,EACA,SAAAC,CACF,EAAoB,CAClB,KAAM,CAACC,EAAeC,CAAgB,EAAIC,EAAAA,SAASV,CAAO,EACpD,CAACW,EAAaC,CAAc,EAAIF,EAAAA,SAAS,EAAK,EAC9C,CAACG,EAAQC,CAAS,EAAIJ,EAAAA,SAAS,EAAK,EAEpCK,EAASvB,EAAcO,CAAI,EAE3BiB,EAAa,SAAY,CAC7B,MAAM,UAAU,UAAU,UAAUR,CAAa,EACjDM,EAAU,EAAI,EACd,WAAW,IAAMA,EAAU,EAAK,EAAG,GAAI,CACzC,EAEMG,EAAa,IAAM,CACvBZ,EAAOG,CAAa,CACtB,EAEMU,EAAc,IAAM,CACxBT,EAAiBlB,EAAgBQ,CAAI,CAAC,EACtCO,EAAA,CACF,EAEMa,EAAe,IAAM,CACzBV,EAAiBT,CAAO,EACxBO,EAAA,CACF,EAGMa,EAAa,IACVZ,EACJ,QAAQ,iBAAkB,SAAS,EACnC,QAAQ,iBAAkB,YAAY,EACtC,QAAQ,wBAAyB,SAAS,EAC1C,QAAQ,iBAAkB,YAAY,EACtC,QAAQ,iBAAkB,SAAS,EAGxC,OACEa,EAAAA,KAAC,MAAA,CAAI,UAAU,gEAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA5B,EAAAA,IAAC,MAAA,CAAI,UAAU,yFACZ,SAAAsB,EAAO,KACV,SACC,MAAA,CACC,SAAA,CAAAtB,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAA0B,SAAAsB,EAAO,MAAM,EACrDtB,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAyB,WAAO,WAAA,CAAY,CAAA,CAAA,CAC3D,CAAA,EACF,EACA4B,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACZ,SAAA,CAAAlB,GAAc,CAACF,GACdR,EAAAA,IAAC,OAAA,CAAK,UAAU,oCAAoC,EAEpDQ,EASAoB,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA5B,EAAAA,IAAC,SAAA,CACC,QAAS0B,EACT,UAAU,wBACX,SAAA,WAAA,CAAA,EAGDE,EAAAA,KAAC,SAAA,CACC,QAASJ,EACT,SAAUf,EACV,UAAU,sBAET,SAAA,CAAAA,EACCT,EAAAA,IAAC6B,GAAQ,UAAU,2BAAA,CAA4B,EAE/C7B,EAAAA,IAAC8B,EAAA,CAAK,UAAU,cAAA,CAAe,EAC/B,WAAA,CAAA,CAAA,CAEJ,CAAA,CACF,EA3BAF,EAAAA,KAAC,SAAA,CACC,QAASjB,EACT,UAAU,wBAEV,SAAA,CAAAX,EAAAA,IAAC+B,EAAA,CAAM,UAAU,cAAA,CAAe,EAAE,YAAA,CAAA,CAAA,CAuBpC,CAAA,CAEJ,CAAA,EACF,EAGA/B,EAAAA,IAAC,OAAI,UAAU,MACZ,WACC4B,EAAAA,KAAC,MAAA,CAAI,UAAU,YACb,SAAA,CAAA5B,EAAAA,IAAC,WAAA,CACC,MAAOe,EACP,SAAWiB,GAAMhB,EAAiBgB,EAAE,OAAO,KAAK,EAChD,UAAU,oDACV,YAAa,GAAGV,EAAO,KAAK,cAAA,CAAA,QAI7B,MAAA,CAAI,UAAU,oCACb,SAAAM,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAASL,EACT,UAAU,wBAET,SAAA,CAAAH,EACCpB,EAAAA,IAACiC,GAAM,UAAU,+BAAA,CAAgC,EAEjDjC,EAAAA,IAACkC,EAAA,CAAK,UAAU,cAAA,CAAe,EAEhCd,EAAS,WAAa,UAAA,CAAA,CAAA,EAEzBQ,EAAAA,KAAC,SAAA,CACC,QAASH,EACT,UAAU,wBAEV,SAAA,CAAAzB,EAAAA,IAACmC,EAAA,CAAU,UAAU,cAAA,CAAe,EAAE,UAAA,CAAA,CAAA,EAGxCP,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMT,EAAe,CAACD,CAAW,EAC1C,UAAU,wBAEV,SAAA,CAAAlB,EAAAA,IAACoC,EAAA,CAAI,UAAU,cAAA,CAAe,EAAE,UAAA,CAAA,CAAA,CAElC,CAAA,CACF,CAAA,CACF,EAGClB,GACCU,EAAAA,KAAC,MAAA,CAAI,UAAU,oDACb,SAAA,CAAAA,EAAAA,KAAC,IAAA,CAAE,UAAU,qDACX,SAAA,CAAA5B,EAAAA,IAACqC,EAAA,CAAS,UAAU,SAAA,CAAU,EAAE,6BAAA,EAElC,EACArC,EAAAA,IAAC,MAAA,CAAI,UAAU,sDACZ,YAAW,CACd,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,EAEAA,EAAAA,IAAC,MAAA,CAAI,UAAU,WACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,kHACZ,SAAAO,CAAA,CACH,CAAA,CACF,CAAA,CAEJ,CAAA,EACF,CAEJ,CAMO,SAAS+B,GAAc,CAC5B,QAAAC,EACA,UAAAC,EACA,OAAA5B,EACA,QAAAC,EACA,SAAAJ,EAAW,EACb,EAAuB,CACrB,KAAM,CAACgC,EAAaC,CAAc,EAAIzB,EAAAA,SAA4B,IAAI,EAChE,CAAC0B,EAAeC,CAAgB,EAAI3B,EAAAA,SAAS,EAAK,EAElD4B,EAAoBvC,GACTiC,EAAQ,KAAMO,GAAMA,EAAE,OAASxC,CAAI,GACnC,SAAWR,EAAgBQ,CAAI,EAG1CI,EAAcJ,GAA8B,CAChD,MAAMyC,EAASR,EAAQ,KAAMO,GAAMA,EAAE,OAASxC,CAAI,EAClD,OAAOyC,EAASA,EAAO,UAAYjD,EAAgBQ,CAAI,EAAI,EAC7D,EAEA,OAAIkC,EAEAxC,MAAC,OAAI,UAAU,wCACb,eAAC6B,EAAA,CAAQ,UAAU,uCAAuC,CAAA,CAC5D,EAKFD,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAA5B,MAAC,MAAA,CAAI,UAAU,kEACb,SAAA4B,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,uDACZ,SAAA,CAAA5B,EAAAA,IAACgD,EAAA,CAAM,UAAU,yBAAA,CAA0B,EAAE,YAAA,EAE/C,EACAhD,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,iEAAA,CAE1C,CAAA,CAAA,CACF,CAAA,CACF,EAGA4B,EAAAA,KAAC,MAAA,CAAI,UAAU,gEACb,SAAA,CAAAA,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMgB,EAAiB,CAACD,CAAa,EAC9C,UAAU,gGAEV,SAAA,CAAAf,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAA5B,EAAAA,IAAC,OAAI,UAAU,uEACb,eAACqC,EAAA,CAAS,UAAU,0BAA0B,CAAA,CAChD,SACC,MAAA,CACC,SAAA,CAAArC,EAAAA,IAAC,IAAA,CAAE,UAAU,yBAAyB,SAAA,uBAAoB,EAC1DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,0CAAA,CAErC,CAAA,CAAA,CACF,CAAA,EACF,EACC2C,QACEM,EAAA,CAAU,UAAU,wBAAwB,EAE7CjD,MAACkD,EAAA,CAAY,UAAU,uBAAA,CAAwB,CAAA,CAAA,CAAA,EAIlDP,GACC3C,EAAAA,IAAC,MAAA,CAAI,UAAU,oCACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,4DACZ,SAAAI,EAAoB,IAAK+C,GACxBvB,EAAAA,KAAC,MAAA,CAEC,UAAU,uDAEV,SAAA,CAAA5B,EAAAA,IAAC,OAAA,CAAK,UAAU,yEACb,SAAAmD,EAAS,IACZ,EACAnD,EAAAA,IAAC,IAAA,CAAE,UAAU,+BACV,WAAS,WAAA,CACZ,CAAA,CAAA,EARKmD,EAAS,GAAA,CAUjB,EACH,CAAA,CACF,CAAA,EAEJ,QAGC,MAAA,CAAI,UAAU,4DACb,SAAAvB,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAA5B,EAAAA,IAACoD,EAAA,CAAY,UAAU,6CAAA,CAA8C,SACpE,MAAA,CACC,SAAA,CAAApD,EAAAA,IAAC,IAAA,CAAE,UAAU,qCAAqC,SAAA,+BAA4B,EAC9E4B,EAAAA,KAAC,KAAA,CAAG,UAAU,uCACZ,SAAA,CAAA5B,EAAAA,IAAC,MAAG,SAAA,0DAAA,CAAwD,EAC5DA,EAAAA,IAAC,MAAG,SAAA,8DAAA,CAA4D,EAChEA,EAAAA,IAAC,MAAG,SAAA,mDAAA,CAAiD,CAAA,CAAA,CACvD,CAAA,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CACF,EAGAA,EAAAA,IAAC,MAAA,CAAI,UAAU,YACX,SAAA,CAAC,QAAS,QAAS,aAAa,EAAmB,IAAKM,GACxDN,EAAAA,IAACK,EAAA,CAEC,KAAAC,EACA,QAASuC,EAAiBvC,CAAI,EAC9B,UAAWmC,IAAgBnC,EAC3B,SAAAG,EACA,WAAYC,EAAWJ,CAAI,EAC3B,OAAQ,IAAMoC,EAAepC,CAAI,EACjC,OAASC,GAAY,CACnBK,EAAON,EAAMC,CAAO,EACpBmC,EAAe,IAAI,CACrB,EACA,QAAS,IAAM7B,EAAQP,CAAI,EAC3B,SAAU,IAAMoC,EAAe,IAAI,CAAA,EAZ9BpC,CAAA,CAcR,CAAA,CACH,CAAA,EACF,CAEJ,CC3ZA,MAAMR,EAA8C,CAClD,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kFAYP,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kFAWP,YAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAcf,EAMA,SAASuD,GAAgC,CACvC,MAAO,CACL,CACE,GAAI,IACJ,KAAM,QACN,KAAM,cACN,QAASvD,EAAgB,MACzB,UAAW,GACX,SAAU,GACV,WAAY,IACZ,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAI,EAAE,YAAA,EACpD,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,CACE,GAAI,IACJ,KAAM,QACN,KAAM,eACN,QAASA,EAAgB,MACzB,UAAW,GACX,SAAU,GACV,WAAY,IACZ,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAI,EAAE,YAAA,EACpD,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,CACE,GAAI,IACJ,KAAM,cACN,KAAM,uBACN,QAASA,EAAgB,YACzB,UAAW,GACX,SAAU,GACV,WAAY,IACZ,SAAU,IAAI,KAAK,KAAK,IAAA,EAAQ,KAAc,GAAI,EAAE,YAAA,EACpD,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,CACzE,CAEJ,CAMO,SAASwD,GAAWC,EAA2B,CACpD,KAAM,CAAE,QAAAC,CAAA,EAAYC,EAAA,EACdC,EAAWC,EAAeC,GAAUA,EAAM,QAAQ,EAClDC,EAAcC,EAAA,EAGd,CACJ,KAAMvB,EACN,UAAAC,EACA,MAAAuB,CAAA,EACEC,EAAS,CACX,SAAU,CAAC,UAAWT,CAAU,EAChC,QAAS,SAAY,CACnB,GAAI,CAACA,EACH,OAAOF,EAAA,EAGT,GAAI,CAKF,OAJiB,MAAMY,EAAI,IAGxB,0BAA0BV,CAAU,EAAE,GACzB,OAClB,MAAQ,CAEN,OAAOF,EAAA,CACT,CACF,EACA,QAAS,CAAC,CAACG,EACX,UAAW,IAAO,GAAK,CAAA,CACxB,EAGKU,EAAqBC,EAAY,CACrC,WAAY,MAAO,CAAE,KAAA7D,EAAM,QAAAC,KAAqD,CAC9E,GAAI,CAACgD,EAEH,MAAO,CAAE,KAAAjD,EAAM,QAAAC,CAAA,EAGjB,MAAM6D,EAAW,MAAMH,EAAI,IAIxB,0BAA0BV,CAAU,IAAIjD,CAAI,GAAI,CACjD,YAAaC,CAAA,CACd,EAED,GAAI,CAAC6D,EAAS,QACZ,MAAM,IAAI,MAAMA,EAAS,OAAS,uBAAuB,EAE3D,MAAO,CAAE,KAAA9D,EAAM,QAAAC,CAAA,CACjB,EACA,UAAW,CAAC,CAAE,KAAAD,EAAM,QAAAC,KAAc,CAChCsD,EAAY,aAAuB,CAAC,UAAWN,CAAU,EAAIc,GAC3DA,GAAK,IAAKvB,GACRA,EAAE,OAASxC,EAAO,CAAE,GAAGwC,EAAG,QAAAvC,EAAS,UAAW,IAAUuC,CAAA,GACrD,CAAA,CAAC,EAERY,EAAS,CACP,KAAM,UACN,MAAO,qBACP,YAAa,qCAAA,CACd,CACH,EACA,QAAUK,GAAiB,CACzBL,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAaK,EAAM,OAAA,CACpB,CACH,CAAA,CACD,EAGKO,EAAsBH,EAAY,CACtC,WAAY,MAAO7D,GAAqB,CACtC,GAAI,CAACiD,EACH,MAAO,CAAE,KAAAjD,EAAM,QAASR,EAAgBQ,CAAI,CAAA,EAG9C,MAAM8D,EAAW,MAAMH,EAAI,IAGxB,0BAA0BV,CAAU,IAAIjD,CAAI,GAAI,CACjD,YAAaR,EAAgBQ,CAAI,CAAA,CAClC,EAED,GAAI,CAAC8D,EAAS,QACZ,MAAM,IAAI,MAAMA,EAAS,OAAS,wBAAwB,EAE5D,MAAO,CAAE,KAAA9D,EAAM,QAASR,EAAgBQ,CAAI,CAAA,CAC9C,EACA,UAAW,CAAC,CAAE,KAAAA,EAAM,QAAAC,KAAc,CAChCsD,EAAY,aAAuB,CAAC,UAAWN,CAAU,EAAIc,GAC3DA,GAAK,IAAKvB,GACRA,EAAE,OAASxC,EAAO,CAAE,GAAGwC,EAAG,QAAAvC,EAAS,UAAW,IAASuC,CAAA,GACpD,CAAA,CAAC,EAERY,EAAS,CACP,KAAM,UACN,MAAO,uBACP,YAAa,8CAAA,CACd,CACH,EACA,QAAUK,GAAiB,CACzBL,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAaK,EAAM,OAAA,CACpB,CACH,CAAA,CACD,EAED,MAAO,CACL,QAASxB,GAAW,CAAA,EACpB,UAAAC,EACA,MAAAuB,EACA,WAAY,CAACzD,EAAkBC,IAC7B2D,EAAmB,OAAO,CAAE,KAAA5D,EAAM,QAAAC,EAAS,EAC7C,SAAU2D,EAAmB,UAC7B,YAAaI,EAAoB,OACjC,YAAaA,EAAoB,UACjC,eAAgBxE,CAAA,CAEpB,CCnNA,SAAwByE,IAAmB,CACzC,KAAM,CAAE,MAAAC,EAAO,UAAWC,CAAA,EAAiBC,EAAA,EACrCC,EAAgBH,EAAM,CAAC,GAAG,IAAM,KAChC,CAAE,SAAAI,EAAU,UAAWC,CAAA,EAAoBC,EAAgBH,CAAa,EAExE,CACJ,QAAApC,EACA,UAAWwC,EACX,WAAAC,EACA,SAAAvE,EACA,YAAAwE,CAAA,EACE3B,GAAWsB,GAAU,IAAM,IAAI,EAE7BpC,EAAYiC,GAAgBI,GAAmBE,EAErD,OAAIvC,EAEAxC,EAAAA,IAACkF,EAAA,CACC,SAAAlF,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC6B,EAAA,CAAQ,UAAU,sCAAA,CAAuC,CAAA,CAC5D,EACF,QAKDqD,EAAA,CACC,SAAAlF,EAAAA,IAACsC,GAAA,CACC,QAAAC,EACA,UAAAC,EACA,OAAQwC,EACR,QAASC,EACT,SAAAxE,CAAA,CAAA,EAEJ,CAEJ"}