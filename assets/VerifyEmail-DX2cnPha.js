import{j as e}from"./vendor-query-CpRdniug.js";import{f as v,h as N,r as d}from"./vendor-react-4xEIaAEA.js";import{a as b,s as x}from"./index-CupJPaFk.js";import{L as f,a as w,C as y}from"./vendor-ui-BMWb517o.js";import"./vendor-supabase-DejIJ_qE.js";import"./vendor-charts-Cz_1NfFu.js";function F(){const a=v(),[t]=N(),h=b(u=>u.addToast),[n,s]=d.useState("loading"),[c,r]=d.useState("E-Mail wird verifiziert...");return d.useEffect(()=>{(async()=>{try{const l=t.get("error"),g=t.get("error_description");if(l){s("error"),r(g||"Verifizierung fehlgeschlagen");return}const o=t.get("token_hash"),p=t.get("type");if(o&&p==="email"){const{error:i}=await x.auth.verifyOtp({token_hash:o,type:"email"});if(i){s("error"),r(i.message);return}}const m=t.get("code");if(m){const{error:i}=await x.auth.exchangeCodeForSession(m);if(i){s("error"),r(i.message);return}}const{data:{session:j}}=await x.auth.getSession();j?.user?.email_confirmed_at?(s("success"),r("Deine E-Mail-Adresse wurde erfolgreich verifiziert!"),h({type:"success",title:"E-Mail verifiziert",description:"Du kannst dich jetzt anmelden."}),setTimeout(()=>{a("/onboarding",{replace:!0})},2e3)):!o&&!m&&(s("error"),r("UngÃ¼ltiger Verifizierungslink"))}catch(l){console.error("Verification error:",l),s("error"),r("Ein unerwarteter Fehler ist aufgetreten")}})()},[t,a,h]),e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-8",children:e.jsxs("div",{className:"max-w-md w-full text-center",children:[n==="loading"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-violet-500/10 flex items-center justify-center mx-auto mb-6",children:e.jsx(f,{className:"w-10 h-10 text-violet-500 animate-spin"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Verifizierung..."}),e.jsx("p",{className:"text-zinc-400",children:c})]}),n==="success"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-emerald-500/10 flex items-center justify-center mx-auto mb-6",children:e.jsx(w,{className:"w-10 h-10 text-emerald-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"E-Mail verifiziert!"}),e.jsx("p",{className:"text-zinc-400 mb-8",children:c}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-zinc-500",children:[e.jsx(f,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{className:"text-sm",children:"Weiterleitung..."})]})]}),n==="error"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-20 h-20 rounded-full bg-red-500/10 flex items-center justify-center mx-auto mb-6",children:e.jsx(y,{className:"w-10 h-10 text-red-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Verifizierung fehlgeschlagen"}),e.jsx("p",{className:"text-zinc-400 mb-8",children:c}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("button",{onClick:()=>a("/login"),className:"btn-primary w-full py-3",children:"Zum Login"}),e.jsxs("p",{className:"text-sm text-zinc-500",children:["Probleme?"," ",e.jsx("a",{href:"mailto:support@pod-autom.de",className:"text-violet-400 hover:text-violet-300",children:"Kontaktiere den Support"})]})]})]})]})})}export{F as default};
//# sourceMappingURL=VerifyEmail-DX2cnPha.js.map
