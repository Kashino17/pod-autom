{"version":3,"file":"DashboardNiches-Br2c5Bpw.js","sources":["../../src/components/dashboard/NicheSelector.tsx","../../src/hooks/useNicheStats.ts","../../src/pages/DashboardNiches.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { Link } from 'react-router-dom'\nimport {\n  Tag,\n  Plus,\n  X,\n  Search,\n  TrendingUp,\n  TrendingDown,\n  Eye,\n  ShoppingCart,\n  Loader2,\n  Sparkles,\n  MoreVertical,\n  Pause,\n  Play,\n  Trash2,\n  Lock,\n  ArrowRight,\n} from 'lucide-react'\nimport { useSubscription } from '@src/contexts/SubscriptionContext'\n\n// =====================================================\n// TYPES\n// =====================================================\n\nexport interface NicheWithStats {\n  id: string\n  name: string\n  slug: string\n  isActive: boolean\n  productCount: number\n  impressions: number\n  sales: number\n  revenue: number\n  trend: 'up' | 'down' | 'neutral'\n  createdAt: string\n}\n\ninterface NicheSelectorProps {\n  niches: NicheWithStats[]\n  isLoading: boolean\n  onAddNiche: (name: string) => void\n  onToggleNiche: (id: string, active: boolean) => void\n  onDeleteNiche: (id: string) => void\n  isAdding?: boolean\n}\n\n// Suggested niches for quick add\nconst SUGGESTED_NICHES = [\n  { name: 'Fitness & Sport', icon: 'üí™' },\n  { name: 'Haustiere', icon: 'üêï' },\n  { name: 'Gaming', icon: 'üéÆ' },\n  { name: 'Musik', icon: 'üéµ' },\n  { name: 'Reisen', icon: '‚úàÔ∏è' },\n  { name: 'Kochen', icon: 'üë®‚Äçüç≥' },\n  { name: 'Fotografie', icon: 'üì∑' },\n  { name: 'Yoga', icon: 'üßò' },\n]\n\n// =====================================================\n// NICHE CARD COMPONENT\n// =====================================================\n\ninterface NicheCardProps {\n  niche: NicheWithStats\n  onToggle: (active: boolean) => void\n  onDelete: () => void\n}\n\nfunction NicheCard({ niche, onToggle, onDelete }: NicheCardProps) {\n  const [showMenu, setShowMenu] = useState(false)\n\n  const formatNumber = (value: number) =>\n    new Intl.NumberFormat('de-DE').format(value)\n\n  const formatCurrency = (value: number) =>\n    new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(value)\n\n  return (\n    <div\n      className={`relative bg-zinc-800/50 rounded-xl border transition-all ${\n        niche.isActive\n          ? 'border-violet-500/30 hover:border-violet-500/50'\n          : 'border-zinc-700 opacity-60'\n      }`}\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between p-4 border-b border-zinc-700/50\">\n        <div className=\"flex items-center gap-3\">\n          <div\n            className={`w-10 h-10 rounded-lg flex items-center justify-center ${\n              niche.isActive ? 'bg-violet-500/20' : 'bg-zinc-700'\n            }`}\n          >\n            <Tag className={`w-5 h-5 ${niche.isActive ? 'text-violet-400' : 'text-zinc-500'}`} />\n          </div>\n          <div>\n            <h3 className=\"font-medium text-white\">{niche.name}</h3>\n            <p className=\"text-xs text-zinc-500\">\n              {niche.isActive ? 'Aktiv' : 'Pausiert'} ¬∑ {niche.productCount} Produkte\n            </p>\n          </div>\n        </div>\n\n        {/* Menu */}\n        <div className=\"relative\">\n          <button\n            onClick={() => setShowMenu(!showMenu)}\n            className=\"p-1.5 rounded-lg hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors\"\n          >\n            <MoreVertical className=\"w-4 h-4\" />\n          </button>\n\n          {showMenu && (\n            <>\n              <div\n                className=\"fixed inset-0 z-10\"\n                onClick={() => setShowMenu(false)}\n              />\n              <div className=\"absolute right-0 top-full mt-1 w-40 bg-zinc-800 border border-zinc-700 rounded-lg shadow-xl z-20 overflow-hidden\">\n                <button\n                  onClick={() => {\n                    onToggle(!niche.isActive)\n                    setShowMenu(false)\n                  }}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-zinc-300 hover:bg-zinc-700 transition-colors\"\n                >\n                  {niche.isActive ? (\n                    <>\n                      <Pause className=\"w-4 h-4\" />\n                      Pausieren\n                    </>\n                  ) : (\n                    <>\n                      <Play className=\"w-4 h-4\" />\n                      Aktivieren\n                    </>\n                  )}\n                </button>\n                <button\n                  onClick={() => {\n                    onDelete()\n                    setShowMenu(false)\n                  }}\n                  className=\"w-full flex items-center gap-2 px-3 py-2 text-sm text-red-400 hover:bg-zinc-700 transition-colors\"\n                >\n                  <Trash2 className=\"w-4 h-4\" />\n                  L√∂schen\n                </button>\n              </div>\n            </>\n          )}\n        </div>\n      </div>\n\n      {/* Stats */}\n      <div className=\"grid grid-cols-3 divide-x divide-zinc-700/50\">\n        <div className=\"p-3 text-center\">\n          <div className=\"flex items-center justify-center gap-1 text-zinc-400 mb-1\">\n            <Eye className=\"w-3.5 h-3.5\" />\n          </div>\n          <p className=\"text-sm font-medium text-white\">{formatNumber(niche.impressions)}</p>\n          <p className=\"text-xs text-zinc-500\">Impressionen</p>\n        </div>\n        <div className=\"p-3 text-center\">\n          <div className=\"flex items-center justify-center gap-1 text-zinc-400 mb-1\">\n            <ShoppingCart className=\"w-3.5 h-3.5\" />\n          </div>\n          <p className=\"text-sm font-medium text-white\">{niche.sales}</p>\n          <p className=\"text-xs text-zinc-500\">Verk√§ufe</p>\n        </div>\n        <div className=\"p-3 text-center\">\n          <div className=\"flex items-center justify-center gap-1 mb-1\">\n            {niche.trend === 'up' && <TrendingUp className=\"w-3.5 h-3.5 text-emerald-400\" />}\n            {niche.trend === 'down' && <TrendingDown className=\"w-3.5 h-3.5 text-red-400\" />}\n            {niche.trend === 'neutral' && <div className=\"w-3.5 h-0.5 bg-zinc-600 rounded\" />}\n          </div>\n          <p className=\"text-sm font-medium text-white\">{formatCurrency(niche.revenue)}</p>\n          <p className=\"text-xs text-zinc-500\">Umsatz</p>\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// =====================================================\n// NICHE SELECTOR COMPONENT\n// =====================================================\n\nexport function NicheSelector({\n  niches,\n  isLoading,\n  onAddNiche,\n  onToggleNiche,\n  onDeleteNiche,\n  isAdding = false,\n}: NicheSelectorProps) {\n  const [searchTerm, setSearchTerm] = useState('')\n  const [newNiche, setNewNiche] = useState('')\n  const [showAddModal, setShowAddModal] = useState(false)\n  const { maxNiches, tier, isActive } = useSubscription()\n\n  const filteredNiches = niches.filter((niche) =>\n    niche.name.toLowerCase().includes(searchTerm.toLowerCase())\n  )\n\n  const activeCount = niches.filter((n) => n.isActive).length\n  const totalProducts = niches.reduce((sum, n) => sum + n.productCount, 0)\n  const totalRevenue = niches.reduce((sum, n) => sum + n.revenue, 0)\n\n  // Limit checking\n  const isUnlimited = maxNiches === Infinity\n  const canAddMore = isActive && (isUnlimited || niches.length < maxNiches)\n  const isAtLimit = !isUnlimited && niches.length >= maxNiches\n  const isNearLimit = !isUnlimited && niches.length >= maxNiches * 0.8\n\n  const handleAddNiche = (name: string) => {\n    if (!name.trim()) return\n    const exists = niches.some(\n      (n) => n.name.toLowerCase() === name.toLowerCase()\n    )\n    if (exists) return\n    onAddNiche(name.trim())\n    setNewNiche('')\n    setShowAddModal(false)\n  }\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    handleAddNiche(newNiche)\n  }\n\n  // Available suggestions (not already added)\n  const availableSuggestions = SUGGESTED_NICHES.filter(\n    (s) => !niches.some((n) => n.name.toLowerCase() === s.name.toLowerCase())\n  )\n\n  if (isLoading) {\n    return (\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6\">\n        <div className=\"flex items-center justify-center h-48\">\n          <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Header */}\n      <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-4\">\n        <div>\n          <h2 className=\"text-xl font-bold text-white flex items-center gap-2\">\n            <Tag className=\"w-5 h-5 text-violet-400\" />\n            Nischen\n            {!isUnlimited && (\n              <span className={`text-sm font-normal px-2 py-0.5 rounded-full ${\n                isAtLimit\n                  ? 'bg-red-500/20 text-red-400'\n                  : isNearLimit\n                    ? 'bg-amber-500/20 text-amber-400'\n                    : 'bg-zinc-700 text-zinc-400'\n              }`}>\n                {niches.length}/{maxNiches}\n              </span>\n            )}\n          </h2>\n          <p className=\"text-sm text-zinc-400 mt-1\">\n            {activeCount} aktiv ¬∑ {totalProducts} Produkte ¬∑ {new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(totalRevenue)} Umsatz\n          </p>\n        </div>\n        {canAddMore ? (\n          <button\n            onClick={() => setShowAddModal(true)}\n            className=\"btn-primary\"\n          >\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Nische hinzuf√ºgen\n          </button>\n        ) : isAtLimit ? (\n          <Link\n            to={`/checkout?tier=${tier === 'basis' ? 'premium' : 'vip'}`}\n            className=\"btn-primary\"\n          >\n            <Lock className=\"w-4 h-4 mr-2\" />\n            Upgrade fuer mehr Nischen\n          </Link>\n        ) : (\n          <button disabled className=\"btn-secondary opacity-50 cursor-not-allowed\">\n            <Plus className=\"w-4 h-4 mr-2\" />\n            Nische hinzuf√ºgen\n          </button>\n        )}\n      </div>\n\n      {/* Limit warning banner */}\n      {isAtLimit && (\n        <div className=\"p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl\">\n          <div className=\"flex items-center justify-between gap-4\">\n            <div className=\"flex items-center gap-3\">\n              <Lock className=\"w-5 h-5 text-amber-400\" />\n              <div>\n                <p className=\"text-amber-200 font-medium\">Nischen-Limit erreicht</p>\n                <p className=\"text-sm text-amber-300/70\">\n                  Upgrade auf {tier === 'basis' ? 'Premium' : 'VIP'} fuer {tier === 'basis' ? '15' : 'unbegrenzte'} Nischen.\n                </p>\n              </div>\n            </div>\n            <Link\n              to={`/checkout?tier=${tier === 'basis' ? 'premium' : 'vip'}`}\n              className=\"flex items-center gap-1 text-amber-400 hover:text-amber-300 text-sm font-medium transition-colors\"\n            >\n              Upgraden\n              <ArrowRight className=\"w-4 h-4\" />\n            </Link>\n          </div>\n        </div>\n      )}\n\n      {/* Search */}\n      {niches.length > 4 && (\n        <div className=\"relative\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500\" />\n          <input\n            type=\"text\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            className=\"input pl-10\"\n            placeholder=\"Nischen durchsuchen...\"\n          />\n        </div>\n      )}\n\n      {/* Niche Grid */}\n      {filteredNiches.length > 0 ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n          {filteredNiches.map((niche) => (\n            <NicheCard\n              key={niche.id}\n              niche={niche}\n              onToggle={(active) => onToggleNiche(niche.id, active)}\n              onDelete={() => onDeleteNiche(niche.id)}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-12 text-center\">\n          <div className=\"w-16 h-16 bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <Tag className=\"w-8 h-8 text-zinc-600\" />\n          </div>\n          <h3 className=\"text-lg font-semibold text-white mb-2\">\n            {searchTerm ? 'Keine Nischen gefunden' : 'Keine Nischen vorhanden'}\n          </h3>\n          <p className=\"text-zinc-400 mb-4\">\n            {searchTerm\n              ? 'Versuche einen anderen Suchbegriff.'\n              : 'F√ºge deine erste Nische hinzu, um loszulegen.'}\n          </p>\n          {!searchTerm && (\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"btn-primary\"\n            >\n              <Plus className=\"w-4 h-4 mr-2\" />\n              Erste Nische hinzuf√ºgen\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Add Niche Modal */}\n      {showAddModal && (\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center p-4\">\n          <div\n            className=\"absolute inset-0 bg-black/70 backdrop-blur-sm\"\n            onClick={() => setShowAddModal(false)}\n          />\n          <div className=\"relative w-full max-w-md bg-zinc-900 border border-zinc-800 rounded-2xl p-6 shadow-xl\">\n            {/* Close button */}\n            <button\n              onClick={() => setShowAddModal(false)}\n              className=\"absolute top-4 right-4 text-zinc-400 hover:text-white\"\n            >\n              <X className=\"w-5 h-5\" />\n            </button>\n\n            {/* Header */}\n            <div className=\"mb-6\">\n              <h3 className=\"text-xl font-bold text-white\">Nische hinzuf√ºgen</h3>\n              <p className=\"text-sm text-zinc-400 mt-1\">\n                W√§hle eine Nische f√ºr die Produkt-Erstellung.\n                {!isUnlimited && (\n                  <span className={`ml-2 ${isNearLimit ? 'text-amber-400' : ''}`}>\n                    ({niches.length}/{maxNiches} verwendet)\n                  </span>\n                )}\n              </p>\n            </div>\n\n            {/* Custom input */}\n            <form onSubmit={handleSubmit} className=\"mb-6\">\n              <label className=\"label\">Eigene Nische</label>\n              <div className=\"flex gap-2\">\n                <input\n                  type=\"text\"\n                  value={newNiche}\n                  onChange={(e) => setNewNiche(e.target.value)}\n                  className=\"input flex-1\"\n                  placeholder=\"z.B. Wandern, Camping, ...\"\n                />\n                <button\n                  type=\"submit\"\n                  disabled={!newNiche.trim() || isAdding}\n                  className=\"btn-primary px-4\"\n                >\n                  {isAdding ? (\n                    <Loader2 className=\"w-5 h-5 animate-spin\" />\n                  ) : (\n                    <Plus className=\"w-5 h-5\" />\n                  )}\n                </button>\n              </div>\n            </form>\n\n            {/* Suggestions */}\n            {availableSuggestions.length > 0 && (\n              <div>\n                <label className=\"label flex items-center gap-2\">\n                  <Sparkles className=\"w-4 h-4\" />\n                  Vorschl√§ge\n                </label>\n                <div className=\"grid grid-cols-2 gap-2\">\n                  {availableSuggestions.slice(0, 6).map((suggestion) => (\n                    <button\n                      key={suggestion.name}\n                      onClick={() => handleAddNiche(suggestion.name)}\n                      disabled={isAdding}\n                      className=\"flex items-center gap-2 p-3 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-300 hover:text-white text-sm transition-colors text-left\"\n                    >\n                      <span className=\"text-lg\">{suggestion.icon}</span>\n                      <span>{suggestion.name}</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default NicheSelector\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { useAuth } from '@src/contexts/AuthContext'\nimport { api } from '@src/lib/api'\nimport { useToastStore } from '@src/lib/store'\nimport type { NicheWithStats } from '@src/components/dashboard/NicheSelector'\n\n// =====================================================\n// MOCK DATA GENERATOR\n// =====================================================\n\nfunction generateMockNiches(): NicheWithStats[] {\n  return [\n    {\n      id: '1',\n      name: 'Fitness & Sport',\n      slug: 'fitness-sport',\n      isActive: true,\n      productCount: 15,\n      impressions: 12450,\n      sales: 23,\n      revenue: 689.77,\n      trend: 'up',\n      createdAt: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: '2',\n      name: 'Yoga & Meditation',\n      slug: 'yoga-meditation',\n      isActive: true,\n      productCount: 12,\n      impressions: 8920,\n      sales: 18,\n      revenue: 539.82,\n      trend: 'up',\n      createdAt: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: '3',\n      name: 'Gaming',\n      slug: 'gaming',\n      isActive: true,\n      productCount: 8,\n      impressions: 5670,\n      sales: 9,\n      revenue: 269.91,\n      trend: 'neutral',\n      createdAt: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: '4',\n      name: 'Kaffee Liebhaber',\n      slug: 'kaffee-liebhaber',\n      isActive: true,\n      productCount: 6,\n      impressions: 3240,\n      sales: 5,\n      revenue: 149.95,\n      trend: 'down',\n      createdAt: new Date(Date.now() - 15 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n    {\n      id: '5',\n      name: 'Haustiere',\n      slug: 'haustiere',\n      isActive: false,\n      productCount: 4,\n      impressions: 1890,\n      sales: 2,\n      revenue: 59.98,\n      trend: 'down',\n      createdAt: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),\n    },\n  ]\n}\n\n// =====================================================\n// NICHE STATS HOOK\n// =====================================================\n\nexport function useNicheStats(settingsId: string | null) {\n  const { session } = useAuth()\n  const addToast = useToastStore((state) => state.addToast)\n  const queryClient = useQueryClient()\n\n  // Fetch niches with stats\n  const {\n    data: niches,\n    isLoading,\n    error,\n  } = useQuery({\n    queryKey: ['niche-stats', settingsId],\n    queryFn: async () => {\n      if (!settingsId) {\n        return generateMockNiches()\n      }\n\n      try {\n        const response = await api.get<{\n          success: boolean\n          niches: NicheWithStats[]\n        }>(`/api/pod-autom/niches/${settingsId}/stats`)\n        return response.niches\n      } catch {\n        // Fall back to mock data\n        return generateMockNiches()\n      }\n    },\n    enabled: !!session,\n    staleTime: 1000 * 60 * 5,\n  })\n\n  // Add niche mutation\n  const addNicheMutation = useMutation({\n    mutationFn: async (nicheName: string) => {\n      if (!settingsId) {\n        // Mock adding for demo\n        const newNiche: NicheWithStats = {\n          id: Date.now().toString(),\n          name: nicheName,\n          slug: nicheName.toLowerCase().replace(/\\s+/g, '-'),\n          isActive: true,\n          productCount: 0,\n          impressions: 0,\n          sales: 0,\n          revenue: 0,\n          trend: 'neutral',\n          createdAt: new Date().toISOString(),\n        }\n        return newNiche\n      }\n\n      const response = await api.post<{\n        success: boolean\n        niche: NicheWithStats\n        error?: string\n      }>(`/api/pod-autom/niches/${settingsId}`, { niche_name: nicheName })\n\n      if (!response.success) {\n        throw new Error(response.error || 'Failed to add niche')\n      }\n      return response.niche\n    },\n    onSuccess: (newNiche) => {\n      queryClient.setQueryData<NicheWithStats[]>(\n        ['niche-stats', settingsId],\n        (old) => [...(old || []), newNiche]\n      )\n      addToast({\n        type: 'success',\n        title: 'Nische hinzugef√ºgt',\n        description: `${newNiche.name} wurde erfolgreich erstellt.`,\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Fehler',\n        description: error.message,\n      })\n    },\n  })\n\n  // Toggle niche mutation\n  const toggleNicheMutation = useMutation({\n    mutationFn: async ({ id, active }: { id: string; active: boolean }) => {\n      if (!settingsId) {\n        return { id, active }\n      }\n\n      const response = await api.put<{ success: boolean; error?: string }>(\n        `/api/pod-autom/niches/${settingsId}/${id}`,\n        { is_active: active }\n      )\n\n      if (!response.success) {\n        throw new Error(response.error || 'Failed to update niche')\n      }\n      return { id, active }\n    },\n    onSuccess: ({ id, active }) => {\n      queryClient.setQueryData<NicheWithStats[]>(\n        ['niche-stats', settingsId],\n        (old) =>\n          old?.map((n) => (n.id === id ? { ...n, isActive: active } : n)) || []\n      )\n      addToast({\n        type: 'success',\n        title: active ? 'Nische aktiviert' : 'Nische pausiert',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Fehler',\n        description: error.message,\n      })\n    },\n  })\n\n  // Delete niche mutation\n  const deleteNicheMutation = useMutation({\n    mutationFn: async (id: string) => {\n      if (!settingsId) {\n        return id\n      }\n\n      const response = await api.delete<{ success: boolean; error?: string }>(\n        `/api/pod-autom/niches/${settingsId}/${id}`\n      )\n\n      if (!response.success) {\n        throw new Error(response.error || 'Failed to delete niche')\n      }\n      return id\n    },\n    onSuccess: (id) => {\n      queryClient.setQueryData<NicheWithStats[]>(\n        ['niche-stats', settingsId],\n        (old) => old?.filter((n) => n.id !== id) || []\n      )\n      addToast({\n        type: 'success',\n        title: 'Nische gel√∂scht',\n      })\n    },\n    onError: (error: Error) => {\n      addToast({\n        type: 'error',\n        title: 'Fehler',\n        description: error.message,\n      })\n    },\n  })\n\n  return {\n    niches: niches || [],\n    isLoading,\n    error,\n    addNiche: addNicheMutation.mutate,\n    isAdding: addNicheMutation.isPending,\n    toggleNiche: (id: string, active: boolean) =>\n      toggleNicheMutation.mutate({ id, active }),\n    isToggling: toggleNicheMutation.isPending,\n    deleteNiche: deleteNicheMutation.mutate,\n    isDeleting: deleteNicheMutation.isPending,\n  }\n}\n\nexport default useNicheStats\n","import { DashboardLayout } from '@src/components/layout'\nimport { NicheSelector } from '@src/components/dashboard/NicheSelector'\nimport { useShops, useShopSettings } from '@src/hooks/useShopify'\nimport { useNicheStats } from '@src/hooks/useNicheStats'\nimport { Loader2 } from 'lucide-react'\n\n// =====================================================\n// DASHBOARD NICHES PAGE\n// =====================================================\n\nexport default function DashboardNiches() {\n  const { shops, isLoading: shopsLoading } = useShops()\n  const currentShopId = shops[0]?.id || null\n  const { settings, isLoading: settingsLoading } = useShopSettings(currentShopId)\n\n  const {\n    niches,\n    isLoading: nichesLoading,\n    addNiche,\n    isAdding,\n    toggleNiche,\n    deleteNiche,\n  } = useNicheStats(settings?.id || null)\n\n  const isLoading = shopsLoading || settingsLoading || nichesLoading\n\n  if (isLoading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-64\">\n          <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <NicheSelector\n        niches={niches}\n        isLoading={isLoading}\n        onAddNiche={addNiche}\n        onToggleNiche={toggleNiche}\n        onDeleteNiche={deleteNiche}\n        isAdding={isAdding}\n      />\n    </DashboardLayout>\n  )\n}\n"],"names":["SUGGESTED_NICHES","NicheCard","niche","onToggle","onDelete","showMenu","setShowMenu","useState","formatNumber","value","formatCurrency","jsxs","jsx","Tag","MoreVertical","Fragment","Pause","Play","Trash2","Eye","ShoppingCart","TrendingUp","TrendingDown","NicheSelector","niches","isLoading","onAddNiche","onToggleNiche","onDeleteNiche","isAdding","searchTerm","setSearchTerm","newNiche","setNewNiche","showAddModal","setShowAddModal","maxNiches","tier","isActive","useSubscription","filteredNiches","activeCount","n","totalProducts","sum","totalRevenue","isUnlimited","canAddMore","isAtLimit","isNearLimit","handleAddNiche","name","handleSubmit","e","availableSuggestions","s","Loader2","Plus","Link","Lock","ArrowRight","Search","active","X","Sparkles","suggestion","generateMockNiches","useNicheStats","settingsId","session","useAuth","addToast","useToastStore","state","queryClient","useQueryClient","error","useQuery","api","addNicheMutation","useMutation","nicheName","response","old","toggleNicheMutation","id","deleteNicheMutation","DashboardNiches","shops","shopsLoading","useShops","currentShopId","settings","settingsLoading","useShopSettings","nichesLoading","addNiche","toggleNiche","deleteNiche","DashboardLayout"],"mappings":"giBAiDA,MAAMA,GAAmB,CACvB,CAAE,KAAM,kBAAmB,KAAM,IAAA,EACjC,CAAE,KAAM,YAAa,KAAM,IAAA,EAC3B,CAAE,KAAM,SAAU,KAAM,IAAA,EACxB,CAAE,KAAM,QAAS,KAAM,IAAA,EACvB,CAAE,KAAM,SAAU,KAAM,IAAA,EACxB,CAAE,KAAM,SAAU,KAAM,OAAA,EACxB,CAAE,KAAM,aAAc,KAAM,IAAA,EAC5B,CAAE,KAAM,OAAQ,KAAM,IAAA,CACxB,EAYA,SAASC,GAAU,CAAE,MAAAC,EAAO,SAAAC,EAAU,SAAAC,GAA4B,CAChE,KAAM,CAACC,EAAUC,CAAW,EAAIC,EAAAA,SAAS,EAAK,EAExCC,EAAgBC,GACpB,IAAI,KAAK,aAAa,OAAO,EAAE,OAAOA,CAAK,EAEvCC,EAAkBD,GACtB,IAAI,KAAK,aAAa,QAAS,CAAE,MAAO,WAAY,SAAU,KAAA,CAAO,EAAE,OAAOA,CAAK,EAErF,OACEE,EAAAA,KAAC,MAAA,CACC,UAAW,4DACTT,EAAM,SACF,kDACA,4BACN,GAGA,SAAA,CAAAS,EAAAA,KAAC,MAAA,CAAI,UAAU,mEACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,UAAW,yDACTV,EAAM,SAAW,mBAAqB,aACxC,GAEA,SAAAU,EAAAA,IAACC,GAAI,UAAW,WAAWX,EAAM,SAAW,kBAAoB,eAAe,EAAA,CAAI,CAAA,CAAA,SAEpF,MAAA,CACC,SAAA,CAAAU,EAAAA,IAAC,KAAA,CAAG,UAAU,yBAA0B,SAAAV,EAAM,KAAK,EACnDS,EAAAA,KAAC,IAAA,CAAE,UAAU,wBACV,SAAA,CAAAT,EAAM,SAAW,QAAU,WAAW,MAAIA,EAAM,aAAa,WAAA,CAAA,CAChE,CAAA,CAAA,CACF,CAAA,EACF,EAGAS,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMN,EAAY,CAACD,CAAQ,EACpC,UAAU,sFAEV,SAAAO,EAAAA,IAACE,EAAA,CAAa,UAAU,SAAA,CAAU,CAAA,CAAA,EAGnCT,GACCM,EAAAA,KAAAI,WAAA,CACE,SAAA,CAAAH,EAAAA,IAAC,MAAA,CACC,UAAU,qBACV,QAAS,IAAMN,EAAY,EAAK,CAAA,CAAA,EAElCK,EAAAA,KAAC,MAAA,CAAI,UAAU,mHACb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAM,CACbT,EAAS,CAACD,EAAM,QAAQ,EACxBI,EAAY,EAAK,CACnB,EACA,UAAU,qGAET,SAAAJ,EAAM,SACLS,EAAAA,KAAAI,EAAAA,SAAA,CACE,SAAA,CAAAH,EAAAA,IAACI,EAAA,CAAM,UAAU,SAAA,CAAU,EAAE,WAAA,CAAA,CAE/B,EAEAL,EAAAA,KAAAI,EAAAA,SAAA,CACE,SAAA,CAAAH,EAAAA,IAACK,EAAA,CAAK,UAAU,SAAA,CAAU,EAAE,YAAA,CAAA,CAE9B,CAAA,CAAA,EAGJN,EAAAA,KAAC,SAAA,CACC,QAAS,IAAM,CACbP,EAAA,EACAE,EAAY,EAAK,CACnB,EACA,UAAU,oGAEV,SAAA,CAAAM,EAAAA,IAACM,GAAA,CAAO,UAAU,SAAA,CAAU,EAAE,SAAA,CAAA,CAAA,CAEhC,CAAA,CACF,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAP,EAAAA,KAAC,MAAA,CAAI,UAAU,+CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,4DACb,eAACO,GAAA,CAAI,UAAU,cAAc,CAAA,CAC/B,QACC,IAAA,CAAE,UAAU,iCAAkC,SAAAX,EAAaN,EAAM,WAAW,EAAE,EAC/EU,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,cAAA,CAAY,CAAA,EACnD,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,4DACb,eAACQ,GAAA,CAAa,UAAU,cAAc,CAAA,CACxC,EACAR,EAAAA,IAAC,IAAA,CAAE,UAAU,iCAAkC,WAAM,MAAM,EAC3DA,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,UAAA,CAAQ,CAAA,EAC/C,EACAD,EAAAA,KAAC,MAAA,CAAI,UAAU,kBACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,8CACZ,SAAA,CAAAT,EAAM,QAAU,MAAQU,EAAAA,IAACS,GAAA,CAAW,UAAU,+BAA+B,EAC7EnB,EAAM,QAAU,QAAUU,EAAAA,IAACU,GAAA,CAAa,UAAU,2BAA2B,EAC7EpB,EAAM,QAAU,WAAaU,EAAAA,IAAC,MAAA,CAAI,UAAU,iCAAA,CAAkC,CAAA,EACjF,QACC,IAAA,CAAE,UAAU,iCAAkC,SAAAF,EAAeR,EAAM,OAAO,EAAE,EAC7EU,EAAAA,IAAC,IAAA,CAAE,UAAU,wBAAwB,SAAA,QAAA,CAAM,CAAA,CAAA,CAC7C,CAAA,CAAA,CACF,CAAA,CAAA,CAAA,CAGN,CAMO,SAASW,GAAc,CAC5B,OAAAC,EACA,UAAAC,EACA,WAAAC,EACA,cAAAC,EACA,cAAAC,EACA,SAAAC,EAAW,EACb,EAAuB,CACrB,KAAM,CAACC,EAAYC,CAAa,EAAIxB,EAAAA,SAAS,EAAE,EACzC,CAACyB,EAAUC,CAAW,EAAI1B,EAAAA,SAAS,EAAE,EACrC,CAAC2B,EAAcC,CAAe,EAAI5B,EAAAA,SAAS,EAAK,EAChD,CAAE,UAAA6B,EAAW,KAAAC,EAAM,SAAAC,CAAA,EAAaC,EAAA,EAEhCC,EAAiBhB,EAAO,OAAQtB,GACpCA,EAAM,KAAK,cAAc,SAAS4B,EAAW,YAAA,CAAa,CAAA,EAGtDW,EAAcjB,EAAO,OAAQkB,GAAMA,EAAE,QAAQ,EAAE,OAC/CC,EAAgBnB,EAAO,OAAO,CAACoB,EAAKF,IAAME,EAAMF,EAAE,aAAc,CAAC,EACjEG,EAAerB,EAAO,OAAO,CAACoB,EAAKF,IAAME,EAAMF,EAAE,QAAS,CAAC,EAG3DI,EAAcV,IAAc,IAC5BW,EAAaT,IAAaQ,GAAetB,EAAO,OAASY,GACzDY,EAAY,CAACF,GAAetB,EAAO,QAAUY,EAC7Ca,EAAc,CAACH,GAAetB,EAAO,QAAUY,EAAY,GAE3Dc,EAAkBC,GAAiB,CACnC,CAACA,EAAK,QACK3B,EAAO,KACnBkB,GAAMA,EAAE,KAAK,YAAA,IAAkBS,EAAK,YAAA,CAAY,IAGnDzB,EAAWyB,EAAK,MAAM,EACtBlB,EAAY,EAAE,EACdE,EAAgB,EAAK,EACvB,EAEMiB,EAAgBC,GAAuB,CAC3CA,EAAE,eAAA,EACFH,EAAelB,CAAQ,CACzB,EAGMsB,EAAuBtD,GAAiB,OAC3CuD,GAAM,CAAC/B,EAAO,KAAMkB,GAAMA,EAAE,KAAK,YAAA,IAAkBa,EAAE,KAAK,aAAa,CAAA,EAG1E,OAAI9B,EAEAb,EAAAA,IAAC,MAAA,CAAI,UAAU,oDACb,SAAAA,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC4C,EAAA,CAAQ,UAAU,sCAAA,CAAuC,EAC5D,EACF,EAKF7C,EAAAA,KAAC,MAAA,CAAI,UAAU,YAEb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,kEACb,SAAA,CAAAA,OAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,KAAA,CAAG,UAAU,uDACZ,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAI,UAAU,yBAAA,CAA0B,EAAE,UAE1C,CAACiC,GACAnC,EAAAA,KAAC,OAAA,CAAK,UAAW,gDACfqC,EACI,6BACAC,EACE,iCACA,2BACR,GACG,SAAA,CAAAzB,EAAO,OAAO,IAAEY,CAAA,CAAA,CACnB,CAAA,EAEJ,EACAzB,EAAAA,KAAC,IAAA,CAAE,UAAU,6BACV,SAAA,CAAA8B,EAAY,YAAUE,EAAc,eAAa,IAAI,KAAK,aAAa,QAAS,CAAE,MAAO,WAAY,SAAU,KAAA,CAAO,EAAE,OAAOE,CAAY,EAAE,SAAA,CAAA,CAChJ,CAAA,EACF,EACCE,EACCpC,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMwB,EAAgB,EAAI,EACnC,UAAU,cAEV,SAAA,CAAAvB,EAAAA,IAAC6C,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,mBAAA,CAAA,CAAA,EAGjCT,EACFrC,EAAAA,KAAC+C,EAAA,CACC,GAAI,kBAAkBrB,IAAS,QAAU,UAAY,KAAK,GAC1D,UAAU,cAEV,SAAA,CAAAzB,EAAAA,IAAC+C,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,2BAAA,CAAA,CAAA,EAInChD,EAAAA,KAAC,SAAA,CAAO,SAAQ,GAAC,UAAU,8CACzB,SAAA,CAAAC,EAAAA,IAAC6C,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,mBAAA,CAAA,CAEnC,CAAA,EAEJ,EAGCT,SACE,MAAA,CAAI,UAAU,4DACb,SAAArC,EAAAA,KAAC,MAAA,CAAI,UAAU,0CACb,SAAA,CAAAA,EAAAA,KAAC,MAAA,CAAI,UAAU,0BACb,SAAA,CAAAC,EAAAA,IAAC+C,EAAA,CAAK,UAAU,wBAAA,CAAyB,SACxC,MAAA,CACC,SAAA,CAAA/C,EAAAA,IAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,yBAAsB,EAChED,EAAAA,KAAC,IAAA,CAAE,UAAU,4BAA4B,SAAA,CAAA,eAC1B0B,IAAS,QAAU,UAAY,MAAM,SAAOA,IAAS,QAAU,KAAO,cAAc,WAAA,CAAA,CACnG,CAAA,CAAA,CACF,CAAA,EACF,EACA1B,EAAAA,KAAC+C,EAAA,CACC,GAAI,kBAAkBrB,IAAS,QAAU,UAAY,KAAK,GAC1D,UAAU,oGACX,SAAA,CAAA,WAECzB,EAAAA,IAACgD,EAAA,CAAW,UAAU,SAAA,CAAU,CAAA,CAAA,CAAA,CAClC,CAAA,CACF,CAAA,CACF,EAIDpC,EAAO,OAAS,GACfb,EAAAA,KAAC,MAAA,CAAI,UAAU,WACb,SAAA,CAAAC,EAAAA,IAACiD,EAAA,CAAO,UAAU,gEAAA,CAAiE,EACnFjD,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOkB,EACP,SAAWuB,GAAMtB,EAAcsB,EAAE,OAAO,KAAK,EAC7C,UAAU,cACV,YAAY,wBAAA,CAAA,CACd,EACF,EAIDb,EAAe,OAAS,EACvB5B,EAAAA,IAAC,MAAA,CAAI,UAAU,uDACZ,SAAA4B,EAAe,IAAKtC,GACnBU,EAAAA,IAACX,GAAA,CAEC,MAAAC,EACA,SAAW4D,GAAWnC,EAAczB,EAAM,GAAI4D,CAAM,EACpD,SAAU,IAAMlC,EAAc1B,EAAM,EAAE,CAAA,EAHjCA,EAAM,EAAA,CAKd,CAAA,CACH,EAEAS,OAAC,MAAA,CAAI,UAAU,iEACb,SAAA,CAAAC,EAAAA,IAAC,OAAI,UAAU,mFACb,eAACC,EAAA,CAAI,UAAU,wBAAwB,CAAA,CACzC,QACC,KAAA,CAAG,UAAU,wCACX,SAAAiB,EAAa,yBAA2B,0BAC3C,QACC,IAAA,CAAE,UAAU,qBACV,SAAAA,EACG,sCACA,gDACN,EACC,CAACA,GACAnB,EAAAA,KAAC,SAAA,CACC,QAAS,IAAMwB,EAAgB,EAAI,EACnC,UAAU,cAEV,SAAA,CAAAvB,EAAAA,IAAC6C,EAAA,CAAK,UAAU,cAAA,CAAe,EAAE,yBAAA,CAAA,CAAA,CAEnC,EAEJ,EAIDvB,GACCvB,EAAAA,KAAC,MAAA,CAAI,UAAU,0DACb,SAAA,CAAAC,EAAAA,IAAC,MAAA,CACC,UAAU,gDACV,QAAS,IAAMuB,EAAgB,EAAK,CAAA,CAAA,EAEtCxB,EAAAA,KAAC,MAAA,CAAI,UAAU,wFAEb,SAAA,CAAAC,EAAAA,IAAC,SAAA,CACC,QAAS,IAAMuB,EAAgB,EAAK,EACpC,UAAU,wDAEV,SAAAvB,EAAAA,IAACmD,EAAA,CAAE,UAAU,SAAA,CAAU,CAAA,CAAA,EAIzBpD,EAAAA,KAAC,MAAA,CAAI,UAAU,OACb,SAAA,CAAAC,EAAAA,IAAC,KAAA,CAAG,UAAU,+BAA+B,SAAA,oBAAiB,EAC9DD,EAAAA,KAAC,IAAA,CAAE,UAAU,6BAA6B,SAAA,CAAA,gDAEvC,CAACmC,GACAnC,EAAAA,KAAC,OAAA,CAAK,UAAW,QAAQsC,EAAc,iBAAmB,EAAE,GAAI,SAAA,CAAA,IAC5DzB,EAAO,OAAO,IAAEY,EAAU,aAAA,CAAA,CAC9B,CAAA,CAAA,CAEJ,CAAA,EACF,EAGAzB,EAAAA,KAAC,OAAA,CAAK,SAAUyC,EAAc,UAAU,OACtC,SAAA,CAAAxC,EAAAA,IAAC,QAAA,CAAM,UAAU,QAAQ,SAAA,gBAAa,EACtCD,EAAAA,KAAC,MAAA,CAAI,UAAU,aACb,SAAA,CAAAC,EAAAA,IAAC,QAAA,CACC,KAAK,OACL,MAAOoB,EACP,SAAWqB,GAAMpB,EAAYoB,EAAE,OAAO,KAAK,EAC3C,UAAU,eACV,YAAY,4BAAA,CAAA,EAEdzC,EAAAA,IAAC,SAAA,CACC,KAAK,SACL,SAAU,CAACoB,EAAS,KAAA,GAAUH,EAC9B,UAAU,mBAET,SAAAA,QACE2B,EAAA,CAAQ,UAAU,uBAAuB,EAE1C5C,EAAAA,IAAC6C,EAAA,CAAK,UAAU,SAAA,CAAU,CAAA,CAAA,CAE9B,CAAA,CACF,CAAA,EACF,EAGCH,EAAqB,OAAS,GAC7B3C,EAAAA,KAAC,MAAA,CACC,SAAA,CAAAA,EAAAA,KAAC,QAAA,CAAM,UAAU,gCACf,SAAA,CAAAC,EAAAA,IAACoD,EAAA,CAAS,UAAU,SAAA,CAAU,EAAE,YAAA,EAElC,EACApD,EAAAA,IAAC,MAAA,CAAI,UAAU,yBACZ,SAAA0C,EAAqB,MAAM,EAAG,CAAC,EAAE,IAAKW,GACrCtD,EAAAA,KAAC,SAAA,CAEC,QAAS,IAAMuC,EAAee,EAAW,IAAI,EAC7C,SAAUpC,EACV,UAAU,0IAEV,SAAA,CAAAjB,EAAAA,IAAC,OAAA,CAAK,UAAU,UAAW,SAAAqD,EAAW,KAAK,EAC3CrD,EAAAA,IAAC,OAAA,CAAM,SAAAqD,EAAW,IAAA,CAAK,CAAA,CAAA,EANlBA,EAAW,IAAA,CAQnB,CAAA,CACH,CAAA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CAAA,CACF,CAAA,EAEJ,CAEJ,CC1bA,SAASC,GAAuC,CAC9C,MAAO,CACL,CACE,GAAI,IACJ,KAAM,kBACN,KAAM,gBACN,SAAU,GACV,aAAc,GACd,YAAa,MACb,MAAO,GACP,QAAS,OACT,MAAO,KACP,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,CACE,GAAI,IACJ,KAAM,oBACN,KAAM,kBACN,SAAU,GACV,aAAc,GACd,YAAa,KACb,MAAO,GACP,QAAS,OACT,MAAO,KACP,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,CACE,GAAI,IACJ,KAAM,SACN,KAAM,SACN,SAAU,GACV,aAAc,EACd,YAAa,KACb,MAAO,EACP,QAAS,OACT,MAAO,UACP,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,CACE,GAAI,IACJ,KAAM,mBACN,KAAM,mBACN,SAAU,GACV,aAAc,EACd,YAAa,KACb,MAAO,EACP,QAAS,OACT,MAAO,OACP,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,IAAU,GAAK,GAAK,GAAI,EAAE,YAAA,CAAY,EAEzE,CACE,GAAI,IACJ,KAAM,YACN,KAAM,YACN,SAAU,GACV,aAAc,EACd,YAAa,KACb,MAAO,EACP,QAAS,MACT,MAAO,OACP,UAAW,IAAI,KAAK,KAAK,IAAA,EAAQ,MAAe,GAAK,GAAI,EAAE,YAAA,CAAY,CACzE,CAEJ,CAMO,SAASC,GAAcC,EAA2B,CACvD,KAAM,CAAE,QAAAC,CAAA,EAAYC,EAAA,EACdC,EAAWC,EAAeC,GAAUA,EAAM,QAAQ,EAClDC,EAAcC,EAAA,EAGd,CACJ,KAAMnD,EACN,UAAAC,EACA,MAAAmD,CAAA,EACEC,EAAS,CACX,SAAU,CAAC,cAAeT,CAAU,EACpC,QAAS,SAAY,CACnB,GAAI,CAACA,EACH,OAAOF,EAAA,EAGT,GAAI,CAKF,OAJiB,MAAMY,EAAI,IAGxB,yBAAyBV,CAAU,QAAQ,GAC9B,MAClB,MAAQ,CAEN,OAAOF,EAAA,CACT,CACF,EACA,QAAS,CAAC,CAACG,EACX,UAAW,IAAO,GAAK,CAAA,CACxB,EAGKU,EAAmBC,EAAY,CACnC,WAAY,MAAOC,GAAsB,CACvC,GAAI,CAACb,EAcH,MAZiC,CAC/B,GAAI,KAAK,IAAA,EAAM,SAAA,EACf,KAAMa,EACN,KAAMA,EAAU,YAAA,EAAc,QAAQ,OAAQ,GAAG,EACjD,SAAU,GACV,aAAc,EACd,YAAa,EACb,MAAO,EACP,QAAS,EACT,MAAO,UACP,UAAW,IAAI,KAAA,EAAO,YAAA,CAAY,EAKtC,MAAMC,EAAW,MAAMJ,EAAI,KAIxB,yBAAyBV,CAAU,GAAI,CAAE,WAAYa,EAAW,EAEnE,GAAI,CAACC,EAAS,QACZ,MAAM,IAAI,MAAMA,EAAS,OAAS,qBAAqB,EAEzD,OAAOA,EAAS,KAClB,EACA,UAAYlD,GAAa,CACvB0C,EAAY,aACV,CAAC,cAAeN,CAAU,EACzBe,GAAQ,CAAC,GAAIA,GAAO,CAAA,EAAKnD,CAAQ,CAAA,EAEpCuC,EAAS,CACP,KAAM,UACN,MAAO,qBACP,YAAa,GAAGvC,EAAS,IAAI,8BAAA,CAC9B,CACH,EACA,QAAU4C,GAAiB,CACzBL,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAaK,EAAM,OAAA,CACpB,CACH,CAAA,CACD,EAGKQ,EAAsBJ,EAAY,CACtC,WAAY,MAAO,CAAE,GAAAK,EAAI,OAAAvB,KAA8C,CACrE,GAAI,CAACM,EACH,MAAO,CAAE,GAAAiB,EAAI,OAAAvB,CAAA,EAGf,MAAMoB,EAAW,MAAMJ,EAAI,IACzB,yBAAyBV,CAAU,IAAIiB,CAAE,GACzC,CAAE,UAAWvB,CAAA,CAAO,EAGtB,GAAI,CAACoB,EAAS,QACZ,MAAM,IAAI,MAAMA,EAAS,OAAS,wBAAwB,EAE5D,MAAO,CAAE,GAAAG,EAAI,OAAAvB,CAAA,CACf,EACA,UAAW,CAAC,CAAE,GAAAuB,EAAI,OAAAvB,KAAa,CAC7BY,EAAY,aACV,CAAC,cAAeN,CAAU,EACzBe,GACCA,GAAK,IAAKzC,GAAOA,EAAE,KAAO2C,EAAK,CAAE,GAAG3C,EAAG,SAAUoB,GAAWpB,CAAE,GAAK,CAAA,CAAC,EAExE6B,EAAS,CACP,KAAM,UACN,MAAOT,EAAS,mBAAqB,iBAAA,CACtC,CACH,EACA,QAAUc,GAAiB,CACzBL,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAaK,EAAM,OAAA,CACpB,CACH,CAAA,CACD,EAGKU,EAAsBN,EAAY,CACtC,WAAY,MAAOK,GAAe,CAChC,GAAI,CAACjB,EACH,OAAOiB,EAGT,MAAMH,EAAW,MAAMJ,EAAI,OACzB,yBAAyBV,CAAU,IAAIiB,CAAE,EAAA,EAG3C,GAAI,CAACH,EAAS,QACZ,MAAM,IAAI,MAAMA,EAAS,OAAS,wBAAwB,EAE5D,OAAOG,CACT,EACA,UAAYA,GAAO,CACjBX,EAAY,aACV,CAAC,cAAeN,CAAU,EACzBe,GAAQA,GAAK,OAAQ,GAAM,EAAE,KAAOE,CAAE,GAAK,CAAA,CAAC,EAE/Cd,EAAS,CACP,KAAM,UACN,MAAO,iBAAA,CACR,CACH,EACA,QAAUK,GAAiB,CACzBL,EAAS,CACP,KAAM,QACN,MAAO,SACP,YAAaK,EAAM,OAAA,CACpB,CACH,CAAA,CACD,EAED,MAAO,CACL,OAAQpD,GAAU,CAAA,EAClB,UAAAC,EACA,MAAAmD,EACA,SAAUG,EAAiB,OAC3B,SAAUA,EAAiB,UAC3B,YAAa,CAACM,EAAYvB,IACxBsB,EAAoB,OAAO,CAAE,GAAAC,EAAI,OAAAvB,EAAQ,EAC3C,WAAYsB,EAAoB,UAChC,YAAaE,EAAoB,OACjC,WAAYA,EAAoB,SAAA,CAEpC,CC5OA,SAAwBC,IAAkB,CACxC,KAAM,CAAE,MAAAC,EAAO,UAAWC,CAAA,EAAiBC,EAAA,EACrCC,EAAgBH,EAAM,CAAC,GAAG,IAAM,KAChC,CAAE,SAAAI,EAAU,UAAWC,CAAA,EAAoBC,EAAgBH,CAAa,EAExE,CACJ,OAAAnE,EACA,UAAWuE,EACX,SAAAC,EACA,SAAAnE,EACA,YAAAoE,EACA,YAAAC,CAAA,EACE/B,GAAcyB,GAAU,IAAM,IAAI,EAEhCnE,EAAYgE,GAAgBI,GAAmBE,EAErD,OAAItE,EAEAb,EAAAA,IAACuF,EAAA,CACC,SAAAvF,EAAAA,IAAC,MAAA,CAAI,UAAU,wCACb,SAAAA,EAAAA,IAAC4C,EAAA,CAAQ,UAAU,sCAAA,CAAuC,CAAA,CAC5D,EACF,QAKD2C,EAAA,CACC,SAAAvF,EAAAA,IAACW,GAAA,CACC,OAAAC,EACA,UAAAC,EACA,WAAYuE,EACZ,cAAeC,EACf,cAAeC,EACf,SAAArE,CAAA,CAAA,EAEJ,CAEJ"}