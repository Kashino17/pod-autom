{"version":3,"file":"DashboardWinners-BwRancIC.js","sources":["../../src/hooks/useWinnerScaling.ts","../../src/pages/DashboardWinners.tsx"],"sourcesContent":["import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { api } from '@src/lib/api'\n\n// =====================================================\n// TYPES\n// =====================================================\n\nexport interface WinnerCampaign {\n  id: string\n  campaign_name: string\n  creative_type: 'video' | 'image'\n  link_type: 'product' | 'collection'\n  status: 'ACTIVE' | 'PAUSED' | 'ARCHIVED'\n  daily_budget: number\n  created_at: string\n}\n\nexport interface WinnerProduct {\n  id: string\n  product_id: string\n  collection_id: string\n  product_title: string\n  product_handle: string | null\n  shopify_image_url: string | null\n  identified_at: string\n  is_active: boolean\n  sales_3d: number\n  sales_7d: number\n  sales_10d: number\n  sales_14d: number\n  buckets_passed: number\n  winner_campaigns: WinnerCampaign[]\n}\n\nexport interface WinnerStats {\n  total_winners: number\n  active_winners: number\n  total_campaigns: number\n  active_campaigns: number\n  video_campaigns: number\n  image_campaigns: number\n}\n\nexport interface WinnerActivity {\n  id: string\n  action_type: string\n  details: Record<string, unknown>\n  executed_at: string\n}\n\nexport interface WinnerThresholds {\n  sales_3d: number\n  sales_7d: number\n  sales_10d: number\n  sales_14d: number\n  min_buckets: number\n}\n\nexport interface WinnerLimits {\n  max_video_campaigns: number\n  max_image_campaigns: number\n  video_count: number\n  image_count: number\n}\n\nexport interface WinnerSettings {\n  id: string\n  winner_scaling_enabled: boolean\n  winner_thresholds: WinnerThresholds | null\n  winner_limits: WinnerLimits | null\n  winner_video_enabled: boolean\n  winner_image_enabled: boolean\n  winner_video_prompt: string | null\n  winner_image_prompt: string | null\n  winner_daily_budget: number\n}\n\ninterface WinnersResponse {\n  success: boolean\n  winners: WinnerProduct[]\n  settings: WinnerSettings | null\n}\n\ninterface StatsResponse {\n  success: boolean\n  stats: WinnerStats\n  recent_activity: WinnerActivity[]\n}\n\ninterface SettingsResponse {\n  success: boolean\n  settings: WinnerSettings | null\n}\n\ninterface ToggleResponse {\n  success: boolean\n  winner: WinnerProduct\n}\n\ninterface CampaignResponse {\n  success: boolean\n  campaign: WinnerCampaign\n}\n\n// =====================================================\n// DEFAULT VALUES\n// =====================================================\n\nconst DEFAULT_THRESHOLDS: WinnerThresholds = {\n  sales_3d: 5,\n  sales_7d: 10,\n  sales_10d: 15,\n  sales_14d: 20,\n  min_buckets: 3,\n}\n\nconst DEFAULT_LIMITS: WinnerLimits = {\n  max_video_campaigns: 2,\n  max_image_campaigns: 4,\n  video_count: 2,\n  image_count: 4,\n}\n\n// =====================================================\n// HOOK\n// =====================================================\n\nexport function useWinnerScaling(shopId: string | null) {\n  const queryClient = useQueryClient()\n\n  // Get all winners for shop\n  const winnersQuery = useQuery({\n    queryKey: ['winners', shopId],\n    queryFn: () => api.get<WinnersResponse>(`/api/pod-autom/winners/${shopId}`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 2, // 2 minutes\n  })\n\n  // Get winner statistics\n  const statsQuery = useQuery({\n    queryKey: ['winners', 'stats', shopId],\n    queryFn: () => api.get<StatsResponse>(`/api/pod-autom/winners/${shopId}/stats`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 2, // 2 minutes\n  })\n\n  // Get winner scaling settings\n  const settingsQuery = useQuery({\n    queryKey: ['winners', 'settings', shopId],\n    queryFn: () => api.get<SettingsResponse>(`/api/pod-autom/winners/${shopId}/settings`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n\n  // Toggle winner active status\n  const toggleWinnerMutation = useMutation({\n    mutationFn: ({ winnerId, isActive }: { winnerId: string; isActive: boolean }) =>\n      api.post<ToggleResponse>(`/api/pod-autom/winners/${shopId}/${winnerId}/toggle`, {\n        is_active: isActive,\n      }),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['winners', shopId] })\n      queryClient.invalidateQueries({ queryKey: ['winners', 'stats', shopId] })\n    },\n  })\n\n  // Pause campaign\n  const pauseCampaignMutation = useMutation({\n    mutationFn: (campaignId: string) =>\n      api.post<CampaignResponse>(\n        `/api/pod-autom/winners/${shopId}/campaigns/${campaignId}/pause`\n      ),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['winners', shopId] })\n      queryClient.invalidateQueries({ queryKey: ['winners', 'stats', shopId] })\n    },\n  })\n\n  // Update settings\n  const updateSettingsMutation = useMutation({\n    mutationFn: (data: Partial<WinnerSettings>) =>\n      api.put<SettingsResponse>(`/api/pod-autom/winners/${shopId}/settings`, data),\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['winners', 'settings', shopId] })\n    },\n  })\n\n  // Computed values\n  const winners = winnersQuery.data?.winners ?? []\n  const stats = statsQuery.data?.stats ?? {\n    total_winners: 0,\n    active_winners: 0,\n    total_campaigns: 0,\n    active_campaigns: 0,\n    video_campaigns: 0,\n    image_campaigns: 0,\n  }\n  const recentActivity = statsQuery.data?.recent_activity ?? []\n  const settings = settingsQuery.data?.settings ?? null\n\n  // Get thresholds with defaults\n  const thresholds: WinnerThresholds = settings?.winner_thresholds ?? DEFAULT_THRESHOLDS\n  const limits: WinnerLimits = settings?.winner_limits ?? DEFAULT_LIMITS\n\n  return {\n    // Data\n    winners,\n    stats,\n    recentActivity,\n    settings,\n    thresholds,\n    limits,\n\n    // Loading states\n    isLoading: winnersQuery.isLoading || statsQuery.isLoading,\n    isLoadingSettings: settingsQuery.isLoading,\n    error: winnersQuery.error ?? statsQuery.error ?? settingsQuery.error,\n\n    // Actions\n    toggleWinner: toggleWinnerMutation.mutate,\n    isTogglingWinner: toggleWinnerMutation.isPending,\n\n    pauseCampaign: pauseCampaignMutation.mutate,\n    isPausingCampaign: pauseCampaignMutation.isPending,\n\n    updateSettings: updateSettingsMutation.mutate,\n    isUpdatingSettings: updateSettingsMutation.isPending,\n\n    // Refetch\n    refetch: () => {\n      queryClient.invalidateQueries({ queryKey: ['winners'] })\n    },\n  }\n}\n\n// Export defaults for components\nexport { DEFAULT_THRESHOLDS, DEFAULT_LIMITS }\n","import { useState } from 'react'\nimport { DashboardLayout } from '@src/components/layout'\nimport { useShops } from '@src/hooks/useShopify'\nimport {\n  useWinnerScaling,\n  type WinnerProduct,\n  type WinnerCampaign,\n} from '@src/hooks/useWinnerScaling'\nimport { useSubscription } from '@src/contexts/SubscriptionContext'\nimport { useToast } from '@src/lib/store'\nimport {\n  Loader2,\n  Trophy,\n  TrendingUp,\n  Video,\n  Image,\n  Pause,\n  Play,\n  ChevronDown,\n  ChevronUp,\n  Settings,\n  Sparkles,\n  Target,\n  Zap,\n  Lock,\n} from 'lucide-react'\nimport { Link } from 'react-router-dom'\n\n// =====================================================\n// STATS CARD COMPONENT\n// =====================================================\n\ninterface StatsCardProps {\n  title: string\n  value: number | string\n  icon: React.ReactNode\n  trend?: number\n  color?: string\n}\n\nfunction StatsCard({ title, value, icon, trend, color = 'violet' }: StatsCardProps) {\n  const colorClasses = {\n    violet: 'bg-violet-500/20 text-violet-400',\n    emerald: 'bg-emerald-500/20 text-emerald-400',\n    amber: 'bg-amber-500/20 text-amber-400',\n    red: 'bg-red-500/20 text-red-400',\n  }\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <span className=\"text-sm text-zinc-400\">{title}</span>\n        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${colorClasses[color as keyof typeof colorClasses]}`}>\n          {icon}\n        </div>\n      </div>\n      <div className=\"flex items-end justify-between\">\n        <span className=\"text-2xl font-bold text-white\">{value}</span>\n        {trend !== undefined && (\n          <span className={`text-sm ${trend >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n            {trend >= 0 ? '+' : ''}{trend}%\n          </span>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// =====================================================\n// WINNER CARD COMPONENT\n// =====================================================\n\ninterface WinnerCardProps {\n  winner: WinnerProduct\n  onToggle: (winnerId: string, isActive: boolean) => void\n  onPauseCampaign: (campaignId: string) => void\n  isToggling: boolean\n}\n\nfunction WinnerCard({ winner, onToggle, onPauseCampaign, isToggling }: WinnerCardProps) {\n  const [expanded, setExpanded] = useState(false)\n  const activeCampaigns = winner.winner_campaigns?.filter(c => c.status === 'ACTIVE') ?? []\n  const pausedCampaigns = winner.winner_campaigns?.filter(c => c.status === 'PAUSED') ?? []\n\n  return (\n    <div className={`bg-zinc-900 rounded-xl border ${winner.is_active ? 'border-zinc-800' : 'border-zinc-800/50'} overflow-hidden`}>\n      {/* Header */}\n      <div className=\"p-4\">\n        <div className=\"flex gap-4\">\n          {/* Product Image */}\n          <div className=\"w-20 h-20 rounded-lg bg-zinc-800 flex-shrink-0 overflow-hidden\">\n            {winner.shopify_image_url ? (\n              <img\n                src={winner.shopify_image_url}\n                alt={winner.product_title}\n                loading=\"lazy\"\n                decoding=\"async\"\n                className=\"w-full h-full object-cover\"\n              />\n            ) : (\n              <div className=\"w-full h-full flex items-center justify-center\">\n                <Trophy className=\"w-8 h-8 text-zinc-600\" />\n              </div>\n            )}\n          </div>\n\n          {/* Product Info */}\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-start justify-between gap-2\">\n              <div>\n                <h3 className=\"font-medium text-white truncate\">\n                  {winner.product_title}\n                </h3>\n                <p className=\"text-xs text-zinc-500 mt-0.5\">\n                  Identifiziert: {new Date(winner.identified_at).toLocaleDateString('de-DE')}\n                </p>\n              </div>\n\n              {/* Status Toggle */}\n              <button\n                onClick={() => onToggle(winner.id, !winner.is_active)}\n                disabled={isToggling}\n                className={`px-2 py-1 rounded-md text-xs font-medium transition-colors ${\n                  winner.is_active\n                    ? 'bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30'\n                    : 'bg-zinc-700 text-zinc-400 hover:bg-zinc-600'\n                }`}\n              >\n                {winner.is_active ? 'Aktiv' : 'Pausiert'}\n              </button>\n            </div>\n\n            {/* Sales Buckets */}\n            <div className=\"flex gap-2 mt-3\">\n              <SalesBucket label=\"3T\" value={winner.sales_3d} />\n              <SalesBucket label=\"7T\" value={winner.sales_7d} />\n              <SalesBucket label=\"10T\" value={winner.sales_10d} />\n              <SalesBucket label=\"14T\" value={winner.sales_14d} />\n              <div className=\"flex items-center gap-1 px-2 py-1 rounded-md bg-violet-500/20 text-violet-400 text-xs\">\n                <Target className=\"w-3 h-3\" />\n                {winner.buckets_passed}/4\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Campaign Summary */}\n        <div className=\"flex items-center justify-between mt-4 pt-4 border-t border-zinc-800\">\n          <div className=\"flex gap-4 text-sm\">\n            <span className=\"flex items-center gap-1 text-emerald-400\">\n              <Play className=\"w-3 h-3\" />\n              {activeCampaigns.length} aktiv\n            </span>\n            <span className=\"flex items-center gap-1 text-zinc-500\">\n              <Pause className=\"w-3 h-3\" />\n              {pausedCampaigns.length} pausiert\n            </span>\n          </div>\n\n          <button\n            onClick={() => setExpanded(!expanded)}\n            className=\"flex items-center gap-1 text-sm text-zinc-400 hover:text-white transition-colors\"\n          >\n            Kampagnen\n            {expanded ? <ChevronUp className=\"w-4 h-4\" /> : <ChevronDown className=\"w-4 h-4\" />}\n          </button>\n        </div>\n      </div>\n\n      {/* Expanded Campaigns */}\n      {expanded && winner.winner_campaigns && winner.winner_campaigns.length > 0 && (\n        <div className=\"border-t border-zinc-800 bg-zinc-950/50 p-4 space-y-2\">\n          {winner.winner_campaigns.map((campaign) => (\n            <CampaignRow\n              key={campaign.id}\n              campaign={campaign}\n              onPause={() => onPauseCampaign(campaign.id)}\n            />\n          ))}\n        </div>\n      )}\n\n      {/* No Campaigns Message */}\n      {expanded && (!winner.winner_campaigns || winner.winner_campaigns.length === 0) && (\n        <div className=\"border-t border-zinc-800 bg-zinc-950/50 p-4\">\n          <p className=\"text-sm text-zinc-500 text-center\">\n            Keine Kampagnen erstellt. Der naechste Job wird Kampagnen generieren.\n          </p>\n        </div>\n      )}\n    </div>\n  )\n}\n\n// =====================================================\n// SALES BUCKET COMPONENT\n// =====================================================\n\nfunction SalesBucket({ label, value }: { label: string; value: number }) {\n  return (\n    <div className=\"flex flex-col items-center px-2 py-1 rounded-md bg-zinc-800 text-xs\">\n      <span className=\"text-zinc-500\">{label}</span>\n      <span className=\"text-white font-medium\">{value}</span>\n    </div>\n  )\n}\n\n// =====================================================\n// CAMPAIGN ROW COMPONENT\n// =====================================================\n\ninterface CampaignRowProps {\n  campaign: WinnerCampaign\n  onPause: () => void\n}\n\nfunction CampaignRow({ campaign, onPause }: CampaignRowProps) {\n  const isActive = campaign.status === 'ACTIVE'\n\n  return (\n    <div className=\"flex items-center justify-between p-3 rounded-lg bg-zinc-900 border border-zinc-800\">\n      <div className=\"flex items-center gap-3\">\n        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${\n          campaign.creative_type === 'video'\n            ? 'bg-red-500/20 text-red-400'\n            : 'bg-blue-500/20 text-blue-400'\n        }`}>\n          {campaign.creative_type === 'video' ? (\n            <Video className=\"w-4 h-4\" />\n          ) : (\n            <Image className=\"w-4 h-4\" />\n          )}\n        </div>\n        <div>\n          <p className=\"text-sm text-white truncate max-w-[200px]\">\n            {campaign.campaign_name}\n          </p>\n          <p className=\"text-xs text-zinc-500\">\n            {campaign.creative_type === 'video' ? 'Video' : 'Bild'} | Link zu {campaign.link_type === 'product' ? 'Produkt' : 'Kollektion'}\n          </p>\n        </div>\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        <span className=\"text-sm text-zinc-400\">\n          {campaign.daily_budget.toFixed(2)} EUR/Tag\n        </span>\n        <span className={`px-2 py-0.5 rounded text-xs font-medium ${\n          isActive\n            ? 'bg-emerald-500/20 text-emerald-400'\n            : 'bg-zinc-700 text-zinc-400'\n        }`}>\n          {campaign.status}\n        </span>\n        {isActive && (\n          <button\n            onClick={onPause}\n            className=\"p-1.5 rounded hover:bg-zinc-800 text-zinc-400 hover:text-white transition-colors\"\n            title=\"Kampagne pausieren\"\n          >\n            <Pause className=\"w-4 h-4\" />\n          </button>\n        )}\n      </div>\n    </div>\n  )\n}\n\n// =====================================================\n// EMPTY STATE COMPONENT\n// =====================================================\n\nfunction EmptyState() {\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-12 text-center\">\n      <div className=\"w-16 h-16 bg-violet-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <Trophy className=\"w-8 h-8 text-violet-400\" />\n      </div>\n      <h3 className=\"text-xl font-semibold text-white mb-2\">\n        Noch keine Winner identifiziert\n      </h3>\n      <p className=\"text-zinc-400 mb-6 max-w-md mx-auto\">\n        Sobald Produkte die Verkaufsschwellen erreichen, werden sie hier als Winner angezeigt\n        und automatisch skaliert.\n      </p>\n      <div className=\"flex flex-col items-center gap-2 text-sm text-zinc-500\">\n        <div className=\"flex items-center gap-2\">\n          <Sparkles className=\"w-4 h-4 text-violet-400\" />\n          AI-generierte Creatives (Bilder & Videos)\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Target className=\"w-4 h-4 text-violet-400\" />\n          Automatische Kampagnen-Erstellung\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <Zap className=\"w-4 h-4 text-violet-400\" />\n          A/B Testing mit Produkt & Collection Links\n        </div>\n      </div>\n    </div>\n  )\n}\n\n// =====================================================\n// PREMIUM GATE COMPONENT\n// =====================================================\n\nfunction PremiumGate() {\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-violet-500/30 p-12 text-center\">\n      <div className=\"w-16 h-16 bg-violet-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <Lock className=\"w-8 h-8 text-violet-400\" />\n      </div>\n      <h3 className=\"text-xl font-semibold text-white mb-2\">\n        Premium Feature\n      </h3>\n      <p className=\"text-zinc-400 mb-6 max-w-md mx-auto\">\n        Winner Scaling ist nur im Premium- und VIP-Tarif verfuegbar.\n        Upgrade jetzt, um Top-Performer automatisch zu skalieren.\n      </p>\n      <Link to=\"/pricing\" className=\"btn-primary\">\n        Auf Premium upgraden\n      </Link>\n    </div>\n  )\n}\n\n// =====================================================\n// DASHBOARD WINNERS PAGE\n// =====================================================\n\nexport default function DashboardWinners() {\n  const { shops, isLoading: shopsLoading } = useShops()\n  const { canUseFeature } = useSubscription()\n  const { addToast } = useToast()\n  const currentShopId = shops[0]?.id ?? null\n\n  const {\n    winners,\n    stats,\n    isLoading,\n    toggleWinner,\n    isTogglingWinner,\n    pauseCampaign,\n  } = useWinnerScaling(currentShopId)\n\n  const canUseWinnerScaling = canUseFeature('winnerScaling')\n  const loading = shopsLoading || isLoading\n\n  const handleToggleWinner = (winnerId: string, isActive: boolean) => {\n    toggleWinner(\n      { winnerId, isActive },\n      {\n        onSuccess: () => {\n          addToast(\n            isActive ? 'Winner aktiviert' : 'Winner pausiert',\n            'success'\n          )\n        },\n        onError: () => {\n          addToast('Fehler beim Aktualisieren', 'error')\n        },\n      }\n    )\n  }\n\n  const handlePauseCampaign = (campaignId: string) => {\n    pauseCampaign(campaignId, {\n      onSuccess: () => {\n        addToast('Kampagne pausiert', 'success')\n      },\n      onError: () => {\n        addToast('Fehler beim Pausieren', 'error')\n      },\n    })\n  }\n\n  if (loading) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-64\">\n          <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        {/* Page Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\n              <Trophy className=\"w-6 h-6 text-violet-400\" />\n              Winner Scaling\n            </h1>\n            <p className=\"text-zinc-400 mt-1\">\n              Automatische Skalierung deiner Top-Performer\n            </p>\n          </div>\n          <Link\n            to=\"/settings\"\n            className=\"btn-secondary flex items-center gap-2\"\n          >\n            <Settings className=\"w-4 h-4\" />\n            Einstellungen\n          </Link>\n        </div>\n\n        {/* Premium Gate */}\n        {!canUseWinnerScaling && <PremiumGate />}\n\n        {/* Stats Grid */}\n        {canUseWinnerScaling && (\n          <>\n            <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n              <StatsCard\n                title=\"Winner Produkte\"\n                value={stats.total_winners}\n                icon={<Trophy className=\"w-4 h-4\" />}\n                color=\"violet\"\n              />\n              <StatsCard\n                title=\"Aktive Winner\"\n                value={stats.active_winners}\n                icon={<TrendingUp className=\"w-4 h-4\" />}\n                color=\"emerald\"\n              />\n              <StatsCard\n                title=\"Video Kampagnen\"\n                value={stats.video_campaigns}\n                icon={<Video className=\"w-4 h-4\" />}\n                color=\"amber\"\n              />\n              <StatsCard\n                title=\"Bild Kampagnen\"\n                value={stats.image_campaigns}\n                icon={<Image className=\"w-4 h-4\" />}\n                color=\"violet\"\n              />\n            </div>\n\n            {/* Winners List */}\n            {winners.length === 0 ? (\n              <EmptyState />\n            ) : (\n              <div className=\"space-y-4\">\n                <h2 className=\"text-lg font-semibold text-white\">\n                  Winner Produkte ({winners.length})\n                </h2>\n                <div className=\"grid gap-4\">\n                  {winners.map((winner) => (\n                    <WinnerCard\n                      key={winner.id}\n                      winner={winner}\n                      onToggle={handleToggleWinner}\n                      onPauseCampaign={handlePauseCampaign}\n                      isToggling={isTogglingWinner}\n                    />\n                  ))}\n                </div>\n              </div>\n            )}\n          </>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}\n"],"names":["DEFAULT_THRESHOLDS","DEFAULT_LIMITS","useWinnerScaling","shopId","queryClient","useQueryClient","winnersQuery","useQuery","api","statsQuery","settingsQuery","toggleWinnerMutation","useMutation","winnerId","isActive","pauseCampaignMutation","campaignId","updateSettingsMutation","data","winners","stats","recentActivity","settings","thresholds","limits","StatsCard","title","value","icon","trend","color","colorClasses","jsxs","jsx","WinnerCard","winner","onToggle","onPauseCampaign","isToggling","expanded","setExpanded","useState","activeCampaigns","c","pausedCampaigns","Trophy","SalesBucket","Target","Play","Pause","ChevronUp","ChevronDown","campaign","CampaignRow","label","onPause","Video","Image","EmptyState","Sparkles","Zap","PremiumGate","Lock","Link","DashboardWinners","shops","shopsLoading","useShops","canUseFeature","useSubscription","addToast","useToast","currentShopId","isLoading","toggleWinner","isTogglingWinner","pauseCampaign","canUseWinnerScaling","loading","handleToggleWinner","handlePauseCampaign","DashboardLayout","Loader2","Settings","Fragment","TrendingUp"],"mappings":"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"}