import{j as e}from"./vendor-query-CpRdniug.js";import{r as x,L as D,h as R}from"./vendor-react-4xEIaAEA.js";import{u as A,a as M,b as O}from"./useShopify-D96WEgLm.js";import{c as _,a as S,x as F,L as g,R as $,Q as G,G as B,J as W,X as H,S as J,n as Q,W as V,V as X,l as Z,k as Y,$ as ee,a0 as se,_ as te,U as q,q as ne,y as ie,z as ae,u as le,r as ce,ae as re,C as de,ag as oe,ah as me,T as xe,a4 as K,af as he,a9 as ue,B as pe,M as je}from"./vendor-ui-BMWb517o.js";import{a as L}from"./api-DZjOEeDy.js";import{a as T,u as U,b as be,s as Ne,d as fe}from"./index-DMzOI_GZ.js";import{u as ge}from"./useCheckout-BLIfbZHj.js";import{u as ve}from"./usePinterest-DC43FXi5.js";import"./vendor-supabase-DejIJ_qE.js";import"./vendor-charts-Cz_1NfFu.js";function we({shopId:c}){const{shops:h,deleteShop:l,isDeleting:p,testConnection:u,isTesting:m}=A(),{settings:n,updateSettings:r,isUpdating:o}=M(c),[i,d]=x.useState(!1),a=h.find(t=>t.id===c);if(!a)return e.jsx("div",{className:"p-6 text-center text-zinc-400",children:"Shop nicht gefunden"});const N=()=>{n&&r({enabled:!n.enabled})},b=(t,w)=>{r({[t]:w})},v=()=>{l(c),d(!1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-zinc-700",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-violet-500/20 rounded-xl flex items-center justify-center",children:e.jsx(_,{className:"w-6 h-6 text-violet-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:a.internal_name||a.shop_domain}),e.jsx("p",{className:"text-sm text-zinc-400",children:a.shop_domain})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a.connection_status==="connected"?"bg-emerald-500/20 text-emerald-400":a.connection_status==="error"?"bg-red-500/20 text-red-400":"bg-zinc-700 text-zinc-400"}`,children:[a.connection_status==="connected"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),"Verbunden"]}),a.connection_status==="error"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(F,{className:"w-3 h-3"}),"Fehler"]}),a.connection_status==="disconnected"&&"Getrennt"]})})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-zinc-700",children:[e.jsxs("button",{onClick:()=>u(c),disabled:m,className:"btn-secondary text-sm",children:[m?e.jsx(g,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx($,{className:"w-4 h-4 mr-1"}),"Verbindung testen"]}),e.jsxs("button",{onClick:()=>d(!0),className:"btn-secondary text-sm text-red-400 hover:text-red-300 hover:border-red-500/50",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Entfernen"]})]})]}),n&&e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-zinc-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Automatisierung"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Automatisierung aktiv"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Produkte werden automatisch erstellt und optimiert"})]}),e.jsx("button",{onClick:N,disabled:o,className:`relative w-12 h-6 rounded-full transition-colors ${n.enabled?"bg-violet-500":"bg-zinc-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${n.enabled?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Auto-Publish"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Produkte automatisch als Aktiv ver√∂ffentlichen"})]}),e.jsx("button",{onClick:()=>b("auto_publish",!n.auto_publish),disabled:o,className:`relative w-12 h-6 rounded-full transition-colors ${n.auto_publish?"bg-violet-500":"bg-zinc-600"}`,children:e.jsx("span",{className:`absolute top-1 w-4 h-4 bg-white rounded-full transition-transform ${n.auto_publish?"left-7":"left-1"}`})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Produkte pro Tag"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Maximale Anzahl neuer Produkte pro Tag"})]}),e.jsxs("select",{value:n.creation_limit,onChange:t=>b("creation_limit",parseInt(t.target.value)),className:"input w-24 text-center",children:[e.jsx("option",{value:5,children:"5"}),e.jsx("option",{value:10,children:"10"}),e.jsx("option",{value:20,children:"20"}),e.jsx("option",{value:50,children:"50"}),e.jsx("option",{value:100,children:"100"})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Bildqualit√§t"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Qualit√§t der generierten Bilder"})]}),e.jsxs("select",{value:n.gpt_image_quality,onChange:t=>b("gpt_image_quality",t.target.value),className:"input w-32",children:[e.jsx("option",{value:"LOW",children:"Niedrig"}),e.jsx("option",{value:"MEDIUM",children:"Mittel"}),e.jsx("option",{value:"HIGH",children:"Hoch"})]})]})]})]}),n&&e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-zinc-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Preise"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Standardpreis (‚Ç¨)"}),e.jsx("input",{type:"number",value:n.default_price,onChange:t=>b("default_price",parseFloat(t.target.value)),className:"input",step:"0.01",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Vergleichspreis (‚Ç¨)"}),e.jsx("input",{type:"number",value:n.default_compare_at_price||"",onChange:t=>b("default_compare_at_price",t.target.value?parseFloat(t.target.value):null),className:"input",step:"0.01",min:"0",placeholder:"Optional"})]})]})]}),i&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>d(!1)}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-zinc-900 border border-zinc-800 p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Shop entfernen?"}),e.jsx("p",{className:"text-zinc-400 mb-6",children:"Bist du sicher, dass du diesen Shop entfernen m√∂chtest? Alle Einstellungen und Daten werden gel√∂scht."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>d(!1),className:"btn-secondary flex-1",children:"Abbrechen"}),e.jsx("button",{onClick:v,disabled:p,className:"flex-1 py-2 px-4 bg-red-500 hover:bg-red-600 text-white rounded-lg transition-colors",children:p?e.jsx(g,{className:"w-5 h-5 animate-spin mx-auto"}):"Ja, entfernen"})]})]})]})]})}const ze=[{name:"Fitness & Sport",icon:"üí™"},{name:"Haustiere",icon:"üêï"},{name:"Gaming",icon:"üéÆ"},{name:"Musik",icon:"üéµ"},{name:"Reisen",icon:"‚úàÔ∏è"},{name:"Kochen",icon:"üë®‚Äçüç≥"},{name:"Fotografie",icon:"üì∑"},{name:"Garten",icon:"üå±"},{name:"Angeln",icon:"üé£"},{name:"Motorrad",icon:"üèçÔ∏è"},{name:"Yoga",icon:"üßò"},{name:"Kaffee",icon:"‚òï"},{name:"Wandern",icon:"ü•æ"},{name:"Camping",icon:"‚õ∫"},{name:"Surfen",icon:"üèÑ"},{name:"Skateboard",icon:"üõπ"}];function ye({settingsId:c}){const{niches:h,isLoading:l,createNiche:p,isCreating:u,deleteNiche:m,isDeleting:n}=O(c),[r,o]=x.useState(""),[i,d]=x.useState(""),a=t=>{!t.trim()||h.some(z=>z.niche_name.toLowerCase()===t.toLowerCase())||(p(t.trim()),o(""))},N=t=>{t.preventDefault(),a(r)},b=t=>{m(t)},v=ze.filter(t=>{const w=t.name.toLowerCase().includes(i.toLowerCase()),z=h.some(y=>y.niche_name.toLowerCase()===t.name.toLowerCase());return w&&!z});return l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(g,{className:"w-6 h-6 text-violet-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(B,{className:"w-5 h-5 text-violet-400"}),"Nischen verwalten"]}),e.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:[h.length," Nischen aktiv"]})]})}),e.jsxs("form",{onSubmit:N,className:"flex gap-2",children:[e.jsx("input",{type:"text",value:r,onChange:t=>o(t.target.value),className:"input flex-1",placeholder:"Neue Nische hinzuf√ºgen..."}),e.jsx("button",{type:"submit",disabled:!r.trim()||u,className:"btn-primary px-4",children:u?e.jsx(g,{className:"w-5 h-5 animate-spin"}):e.jsx(W,{className:"w-5 h-5"})})]}),h.length>0&&e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-4 border border-zinc-700",children:[e.jsx("p",{className:"text-sm text-zinc-400 mb-3",children:"Aktive Nischen:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(t=>e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-violet-500/20 text-violet-300 rounded-lg text-sm group",children:[t.niche_name,e.jsx("button",{onClick:()=>b(t.id),disabled:n,className:"opacity-60 hover:opacity-100 transition-opacity",children:e.jsx(H,{className:"w-3.5 h-3.5"})})]},t.id))})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-4 border border-zinc-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("p",{className:"text-sm text-zinc-400 flex items-center gap-2",children:[e.jsx(J,{className:"w-4 h-4"}),"Vorschl√§ge"]}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-zinc-500"}),e.jsx("input",{type:"text",value:i,onChange:t=>d(t.target.value),className:"input pl-9 py-1.5 text-sm w-48",placeholder:"Suchen..."})]})]}),v.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:v.map(t=>e.jsxs("button",{onClick:()=>a(t.name),disabled:u,className:"flex items-center gap-2 p-2 rounded-lg bg-zinc-700/50 hover:bg-zinc-700 text-zinc-300 hover:text-white text-sm transition-colors text-left",children:[e.jsx("span",{className:"text-base",children:t.icon}),e.jsx("span",{className:"truncate",children:t.name})]},t.name))}):e.jsx("p",{className:"text-sm text-zinc-500 text-center py-4",children:i?"Keine Vorschl√§ge gefunden":"Alle Vorschl√§ge wurden hinzugef√ºgt"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-violet-500/10 border border-violet-500/20",children:[e.jsx("p",{className:"text-sm text-violet-300",children:e.jsx("strong",{children:"Tipps f√ºr Nischen:"})}),e.jsxs("ul",{className:"mt-2 text-xs text-zinc-400 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Je spezifischer die Nische, desto besser die Ergebnisse"}),e.jsx("li",{children:"‚Ä¢ Kombiniere breite und spezifische Nischen f√ºr mehr Vielfalt"}),e.jsx("li",{children:"‚Ä¢ Teste neue Nischen mit wenigen Produkten zuerst"})]})]})]})}const C={image:`Create a modern, eye-catching print-on-demand design with clean lines and vibrant colors.
The design should be suitable for printing on t-shirts and hoodies.
Use a transparent or solid background.
Style: Modern, minimalist, trendy.
Niche: {{niche}}`,title:`Create a catchy, SEO-optimized product title for a {{product_type}} in the {{niche}} niche.
Requirements:
- Between 50-70 characters
- Include main keyword
- Sound appealing and unique
- Avoid generic phrases`,description:`Write a compelling product description for a {{product_type}} targeting {{niche}} enthusiasts.
Requirements:
- Highlight the unique design
- Mention print quality and comfort
- Include relevant keywords
- Clear call-to-action
- 100-150 words`},P={image:{title:"Bild-Prompt",description:"F√ºr die KI-Bildgenerierung"},title:{title:"Titel-Prompt",description:"F√ºr Produkttitel"},description:{title:"Beschreibungs-Prompt",description:"F√ºr Produktbeschreibungen"}};function Se({settingsId:c}){const h=T(s=>s.addToast),[l,p]=x.useState([]),[u,m]=x.useState(!0),[n,r]=x.useState(null),[o,i]=x.useState("image"),[d,a]=x.useState({}),[N,b]=x.useState(null);x.useEffect(()=>{(async()=>{try{const j=await L.get(`/api/pod-autom/prompts/${c}`);if(j.success){p(j.prompts);const f={};j.prompts.forEach(k=>{f[k.prompt_type]=k.prompt_text}),a(f)}}catch{a({image:C.image,title:C.title,description:C.description})}finally{m(!1)}})()},[c]);const v=async s=>{r(s);try{await L.put(`/api/pod-autom/prompts/${c}/${s}`,{prompt_text:d[s]}),h({type:"success",title:"Prompt gespeichert",description:`${P[s].title} wurde aktualisiert.`})}catch{h({type:"error",title:"Fehler",description:"Prompt konnte nicht gespeichert werden."})}finally{r(null)}},t=s=>{a(j=>({...j,[s]:C[s]}))},w=async s=>{await navigator.clipboard.writeText(d[s]||""),b(s),setTimeout(()=>b(null),2e3)},z=s=>{i(o===s?null:s)},y=s=>{const j=l.find(f=>f.prompt_type===s);return j?j.prompt_text!==d[s]:!0};return u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(g,{className:"w-6 h-6 text-violet-500 animate-spin"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[e.jsx(V,{className:"w-5 h-5 text-violet-400"}),"KI-Prompts bearbeiten"]}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Passe die Prompts an, um die KI-generierten Inhalte zu steuern."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-zinc-800/50 border border-zinc-700",children:[e.jsx("p",{className:"text-sm text-zinc-300 mb-2",children:"Verf√ºgbare Variablen:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["{{niche}}","{{product_type}}","{{style}}","{{color}}"].map(s=>e.jsx("code",{className:"px-2 py-1 bg-zinc-700 text-violet-300 rounded text-xs font-mono",children:s},s))})]}),e.jsx("div",{className:"space-y-3",children:["image","title","description"].map(s=>e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl border border-zinc-700 overflow-hidden",children:[e.jsxs("button",{onClick:()=>z(s),className:"w-full flex items-center justify-between p-4 text-left hover:bg-zinc-800/80 transition-colors",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-white font-medium flex items-center gap-2",children:[P[s].title,y(s)&&e.jsx("span",{className:"w-2 h-2 bg-amber-500 rounded-full"})]}),e.jsx("p",{className:"text-sm text-zinc-400",children:P[s].description})]}),o===s?e.jsx(X,{className:"w-5 h-5 text-zinc-400"}):e.jsx(Z,{className:"w-5 h-5 text-zinc-400"})]}),o===s&&e.jsxs("div",{className:"px-4 pb-4 space-y-3",children:[e.jsx("textarea",{value:d[s]||"",onChange:j=>a(f=>({...f,[s]:j.target.value})),className:"input min-h-[150px] resize-none font-mono text-sm",placeholder:`${P[s].title} eingeben...`}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>w(s),className:"btn-secondary text-sm",children:[N===s?e.jsx(Y,{className:"w-4 h-4 mr-1 text-emerald-400"}):e.jsx(ee,{className:"w-4 h-4 mr-1"}),N===s?"Kopiert!":"Kopieren"]}),e.jsxs("button",{onClick:()=>t(s),className:"btn-secondary text-sm",children:[e.jsx(se,{className:"w-4 h-4 mr-1"}),"Standard"]})]}),e.jsxs("button",{onClick:()=>v(s),disabled:n===s||!y(s),className:"btn-primary text-sm",children:[n===s?e.jsx(g,{className:"w-4 h-4 animate-spin mr-1"}):e.jsx(te,{className:"w-4 h-4 mr-1"}),"Speichern"]})]})]})]},s))}),e.jsxs("div",{className:"p-4 rounded-lg bg-violet-500/10 border border-violet-500/20",children:[e.jsx("p",{className:"text-sm text-violet-300",children:e.jsx("strong",{children:"Tipps f√ºr bessere Prompts:"})}),e.jsxs("ul",{className:"mt-2 text-xs text-zinc-400 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Sei spezifisch bei Stil, Farben und Format"}),e.jsx("li",{children:"‚Ä¢ Nutze Variablen f√ºr dynamische Inhalte"}),e.jsx("li",{children:"‚Ä¢ Teste √Ñnderungen mit wenigen Produkten zuerst"})]})]})]})}function ke(){const{user:c,signOut:h}=U(),{subscription:l,loading:p}=be(),{openCustomerPortal:u,isLoading:m,error:n}=ge(),r=T(f=>f.addToast),[o,i]=x.useState(!1),[d,a]=x.useState(""),[N,b]=x.useState(""),[v,t]=x.useState(!1),w=async f=>{if(f.preventDefault(),d!==N){r({type:"error",title:"Fehler",description:"Die Passw√∂rter stimmen nicht √ºberein."});return}if(d.length<8){r({type:"error",title:"Fehler",description:"Das Passwort muss mindestens 8 Zeichen lang sein."});return}t(!0);try{const{error:k}=await Ne.auth.updateUser({password:d});if(k)throw k;r({type:"success",title:"Passwort ge√§ndert",description:"Dein Passwort wurde erfolgreich aktualisiert."}),i(!1),a(""),b("")}catch{r({type:"error",title:"Fehler",description:"Passwort konnte nicht ge√§ndert werden."})}finally{t(!1)}},z=async()=>{await h()},y={basis:{name:"Basis",color:"text-zinc-400",bg:"bg-zinc-700"},premium:{name:"Premium",color:"text-violet-400",bg:"bg-violet-500/20"},vip:{name:"VIP",color:"text-amber-400",bg:"bg-amber-500/20"}},s=l?.tier||"basis",j=y[s]||y.basis;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-zinc-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(q,{className:"w-5 h-5 text-violet-400"}),"Profil"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"E-Mail Adresse"}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"input flex-1 flex items-center gap-2 bg-zinc-800",children:[e.jsx(ne,{className:"w-4 h-4 text-zinc-500"}),e.jsx("span",{className:"text-zinc-300",children:c?.email})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Benutzer-ID"}),e.jsx("div",{className:"input bg-zinc-800 text-zinc-500 text-sm font-mono",children:c?.id})]})]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-zinc-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(ie,{className:"w-5 h-5 text-violet-400"}),"Abonnement"]}),p?e.jsx("div",{className:"flex items-center justify-center py-4",children:e.jsx(g,{className:"w-5 h-5 text-violet-500 animate-spin"})}):l?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Aktueller Plan"}),e.jsxs("p",{className:"text-sm text-zinc-400",children:["N√§chste Abrechnung:"," ",l.current_period_end?new Date(l.current_period_end).toLocaleDateString("de-DE"):"N/A"]})]}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${j.bg} ${j.color}`,children:j.name})]}),n&&e.jsx("div",{className:"p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-4 h-4 text-red-400"}),e.jsx("p",{className:"text-red-300 text-sm",children:n})]})}),l.stripe_customer_id?e.jsxs("button",{onClick:u,disabled:m,className:"btn-secondary w-full",children:[m?e.jsx(g,{className:"w-4 h-4 animate-spin mr-2"}):e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Abonnement verwalten"]}):e.jsx("p",{className:"text-sm text-zinc-500 text-center",children:"Abonnement-Verwaltung noch nicht verfuegbar"}),s!=="vip"&&e.jsxs(D,{to:`/checkout?tier=${s==="basis"?"premium":"vip"}`,className:"btn-primary w-full flex items-center justify-center gap-2",children:[e.jsx(le,{className:"w-4 h-4"}),"Auf ",s==="basis"?"Premium":"VIP"," upgraden"]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-zinc-400 mb-4",children:"Kein aktives Abonnement"}),e.jsx(D,{to:"/checkout",className:"btn-primary inline-block",children:"Plan ausw√§hlen"})]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-zinc-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx(ce,{className:"w-5 h-5 text-violet-400"}),"Sicherheit"]}),o?e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"newPassword",className:"label",children:"Neues Passwort"}),e.jsx("input",{id:"newPassword",type:"password",value:d,onChange:f=>a(f.target.value),className:"input",placeholder:"Mindestens 8 Zeichen",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"label",children:"Passwort best√§tigen"}),e.jsx("input",{id:"confirmPassword",type:"password",value:N,onChange:f=>b(f.target.value),className:"input",placeholder:"Passwort wiederholen",required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),a(""),b("")},className:"btn-secondary",children:"Abbrechen"}),e.jsxs("button",{type:"submit",disabled:v,className:"btn-primary",children:[v?e.jsx(g,{className:"w-4 h-4 animate-spin mr-1"}):null,"Passwort √§ndern"]})]})]}):e.jsx("button",{onClick:()=>i(!0),className:"btn-secondary",children:"Passwort √§ndern"})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-xl p-6 border border-red-500/30",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Gefahrenzone"}),e.jsxs("button",{onClick:z,className:"btn-secondary text-red-400 hover:text-red-300 hover:border-red-500/50",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Abmelden"]})]})]})}function E({className:c="w-6 h-6"}){return e.jsx("svg",{className:c,viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 0C5.373 0 0 5.372 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738a.36.36 0 01.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.632-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12 0-6.628-5.373-12-12-12z"})})}function Ce(){const[c,h]=R(),{addToast:l}=fe(),[p,u]=x.useState(!1),{isConnected:m,platform:n,isLoading:r,adAccounts:o,adAccountsLoading:i,connect:d,disconnect:a,isDisconnecting:N,selectAdAccount:b,isSelectingAdAccount:v,refetchAdAccounts:t,refetch:w}=ve();x.useEffect(()=>{const s=c.get("pinterest"),j=c.get("pinterest_error");s==="connected"&&(l("Pinterest erfolgreich verbunden!","success"),h({}),w()),j&&(l(`Pinterest Fehler: ${j}`,"error"),h({}))},[c,h,l,w]);const z=()=>{confirm("Moechtest du Pinterest wirklich trennen?")&&a()},y=s=>{b({ad_account_id:s.id,ad_account_name:s.name}),u(!1),l(`Ad Account "${s.name}" ausgewaehlt`,"success")};return r?e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"w-6 h-6 text-violet-400 animate-spin"}),e.jsx("span",{className:"text-zinc-400",children:"Lade Pinterest Status..."})]})}):e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-zinc-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${m?"bg-red-500/20 text-red-400":"bg-zinc-800 text-zinc-400"}`,children:e.jsx(E,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Pinterest"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"Veroeffentliche Pins und schalte Ads"})]})]}),m?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-500/10 border border-emerald-500/30 rounded-full",children:[e.jsx(S,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm text-emerald-400",children:"Verbunden"})]}):e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-zinc-800 border border-zinc-700 rounded-full",children:[e.jsx(de,{className:"w-4 h-4 text-zinc-500"}),e.jsx("span",{className:"text-sm text-zinc-400",children:"Nicht verbunden"})]})]})}),e.jsx("div",{className:"p-6",children:m&&n?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-4 bg-zinc-800/50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-zinc-400 mb-1",children:"Verbundenes Konto"}),e.jsxs("p",{className:"text-white font-medium",children:["@",n.platform_username||"Unbekannt"]})]}),e.jsxs("button",{onClick:z,disabled:N,className:"flex items-center gap-2 px-3 py-1.5 text-sm text-red-400 hover:bg-red-500/10 rounded-lg transition-colors",children:[N?e.jsx(g,{className:"w-4 h-4 animate-spin"}):e.jsx(oe,{className:"w-4 h-4"}),"Trennen"]})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Ad Account"}),e.jsxs("button",{onClick:()=>{t(),u(!0)},className:"text-sm text-violet-400 hover:text-violet-300 flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),"Aktualisieren"]})]}),n.ad_account_id?e.jsxs("div",{className:"p-4 bg-zinc-800/50 rounded-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(me,{className:"w-5 h-5 text-zinc-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:n.ad_account_name||n.ad_account_id}),e.jsxs("p",{className:"text-xs text-zinc-500",children:["ID: ",n.ad_account_id]})]})]}),e.jsx("button",{onClick:()=>u(!0),className:"text-sm text-violet-400 hover:text-violet-300",children:"Aendern"})]}):e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(xe,{className:"w-5 h-5 text-amber-400 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-amber-400 font-medium",children:"Kein Ad Account ausgewaehlt"}),e.jsx("p",{className:"text-sm text-amber-400/70 mt-1",children:"Waehle einen Ad Account, um Pinterest Ads zu schalten."}),e.jsx("button",{onClick:()=>u(!0),className:"mt-3 btn-primary text-sm py-1.5",children:"Ad Account waehlen"})]})]})})]}),p&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70",onClick:()=>u(!1)}),e.jsxs("div",{className:"relative w-full max-w-md bg-zinc-900 border border-zinc-800 rounded-xl shadow-xl",children:[e.jsx("div",{className:"p-4 border-b border-zinc-800",children:e.jsx("h3",{className:"text-lg font-medium text-white",children:"Ad Account waehlen"})}),e.jsx("div",{className:"p-4 max-h-80 overflow-y-auto",children:i?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(g,{className:"w-6 h-6 text-violet-400 animate-spin"})}):o.length>0?e.jsx("div",{className:"space-y-2",children:o.map(s=>e.jsx("button",{onClick:()=>y(s),disabled:v,className:`w-full p-4 rounded-lg border text-left transition-colors ${n.ad_account_id===s.id?"bg-violet-500/10 border-violet-500/50":"bg-zinc-800/50 border-zinc-700 hover:border-zinc-600"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:s.name}),e.jsxs("p",{className:"text-xs text-zinc-500",children:[s.country," - ",s.currency]})]}),n.ad_account_id===s.id&&e.jsx(S,{className:"w-5 h-5 text-violet-400"})]})},s.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-zinc-400",children:"Keine Ad Accounts gefunden"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:"Erstelle einen Ad Account in Pinterest Business"})]})}),e.jsx("div",{className:"p-4 border-t border-zinc-800",children:e.jsx("button",{onClick:()=>u(!1),className:"w-full btn-secondary",children:"Abbrechen"})})]})]}),e.jsxs("div",{className:"p-4 bg-zinc-800/30 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"Was du mit Pinterest machen kannst:"}),e.jsxs("ul",{className:"space-y-2 text-sm text-zinc-400",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-emerald-400"}),"Produkte automatisch als Pins veroeffentlichen"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-emerald-400"}),"Shopping Ads fuer deine Produkte schalten"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-emerald-400"}),"Performance Daten analysieren"]})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(E,{className:"w-16 h-16 text-zinc-700 mx-auto mb-4"}),e.jsx("h4",{className:"text-xl font-medium text-white mb-2",children:"Pinterest verbinden"}),e.jsx("p",{className:"text-zinc-400 mb-6 max-w-md mx-auto",children:"Verbinde dein Pinterest Business Konto, um Produkte automatisch als Pins zu veroeffentlichen und Ads zu schalten."}),e.jsxs("button",{onClick:d,className:"btn-primary",children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),"Mit Pinterest verbinden"]})]})})]})}function I({onConnected:c,className:h=""}){const{user:l}=U(),{startOAuthFlow:p}=A(),[u,m]=x.useState(!1),[n,r]=x.useState(""),[o,i]=x.useState("oauth"),d=()=>{!n.trim()||!l?.id||p(n,l.id)};return e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>m(!0),className:`btn-primary flex items-center gap-2 ${h}`,children:[e.jsx(_,{className:"w-5 h-5"}),"Shop verbinden"]}),u&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:()=>m(!1)}),e.jsxs("div",{className:"relative w-full max-w-md rounded-2xl bg-zinc-900 border border-zinc-800 p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Shopify Store verbinden"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Verbinde deinen Shopify Store um loszulegen."})]}),e.jsxs("div",{className:"flex gap-2 mb-6",children:[e.jsx("button",{onClick:()=>i("oauth"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${o==="oauth"?"bg-violet-500 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"}),"OAuth (Empfohlen)"]})}),e.jsx("button",{onClick:()=>i("manual"),className:`flex-1 py-2 px-4 rounded-lg text-sm font-medium transition-colors ${o==="manual"?"bg-violet-500 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"}`,children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(he,{className:"w-4 h-4"}),"Access Token"]})})]}),o==="oauth"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"shopDomain",className:"label",children:"Shop Domain"}),e.jsx("input",{id:"shopDomain",type:"text",value:n,onChange:a=>r(a.target.value),className:"input",placeholder:"dein-shop.myshopify.com"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Gib deine Shopify Domain ein (z.B. dein-shop oder dein-shop.myshopify.com)"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-violet-500/10 border border-violet-500/20",children:[e.jsx("p",{className:"text-sm text-violet-300",children:"Du wirst zu Shopify weitergeleitet, um die Verbindung zu autorisieren. Dabei werden folgende Berechtigungen angefragt:"}),e.jsxs("ul",{className:"mt-2 text-xs text-zinc-400 space-y-1",children:[e.jsx("li",{children:"‚Ä¢ Produkte lesen und erstellen"}),e.jsx("li",{children:"‚Ä¢ Bestellungen lesen"}),e.jsx("li",{children:"‚Ä¢ Inventar lesen"})]})]}),e.jsx("button",{onClick:d,disabled:!n.trim(),className:"btn-primary w-full py-3",children:"Mit Shopify verbinden"})]}),o==="manual"&&e.jsx(Pe,{onSuccess:()=>{m(!1),c?.()}}),e.jsx("button",{onClick:()=>m(!1),className:"absolute top-4 right-4 text-zinc-400 hover:text-white",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]})]})}function Pe({onSuccess:c}){const{createShop:h,isCreating:l}=A(),[p,u]=x.useState(""),[m,n]=x.useState(""),[r,o]=x.useState(""),i=p.trim()&&m.trim()&&!l,d=a=>{if(a.preventDefault(),!i)return;const N={shop_domain:p,access_token:m};r&&(N.internal_name=r),h(N,{onSuccess:()=>{c?.()}})};return e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"manualShopDomain",className:"label",children:"Shop Domain"}),e.jsx("input",{id:"manualShopDomain",type:"text",value:p,onChange:a=>u(a.target.value),className:"input",placeholder:"dein-shop.myshopify.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"accessToken",className:"label",children:"Admin API Access Token"}),e.jsx("input",{id:"accessToken",type:"password",value:m,onChange:a=>n(a.target.value),className:"input",placeholder:"shpat_...",required:!0}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Erstelle einen Custom App Token in deinem Shopify Admin unter Settings > Apps and sales channels > Develop apps"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"internalName",className:"label",children:"Interner Name (optional)"}),e.jsx("input",{id:"internalName",type:"text",value:r,onChange:a=>o(a.target.value),className:"input",placeholder:"Mein Shop"})]}),e.jsx("button",{type:"submit",disabled:!i,className:"btn-primary w-full py-3",children:l?e.jsx(g,{className:"w-5 h-5 animate-spin mx-auto"}):"Shop verbinden"})]})}const Ae=[{id:"shop",label:"Shop",icon:e.jsx(_,{className:"w-5 h-5"}),requiresShop:!0},{id:"niches",label:"Nischen",icon:e.jsx(B,{className:"w-5 h-5"}),requiresShop:!0},{id:"prompts",label:"KI-Prompts",icon:e.jsx(V,{className:"w-5 h-5"}),requiresShop:!0},{id:"pinterest",label:"Pinterest",icon:e.jsx(je,{className:"w-5 h-5"}),requiresShop:!1},{id:"account",label:"Konto",icon:e.jsx(q,{className:"w-5 h-5"}),requiresShop:!1}];function qe(){const{shops:c,isLoading:h}=A(),[l,p]=x.useState("shop"),[u,m]=x.useState(null),n=u||c[0]?.id||null,{settings:r}=M(n),o=c.length>0;return h?e.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:e.jsx(g,{className:"w-8 h-8 text-violet-500 animate-spin"})}):e.jsxs("div",{className:"min-h-screen bg-black",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-violet-500/5 via-transparent to-violet-500/5"}),e.jsxs("div",{className:"relative max-w-6xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(D,{to:"/dashboard",className:"p-2 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-zinc-400 hover:text-white transition-colors",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[e.jsx(pe,{className:"w-6 h-6 text-violet-400"}),"Einstellungen"]}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Verwalte deinen Shop, Nischen und KI-Einstellungen"})]})]}),c.length>1&&e.jsx("select",{value:n||"",onChange:i=>m(i.target.value),className:"input w-64",children:c.map(i=>e.jsx("option",{value:i.id,children:i.internal_name||i.shop_domain},i.id))})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"w-64 flex-shrink-0",children:[e.jsx("nav",{className:"space-y-1",children:Ae.map(i=>{const d=i.requiresShop&&!o;return e.jsxs("button",{onClick:()=>!d&&p(i.id),disabled:d,className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg text-left transition-colors ${l===i.id?"bg-violet-500/20 text-violet-300":d?"text-zinc-600 cursor-not-allowed":"text-zinc-400 hover:bg-zinc-800 hover:text-white"}`,children:[i.icon,e.jsx("span",{className:"font-medium",children:i.label})]},i.id)})}),o&&e.jsx("div",{className:"mt-6 pt-6 border-t border-zinc-800",children:e.jsx(I,{className:"w-full text-sm"})})]}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("div",{className:"bg-zinc-900 rounded-2xl border border-zinc-800 p-6",children:!o&&l!=="account"?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 bg-zinc-800 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_,{className:"w-8 h-8 text-zinc-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Kein Shop verbunden"}),e.jsx("p",{className:"text-zinc-400 mb-6 max-w-md mx-auto",children:"Verbinde zuerst deinen Shopify Store, um die Automatisierung einzurichten."}),e.jsx(I,{})]}):e.jsxs(e.Fragment,{children:[l==="shop"&&n&&e.jsx(we,{shopId:n}),l==="niches"&&r?.id&&e.jsx(ye,{settingsId:r.id}),l==="prompts"&&r?.id&&e.jsx(Se,{settingsId:r.id}),l==="pinterest"&&e.jsx(Ce,{}),l==="account"&&e.jsx(ke,{})]})})})]})]})]})}export{qe as default};
//# sourceMappingURL=Settings-Jzcq9JvQ.js.map
