import{j as e}from"./vendor-query-CpRdniug.js";import{f as C,r as t,L as D}from"./vendor-react-4xEIaAEA.js";import{u as E,a as T,s as V}from"./index-CupJPaFk.js";import{v as B}from"./validation-Y5BQwK-r.js";import{L as m,r as b,a as F,E as w,s as g}from"./vendor-ui-BMWb517o.js";import"./vendor-supabase-DejIJ_qE.js";import"./vendor-charts-Cz_1NfFu.js";function O(){const p=C(),{updatePassword:j}=E(),l=T(s=>s.addToast),[a,N]=t.useState(""),[i,v]=t.useState(""),[o,y]=t.useState(!1),[c,k]=t.useState(!1),[u,x]=t.useState(!1),[P,z]=t.useState(!1),[h,S]=t.useState(null),r=B(a),d=a===i,f=r.isValid&&d&&i.length>0&&!u;t.useEffect(()=>{(async()=>{const{data:{session:n}}=await V.auth.getSession();S(!!n),n||l({type:"error",title:"Ungueltiger Link",description:"Der Link ist abgelaufen oder ungueltig. Bitte fordere einen neuen an."})})()},[l]);const L=async s=>{if(s.preventDefault(),!f)return;x(!0);const n=await j(a);n.success?(z(!0),l({type:"success",title:"Passwort aktualisiert",description:"Dein Passwort wurde erfolgreich geaendert."}),setTimeout(()=>{p("/dashboard",{replace:!0})},2e3)):l({type:"error",title:"Fehler",description:n.message||"Passwort konnte nicht aktualisiert werden."}),x(!1)};return h===null?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-black",children:e.jsx(m,{className:"h-8 w-8 animate-spin text-violet-500"})}):h?P?e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-black p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border border-zinc-800 bg-zinc-900 p-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-emerald-500/10",children:e.jsx(F,{className:"h-8 w-8 text-emerald-500"})}),e.jsx("h1",{className:"mb-2 text-2xl font-bold text-white",children:"Passwort geaendert!"}),e.jsx("p",{className:"mb-6 text-zinc-400",children:"Dein Passwort wurde erfolgreich aktualisiert. Du wirst in Kuerze weitergeleitet..."}),e.jsx(m,{className:"mx-auto h-6 w-6 animate-spin text-violet-500"})]})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-black p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"mb-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-violet-500/10",children:e.jsx(b,{className:"h-8 w-8 text-violet-500"})}),e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Neues Passwort setzen"}),e.jsx("p",{className:"mt-2 text-zinc-400",children:"Waehle ein sicheres Passwort fuer dein Konto."})]}),e.jsxs("form",{onSubmit:L,className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"password",className:"mb-2 block text-sm font-medium text-zinc-300",children:"Neues Passwort"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"password",type:o?"text":"password",value:a,onChange:s=>N(s.target.value),className:"w-full rounded-lg border border-zinc-700 bg-zinc-800 px-4 py-3 pr-12 text-white placeholder-zinc-500 focus:border-violet-500 focus:outline-none focus:ring-1 focus:ring-violet-500",placeholder:"Mindestens 8 Zeichen",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!o),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-white",children:o?e.jsx(w,{className:"h-5 w-5"}):e.jsx(g,{className:"h-5 w-5"})})]}),a.length>0&&e.jsxs("div",{className:"mt-2 space-y-1",children:[e.jsx("div",{className:"flex gap-1",children:[1,2,3,4].map(s=>e.jsx("div",{className:`h-1 flex-1 rounded-full ${r.strength>=s?r.strength===1?"bg-red-500":r.strength===2?"bg-amber-500":(r.strength===3,"bg-emerald-500"):"bg-zinc-700"}`},s))}),e.jsx("p",{className:"text-xs text-zinc-400",children:r.feedback})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"mb-2 block text-sm font-medium text-zinc-300",children:"Passwort bestaetigen"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{id:"confirmPassword",type:c?"text":"password",value:i,onChange:s=>v(s.target.value),className:`w-full rounded-lg border bg-zinc-800 px-4 py-3 pr-12 text-white placeholder-zinc-500 focus:outline-none focus:ring-1 ${i.length>0&&!d?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-zinc-700 focus:border-violet-500 focus:ring-violet-500"}`,placeholder:"Passwort wiederholen",required:!0}),e.jsx("button",{type:"button",onClick:()=>k(!c),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 hover:text-white",children:c?e.jsx(w,{className:"h-5 w-5"}):e.jsx(g,{className:"h-5 w-5"})})]}),i.length>0&&!d&&e.jsx("p",{className:"mt-1 text-xs text-red-500",children:"Passwoerter stimmen nicht ueberein"})]}),e.jsx("button",{type:"submit",disabled:!f,className:"w-full rounded-lg bg-violet-600 py-3 font-medium text-white transition-colors hover:bg-violet-700 disabled:cursor-not-allowed disabled:opacity-50",children:u?e.jsx(m,{className:"mx-auto h-5 w-5 animate-spin"}):"Passwort speichern"})]})]})}):e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-black p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border border-zinc-800 bg-zinc-900 p-8 text-center",children:[e.jsx("div",{className:"mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-red-500/10",children:e.jsx(b,{className:"h-8 w-8 text-red-500"})}),e.jsx("h1",{className:"mb-2 text-2xl font-bold text-white",children:"Link ungueltig"}),e.jsx("p",{className:"mb-6 text-zinc-400",children:"Der Passwort-Reset-Link ist abgelaufen oder ungueltig. Bitte fordere einen neuen Link an."}),e.jsx(D,{to:"/forgot-password",className:"inline-block rounded-lg bg-violet-600 px-6 py-3 font-medium text-white transition-colors hover:bg-violet-700",children:"Neuen Link anfordern"})]})})}export{O as default};
//# sourceMappingURL=ResetPassword-CDvmFGRv.js.map
