{"version":3,"file":"DashboardAnalytics-QmM7djMi.js","sources":["../../src/hooks/useAnalytics.ts","../../src/pages/DashboardAnalytics.tsx"],"sourcesContent":["import { useQuery } from '@tanstack/react-query'\nimport { api } from '@src/lib/api'\n\n// =====================================================\n// TYPES\n// =====================================================\n\nexport type AnalyticsPeriod = '7d' | '30d' | '90d'\n\nexport interface AnalyticsOverview {\n  total_products: number\n  total_views: number\n  total_sales: number\n  total_revenue: number\n  conversion_rate: number\n  winner_rate: number\n}\n\nexport interface FunnelData {\n  created: number\n  start_phase: number\n  post_phase: number\n  winners: number\n  losers: number\n  archived: number\n}\n\nexport interface CampaignTotals {\n  total_spend: number\n  total_impressions: number\n  total_clicks: number\n  total_conversions: number\n  campaign_revenue: number\n}\n\nexport interface NichePerformance {\n  id: string\n  name: string\n  products: number\n  sales: number\n  revenue: number\n  is_active: boolean\n}\n\nexport interface OverviewResponse {\n  success: boolean\n  period: string\n  overview: AnalyticsOverview\n  funnel: FunnelData\n  campaigns: CampaignTotals\n  roas: number\n  niche_performance: NichePerformance[]\n}\n\nexport interface TimeSeriesDataPoint {\n  date: string\n  products_created: number\n  products_published: number\n  sales: number\n  errors: number\n}\n\nexport interface TimeSeriesResponse {\n  success: boolean\n  period: string\n  data: TimeSeriesDataPoint[]\n}\n\nexport interface TopProduct {\n  id: string\n  title: string\n  shopify_product_id: string | null\n  generated_image_url: string | null\n  phase: string\n  total_views: number\n  total_sales: number\n  total_revenue: number\n  created_at: string\n}\n\nexport interface TopProductsResponse {\n  success: boolean\n  products: TopProduct[]\n  sort_by: string\n}\n\nexport interface NicheBreakdown {\n  id: string\n  name: string\n  slug: string\n  is_active: boolean\n  total_products: number\n  total_sales: number\n  total_revenue: number\n  phase_breakdown: Record<string, number>\n  winner_count: number\n  loser_count: number\n}\n\nexport interface NicheBreakdownResponse {\n  success: boolean\n  niches: NicheBreakdown[]\n}\n\n// =====================================================\n// HOOK\n// =====================================================\n\nexport function useAnalytics(shopId: string | null, period: AnalyticsPeriod = '30d') {\n  // Get overview data\n  const overviewQuery = useQuery({\n    queryKey: ['analytics', 'overview', shopId, period],\n    queryFn: () =>\n      api.get<OverviewResponse>(`/api/pod-autom/analytics/${shopId}/overview?period=${period}`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n\n  // Get time series data\n  const timeSeriesQuery = useQuery({\n    queryKey: ['analytics', 'timeseries', shopId, period],\n    queryFn: () =>\n      api.get<TimeSeriesResponse>(`/api/pod-autom/analytics/${shopId}/timeseries?period=${period}`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n\n  // Get top products\n  const topProductsQuery = useQuery({\n    queryKey: ['analytics', 'top-products', shopId],\n    queryFn: () =>\n      api.get<TopProductsResponse>(`/api/pod-autom/analytics/${shopId}/top-products?limit=10`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n\n  // Get niche breakdown\n  const nicheBreakdownQuery = useQuery({\n    queryKey: ['analytics', 'niche-breakdown', shopId],\n    queryFn: () =>\n      api.get<NicheBreakdownResponse>(`/api/pod-autom/analytics/${shopId}/niche-breakdown`),\n    enabled: !!shopId,\n    staleTime: 1000 * 60 * 5, // 5 minutes\n  })\n\n  // Default values\n  const defaultOverview: AnalyticsOverview = {\n    total_products: 0,\n    total_views: 0,\n    total_sales: 0,\n    total_revenue: 0,\n    conversion_rate: 0,\n    winner_rate: 0,\n  }\n\n  const defaultFunnel: FunnelData = {\n    created: 0,\n    start_phase: 0,\n    post_phase: 0,\n    winners: 0,\n    losers: 0,\n    archived: 0,\n  }\n\n  const defaultCampaigns: CampaignTotals = {\n    total_spend: 0,\n    total_impressions: 0,\n    total_clicks: 0,\n    total_conversions: 0,\n    campaign_revenue: 0,\n  }\n\n  return {\n    // Overview data\n    overview: overviewQuery.data?.overview ?? defaultOverview,\n    funnel: overviewQuery.data?.funnel ?? defaultFunnel,\n    campaigns: overviewQuery.data?.campaigns ?? defaultCampaigns,\n    roas: overviewQuery.data?.roas ?? 0,\n    nichePerformance: overviewQuery.data?.niche_performance ?? [],\n\n    // Time series data\n    timeSeriesData: timeSeriesQuery.data?.data ?? [],\n\n    // Top products\n    topProducts: topProductsQuery.data?.products ?? [],\n\n    // Niche breakdown\n    nicheBreakdown: nicheBreakdownQuery.data?.niches ?? [],\n\n    // Loading states\n    isLoading:\n      overviewQuery.isLoading ||\n      timeSeriesQuery.isLoading ||\n      topProductsQuery.isLoading ||\n      nicheBreakdownQuery.isLoading,\n    isLoadingOverview: overviewQuery.isLoading,\n    isLoadingTimeSeries: timeSeriesQuery.isLoading,\n    isLoadingTopProducts: topProductsQuery.isLoading,\n    isLoadingNiches: nicheBreakdownQuery.isLoading,\n\n    // Errors\n    error:\n      overviewQuery.error ??\n      timeSeriesQuery.error ??\n      topProductsQuery.error ??\n      nicheBreakdownQuery.error,\n\n    // Refetch functions\n    refetchOverview: overviewQuery.refetch,\n    refetchTimeSeries: timeSeriesQuery.refetch,\n    refetchTopProducts: topProductsQuery.refetch,\n    refetchNiches: nicheBreakdownQuery.refetch,\n    refetchAll: () => {\n      overviewQuery.refetch()\n      timeSeriesQuery.refetch()\n      topProductsQuery.refetch()\n      nicheBreakdownQuery.refetch()\n    },\n  }\n}\n","import { useState, memo } from 'react'\nimport { DashboardLayout } from '@src/components/layout'\nimport { useShops } from '@src/hooks/useShopify'\nimport {\n  useAnalytics,\n  type AnalyticsPeriod,\n  type FunnelData,\n  type TopProduct,\n  type NicheBreakdown,\n} from '@src/hooks/useAnalytics'\nimport { useSubscription } from '@src/contexts/SubscriptionContext'\nimport {\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  PieChart,\n  Pie,\n  Cell,\n} from 'recharts'\nimport {\n  Loader2,\n  BarChart3,\n  TrendingUp,\n  TrendingDown,\n  DollarSign,\n  Eye,\n  ShoppingCart,\n  Trophy,\n  Target,\n  RefreshCw,\n  Lock,\n  Package,\n  ArrowRight,\n} from 'lucide-react'\nimport { Link } from 'react-router-dom'\n\n// =====================================================\n// PERIOD SELECTOR\n// =====================================================\n\ninterface PeriodSelectorProps {\n  value: AnalyticsPeriod\n  onChange: (period: AnalyticsPeriod) => void\n}\n\nconst PeriodSelector = memo(function PeriodSelector({ value, onChange }: PeriodSelectorProps) {\n  const periods: { value: AnalyticsPeriod; label: string }[] = [\n    { value: '7d', label: '7 Tage' },\n    { value: '30d', label: '30 Tage' },\n    { value: '90d', label: '90 Tage' },\n  ]\n\n  return (\n    <div className=\"flex bg-zinc-800 rounded-lg p-1\">\n      {periods.map((period) => (\n        <button\n          key={period.value}\n          onClick={() => onChange(period.value)}\n          className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${\n            value === period.value\n              ? 'bg-violet-500 text-white'\n              : 'text-zinc-400 hover:text-white'\n          }`}\n        >\n          {period.label}\n        </button>\n      ))}\n    </div>\n  )\n})\n\n// =====================================================\n// STAT CARD\n// =====================================================\n\ninterface StatCardProps {\n  title: string\n  value: string | number\n  icon: React.ReactNode\n  change?: number\n  color?: string\n}\n\nconst StatCard = memo(function StatCard({ title, value, icon, change, color = 'violet' }: StatCardProps) {\n  const colorClasses: Record<string, string> = {\n    violet: 'bg-violet-500/20 text-violet-400',\n    emerald: 'bg-emerald-500/20 text-emerald-400',\n    amber: 'bg-amber-500/20 text-amber-400',\n    red: 'bg-red-500/20 text-red-400',\n    cyan: 'bg-cyan-500/20 text-cyan-400',\n  }\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4\">\n      <div className=\"flex items-center justify-between mb-2\">\n        <span className=\"text-sm text-zinc-400\">{title}</span>\n        <div className={`w-8 h-8 rounded-lg flex items-center justify-center ${colorClasses[color]}`}>\n          {icon}\n        </div>\n      </div>\n      <div className=\"flex items-end justify-between\">\n        <span className=\"text-2xl font-bold text-white\">{value}</span>\n        {change !== undefined && (\n          <span className={`flex items-center text-sm ${change >= 0 ? 'text-emerald-400' : 'text-red-400'}`}>\n            {change >= 0 ? <TrendingUp className=\"w-3 h-3 mr-1\" /> : <TrendingDown className=\"w-3 h-3 mr-1\" />}\n            {Math.abs(change).toFixed(1)}%\n          </span>\n        )}\n      </div>\n    </div>\n  )\n})\n\n// =====================================================\n// PRODUCT FUNNEL CHART\n// =====================================================\n\ninterface FunnelChartProps {\n  data: FunnelData\n  isLoading: boolean\n}\n\nconst FunnelChart = memo(function FunnelChart({ data, isLoading }: FunnelChartProps) {\n  if (isLoading) {\n    return (\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6 h-80 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 text-violet-400 animate-spin\" />\n      </div>\n    )\n  }\n\n  const stages = [\n    { key: 'created', label: 'Erstellt', value: data.created, color: '#6366f1' },\n    { key: 'start_phase', label: 'Start Phase', value: data.start_phase, color: '#8b5cf6' },\n    { key: 'post_phase', label: 'Post Phase', value: data.post_phase, color: '#a855f7' },\n    { key: 'winners', label: 'Winner', value: data.winners, color: '#10b981' },\n  ]\n\n  const maxValue = Math.max(...stages.map((s) => s.value), 1)\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6\">\n      <h3 className=\"text-lg font-semibold text-white mb-6\">Produkt-Funnel</h3>\n      <div className=\"space-y-4\">\n        {stages.map((stage, index) => {\n          const width = (stage.value / maxValue) * 100\n          const nextStage = stages[index + 1]\n          const conversionRate = nextStage && stage.value > 0\n            ? ((nextStage.value / stage.value) * 100).toFixed(1)\n            : null\n\n          return (\n            <div key={stage.key}>\n              <div className=\"flex items-center justify-between mb-1\">\n                <span className=\"text-sm text-zinc-400\">{stage.label}</span>\n                <span className=\"text-sm font-medium text-white\">{stage.value}</span>\n              </div>\n              <div className=\"h-8 bg-zinc-800 rounded-lg overflow-hidden\">\n                <div\n                  className=\"h-full rounded-lg transition-all duration-500\"\n                  style={{ width: `${width}%`, backgroundColor: stage.color }}\n                />\n              </div>\n              {conversionRate && (\n                <div className=\"flex items-center gap-1 mt-1 text-xs text-zinc-500\">\n                  <ArrowRight className=\"w-3 h-3\" />\n                  {conversionRate}% Conversion\n                </div>\n              )}\n            </div>\n          )\n        })}\n      </div>\n\n      {/* Summary */}\n      <div className=\"mt-6 pt-4 border-t border-zinc-800 grid grid-cols-2 gap-4\">\n        <div className=\"text-center\">\n          <p className=\"text-2xl font-bold text-emerald-400\">{data.winners}</p>\n          <p className=\"text-xs text-zinc-500\">Winner</p>\n        </div>\n        <div className=\"text-center\">\n          <p className=\"text-2xl font-bold text-red-400\">{data.losers}</p>\n          <p className=\"text-xs text-zinc-500\">Loser</p>\n        </div>\n      </div>\n    </div>\n  )\n})\n\n// =====================================================\n// TIME SERIES CHART\n// =====================================================\n\ninterface TimeSeriesChartProps {\n  data: Array<{\n    date: string\n    products_created: number\n    products_published: number\n    sales: number\n  }>\n  isLoading: boolean\n}\n\nconst TimeSeriesChart = memo(function TimeSeriesChart({ data, isLoading }: TimeSeriesChartProps) {\n  if (isLoading) {\n    return (\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6 h-80 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 text-violet-400 animate-spin\" />\n      </div>\n    )\n  }\n\n  const formatDate = (dateStr: string) => {\n    const date = new Date(dateStr)\n    return date.toLocaleDateString('de-DE', { day: '2-digit', month: '2-digit' })\n  }\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6\">\n      <h3 className=\"text-lg font-semibold text-white mb-4\">Aktivitaet</h3>\n      <div className=\"h-64\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <AreaChart data={data}>\n            <defs>\n              <linearGradient id=\"colorProducts\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#8b5cf6\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#8b5cf6\" stopOpacity={0} />\n              </linearGradient>\n              <linearGradient id=\"colorSales\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                <stop offset=\"5%\" stopColor=\"#10b981\" stopOpacity={0.3} />\n                <stop offset=\"95%\" stopColor=\"#10b981\" stopOpacity={0} />\n              </linearGradient>\n            </defs>\n            <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#27272a\" />\n            <XAxis\n              dataKey=\"date\"\n              tickFormatter={formatDate}\n              stroke=\"#71717a\"\n              fontSize={12}\n            />\n            <YAxis stroke=\"#71717a\" fontSize={12} />\n            <Tooltip\n              contentStyle={{\n                backgroundColor: '#18181b',\n                border: '1px solid #27272a',\n                borderRadius: '8px',\n              }}\n              labelStyle={{ color: '#fff' }}\n              formatter={(value: number, name: string) => {\n                const labels: Record<string, string> = {\n                  products_created: 'Erstellt',\n                  products_published: 'Veroeffentlicht',\n                  sales: 'Verkaeufe',\n                }\n                return [value, labels[name] || name]\n              }}\n              labelFormatter={(label) => formatDate(label)}\n            />\n            <Area\n              type=\"monotone\"\n              dataKey=\"products_created\"\n              stroke=\"#8b5cf6\"\n              fillOpacity={1}\n              fill=\"url(#colorProducts)\"\n            />\n            <Area\n              type=\"monotone\"\n              dataKey=\"sales\"\n              stroke=\"#10b981\"\n              fillOpacity={1}\n              fill=\"url(#colorSales)\"\n            />\n          </AreaChart>\n        </ResponsiveContainer>\n      </div>\n      <div className=\"flex items-center justify-center gap-6 mt-4\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded-full bg-violet-500\" />\n          <span className=\"text-sm text-zinc-400\">Produkte erstellt</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n          <div className=\"w-3 h-3 rounded-full bg-emerald-500\" />\n          <span className=\"text-sm text-zinc-400\">Verkaeufe</span>\n        </div>\n      </div>\n    </div>\n  )\n})\n\n// =====================================================\n// TOP PRODUCTS TABLE\n// =====================================================\n\ninterface TopProductsTableProps {\n  products: TopProduct[]\n  isLoading: boolean\n}\n\nconst TopProductsTable = memo(function TopProductsTable({ products, isLoading }: TopProductsTableProps) {\n  if (isLoading) {\n    return (\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6 h-80 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 text-violet-400 animate-spin\" />\n      </div>\n    )\n  }\n\n  const formatCurrency = (value: number) =>\n    new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(value)\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6\">\n      <h3 className=\"text-lg font-semibold text-white mb-4\">Top Produkte</h3>\n      {products.length === 0 ? (\n        <div className=\"text-center py-8 text-zinc-500\">\n          Noch keine Produkte mit Verkaeufen\n        </div>\n      ) : (\n        <div className=\"space-y-3\">\n          {products.slice(0, 5).map((product, index) => (\n            <div\n              key={product.id}\n              className=\"flex items-center gap-3 p-3 rounded-lg bg-zinc-800/50\"\n            >\n              <span className=\"text-lg font-bold text-zinc-600 w-6\">#{index + 1}</span>\n              <div className=\"w-10 h-10 rounded bg-zinc-700 flex-shrink-0 overflow-hidden\">\n                {product.generated_image_url ? (\n                  <img\n                    src={product.generated_image_url}\n                    alt={product.title}\n                    loading=\"lazy\"\n                    decoding=\"async\"\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"w-full h-full flex items-center justify-center\">\n                    <Package className=\"w-5 h-5 text-zinc-500\" />\n                  </div>\n                )}\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm text-white truncate\">{product.title}</p>\n                <p className=\"text-xs text-zinc-500\">\n                  {product.total_sales} Verkaeufe | {product.total_views} Views\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <p className=\"text-sm font-medium text-emerald-400\">\n                  {formatCurrency(product.total_revenue)}\n                </p>\n              </div>\n            </div>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n})\n\n// =====================================================\n// NICHE PERFORMANCE CHART\n// =====================================================\n\ninterface NichePerformanceChartProps {\n  niches: NicheBreakdown[]\n  isLoading: boolean\n}\n\nconst NichePerformanceChart = memo(function NichePerformanceChart({ niches, isLoading }: NichePerformanceChartProps) {\n  if (isLoading) {\n    return (\n      <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6 h-80 flex items-center justify-center\">\n        <Loader2 className=\"w-6 h-6 text-violet-400 animate-spin\" />\n      </div>\n    )\n  }\n\n  const COLORS = ['#8b5cf6', '#06b6d4', '#10b981', '#f59e0b', '#ef4444', '#ec4899']\n\n  const pieData = niches.slice(0, 6).map((n) => ({\n    name: n.name,\n    value: n.total_revenue,\n  }))\n\n  const formatCurrency = (value: number) =>\n    new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(value)\n\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-6\">\n      <h3 className=\"text-lg font-semibold text-white mb-4\">Nischen Performance</h3>\n      {niches.length === 0 ? (\n        <div className=\"text-center py-8 text-zinc-500\">\n          Noch keine Nischen konfiguriert\n        </div>\n      ) : (\n        <div className=\"flex items-center gap-6\">\n          <div className=\"w-48 h-48\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <PieChart>\n                <Pie\n                  data={pieData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  innerRadius={40}\n                  outerRadius={70}\n                  paddingAngle={2}\n                  dataKey=\"value\"\n                >\n                  {pieData.map((_, index) => (\n                    <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                  ))}\n                </Pie>\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: '#18181b',\n                    border: '1px solid #27272a',\n                    borderRadius: '8px',\n                  }}\n                  formatter={(value: number) => formatCurrency(value)}\n                />\n              </PieChart>\n            </ResponsiveContainer>\n          </div>\n          <div className=\"flex-1 space-y-2\">\n            {niches.slice(0, 5).map((niche, index) => (\n              <div key={niche.id} className=\"flex items-center justify-between\">\n                <div className=\"flex items-center gap-2\">\n                  <div\n                    className=\"w-3 h-3 rounded-full\"\n                    style={{ backgroundColor: COLORS[index % COLORS.length] }}\n                  />\n                  <span className=\"text-sm text-zinc-300\">{niche.name}</span>\n                </div>\n                <span className=\"text-sm text-zinc-400\">\n                  {formatCurrency(niche.total_revenue)}\n                </span>\n              </div>\n            ))}\n          </div>\n        </div>\n      )}\n    </div>\n  )\n})\n\n// =====================================================\n// PREMIUM GATE\n// =====================================================\n\nconst PremiumGate = memo(function PremiumGate() {\n  return (\n    <div className=\"bg-zinc-900 rounded-xl border border-violet-500/30 p-12 text-center\">\n      <div className=\"w-16 h-16 bg-violet-500/20 rounded-full flex items-center justify-center mx-auto mb-4\">\n        <Lock className=\"w-8 h-8 text-violet-400\" />\n      </div>\n      <h3 className=\"text-xl font-semibold text-white mb-2\">\n        Premium Feature\n      </h3>\n      <p className=\"text-zinc-400 mb-6 max-w-md mx-auto\">\n        Advanced Analytics ist nur im Premium- und VIP-Tarif verfuegbar.\n        Upgrade jetzt fuer detaillierte Einblicke in deine Performance.\n      </p>\n      <Link to=\"/pricing\" className=\"btn-primary\">\n        Auf Premium upgraden\n      </Link>\n    </div>\n  )\n})\n\n// =====================================================\n// DASHBOARD ANALYTICS PAGE\n// =====================================================\n\nexport default function DashboardAnalytics() {\n  const { shops, isLoading: shopsLoading } = useShops()\n  const { canUseFeature } = useSubscription()\n  const currentShopId = shops[0]?.id ?? null\n\n  const [period, setPeriod] = useState<AnalyticsPeriod>('30d')\n\n  const {\n    overview,\n    funnel,\n    campaigns,\n    roas,\n    timeSeriesData,\n    topProducts,\n    nicheBreakdown,\n    isLoading,\n    refetchAll,\n  } = useAnalytics(currentShopId, period)\n\n  const canUseAnalytics = canUseFeature('advancedAnalytics')\n  const loading = shopsLoading || isLoading\n\n  const formatCurrency = (value: number) =>\n    new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(value)\n\n  if (loading && !overview.total_products) {\n    return (\n      <DashboardLayout>\n        <div className=\"flex items-center justify-center h-64\">\n          <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n        </div>\n      </DashboardLayout>\n    )\n  }\n\n  return (\n    <DashboardLayout>\n      <div className=\"space-y-6\">\n        {/* Page Header */}\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold text-white flex items-center gap-2\">\n              <BarChart3 className=\"w-6 h-6 text-violet-400\" />\n              Analytics\n            </h1>\n            <p className=\"text-zinc-400 mt-1\">\n              Detaillierte Einblicke in deine Shop-Performance\n            </p>\n          </div>\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={() => refetchAll()}\n              className=\"btn-secondary\"\n              title=\"Aktualisieren\"\n            >\n              <RefreshCw className=\"w-4 h-4\" />\n            </button>\n            <PeriodSelector value={period} onChange={setPeriod} />\n          </div>\n        </div>\n\n        {/* Premium Gate */}\n        {!canUseAnalytics && <PremiumGate />}\n\n        {canUseAnalytics && (\n          <>\n            {/* Overview Stats */}\n            <div className=\"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4\">\n              <StatCard\n                title=\"Produkte\"\n                value={overview.total_products}\n                icon={<Package className=\"w-4 h-4\" />}\n                color=\"violet\"\n              />\n              <StatCard\n                title=\"Views\"\n                value={overview.total_views.toLocaleString('de-DE')}\n                icon={<Eye className=\"w-4 h-4\" />}\n                color=\"cyan\"\n              />\n              <StatCard\n                title=\"Verkaeufe\"\n                value={overview.total_sales}\n                icon={<ShoppingCart className=\"w-4 h-4\" />}\n                color=\"emerald\"\n              />\n              <StatCard\n                title=\"Umsatz\"\n                value={formatCurrency(overview.total_revenue)}\n                icon={<DollarSign className=\"w-4 h-4\" />}\n                color=\"amber\"\n              />\n              <StatCard\n                title=\"Conv. Rate\"\n                value={`${overview.conversion_rate}%`}\n                icon={<Target className=\"w-4 h-4\" />}\n                color=\"violet\"\n              />\n              <StatCard\n                title=\"Winner Rate\"\n                value={`${overview.winner_rate}%`}\n                icon={<Trophy className=\"w-4 h-4\" />}\n                color=\"emerald\"\n              />\n            </div>\n\n            {/* Campaign Performance */}\n            <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n              <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4 text-center\">\n                <p className=\"text-sm text-zinc-400 mb-1\">Ad Spend</p>\n                <p className=\"text-xl font-bold text-white\">\n                  {formatCurrency(campaigns.total_spend)}\n                </p>\n              </div>\n              <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4 text-center\">\n                <p className=\"text-sm text-zinc-400 mb-1\">Impressionen</p>\n                <p className=\"text-xl font-bold text-white\">\n                  {campaigns.total_impressions.toLocaleString('de-DE')}\n                </p>\n              </div>\n              <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4 text-center\">\n                <p className=\"text-sm text-zinc-400 mb-1\">Klicks</p>\n                <p className=\"text-xl font-bold text-white\">\n                  {campaigns.total_clicks.toLocaleString('de-DE')}\n                </p>\n              </div>\n              <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4 text-center\">\n                <p className=\"text-sm text-zinc-400 mb-1\">Conversions</p>\n                <p className=\"text-xl font-bold text-white\">\n                  {campaigns.total_conversions}\n                </p>\n              </div>\n              <div className=\"bg-zinc-900 rounded-xl border border-zinc-800 p-4 text-center\">\n                <p className=\"text-sm text-zinc-400 mb-1\">ROAS</p>\n                <p className={`text-xl font-bold ${roas >= 1 ? 'text-emerald-400' : 'text-red-400'}`}>\n                  {roas.toFixed(2)}x\n                </p>\n              </div>\n            </div>\n\n            {/* Charts Row */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <FunnelChart data={funnel} isLoading={isLoading} />\n              <TimeSeriesChart data={timeSeriesData} isLoading={isLoading} />\n            </div>\n\n            {/* Bottom Row */}\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n              <TopProductsTable products={topProducts} isLoading={isLoading} />\n              <NichePerformanceChart niches={nicheBreakdown} isLoading={isLoading} />\n            </div>\n          </>\n        )}\n      </div>\n    </DashboardLayout>\n  )\n}\n"],"names":["useAnalytics","shopId","period","overviewQuery","useQuery","api","timeSeriesQuery","topProductsQuery","nicheBreakdownQuery","defaultOverview","defaultFunnel","defaultCampaigns","PeriodSelector","memo","value","onChange","periods","jsx","StatCard","title","icon","change","color","colorClasses","jsxs","TrendingUp","TrendingDown","FunnelChart","data","isLoading","Loader2","stages","maxValue","s","stage","index","width","nextStage","conversionRate","ArrowRight","TimeSeriesChart","formatDate","dateStr","ResponsiveContainer","AreaChart","CartesianGrid","XAxis","YAxis","Tooltip","name","label","Area","TopProductsTable","products","formatCurrency","product","Package","NichePerformanceChart","niches","COLORS","pieData","n","PieChart","Pie","_","Cell","niche","PremiumGate","Lock","Link","DashboardAnalytics","shops","shopsLoading","useShops","canUseFeature","useSubscription","currentShopId","setPeriod","useState","overview","funnel","campaigns","roas","timeSeriesData","topProducts","nicheBreakdown","refetchAll","canUseAnalytics","loading","DashboardLayout","BarChart3","RefreshCw","Fragment","Eye","ShoppingCart","DollarSign","Target","Trophy"],"mappings":"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"}