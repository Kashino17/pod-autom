{"version":3,"file":"Checkout-DGSI2vgQ.js","sources":["../../src/pages/Checkout.tsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { useSearchParams, useNavigate, Link } from 'react-router-dom'\nimport { Check, Star, ShieldCheck, Loader2, AlertCircle, ArrowLeft } from 'lucide-react'\nimport { useCheckout } from '@src/hooks/useCheckout'\nimport { useAuth } from '@src/contexts/AuthContext'\nimport { SUBSCRIPTION_TIERS, type SubscriptionTier } from '@src/lib/constants'\n\nconst tierOrder: SubscriptionTier[] = ['basis', 'premium', 'vip']\n\nexport default function Checkout() {\n  const [searchParams] = useSearchParams()\n  const navigate = useNavigate()\n  const { user, loading: authLoading } = useAuth()\n  const { createCheckoutSession, isLoading, error, isStripeConfigured } = useCheckout()\n\n  const tierParam = searchParams.get('tier') as SubscriptionTier | null\n  const [selectedTier, setSelectedTier] = useState<SubscriptionTier>(\n    tierParam && tierOrder.includes(tierParam) ? tierParam : 'premium'\n  )\n\n  // Redirect to login if not authenticated\n  useEffect(() => {\n    if (!authLoading && !user) {\n      navigate('/login?redirect=/checkout')\n    }\n  }, [user, authLoading, navigate])\n\n  const handleCheckout = () => {\n    createCheckoutSession(selectedTier)\n  }\n\n  const tier = SUBSCRIPTION_TIERS[selectedTier]\n\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <Loader2 className=\"w-8 h-8 text-violet-500 animate-spin\" />\n      </div>\n    )\n  }\n\n  if (!user) {\n    return null\n  }\n\n  return (\n    <div className=\"min-h-screen bg-black\">\n      {/* Header */}\n      <header className=\"border-b border-zinc-800\">\n        <div className=\"max-w-4xl mx-auto px-4 py-4\">\n          <Link to=\"/\" className=\"flex items-center gap-2 text-zinc-400 hover:text-white transition-colors\">\n            <ArrowLeft className=\"w-4 h-4\" />\n            <span>Zurueck</span>\n          </Link>\n        </div>\n      </header>\n\n      <div className=\"max-w-4xl mx-auto px-4 py-12\">\n        {/* Title */}\n        <div className=\"text-center mb-12\">\n          <h1 className=\"text-3xl md:text-4xl font-bold text-white mb-4\">\n            Waehle deinen Plan\n          </h1>\n          <p className=\"text-zinc-400\">\n            Starte jetzt mit POD AutoM und automatisiere dein Print-on-Demand Business\n          </p>\n        </div>\n\n        {/* Stripe not configured warning */}\n        {!isStripeConfigured && (\n          <div className=\"mb-8 p-4 bg-amber-500/10 border border-amber-500/30 rounded-xl\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\" />\n              <div>\n                <p className=\"text-amber-200 font-medium\">Zahlungssystem nicht verfuegbar</p>\n                <p className=\"text-amber-300/70 text-sm mt-1\">\n                  Das Zahlungssystem ist derzeit nicht konfiguriert. Bitte kontaktiere den Support.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* Plan Selection */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8\">\n          {tierOrder.map((tierId) => {\n            const tierData = SUBSCRIPTION_TIERS[tierId]\n            const isSelected = selectedTier === tierId\n            const isPremium = tierId === 'premium'\n\n            return (\n              <button\n                key={tierId}\n                onClick={() => setSelectedTier(tierId)}\n                className={`relative p-6 rounded-xl text-left transition-all ${\n                  isSelected\n                    ? 'bg-violet-500/20 border-2 border-violet-500'\n                    : 'bg-zinc-900/50 border border-zinc-800 hover:border-zinc-700'\n                }`}\n              >\n                {isPremium && (\n                  <div className=\"absolute -top-3 left-1/2 -translate-x-1/2\">\n                    <div className=\"flex items-center gap-1 px-3 py-0.5 rounded-full bg-violet-500 text-white text-xs font-medium\">\n                      <Star className=\"w-3 h-3 fill-current\" />\n                      Empfohlen\n                    </div>\n                  </div>\n                )}\n\n                <div className=\"flex items-center justify-between mb-2\">\n                  <h3 className=\"text-lg font-bold text-white\">{tierData.name}</h3>\n                  <div\n                    className={`w-5 h-5 rounded-full border-2 flex items-center justify-center ${\n                      isSelected ? 'border-violet-500 bg-violet-500' : 'border-zinc-600'\n                    }`}\n                  >\n                    {isSelected && <Check className=\"w-3 h-3 text-white\" />}\n                  </div>\n                </div>\n\n                <div className=\"flex items-baseline gap-1 mb-3\">\n                  <span className=\"text-2xl font-bold text-white\">{tierData.price}€</span>\n                  <span className=\"text-zinc-500 text-sm\">/Monat</span>\n                </div>\n\n                <ul className=\"space-y-2\">\n                  {tierData.features.slice(0, 3).map((feature) => (\n                    <li key={feature} className=\"flex items-center gap-2 text-sm text-zinc-400\">\n                      <Check className=\"w-3.5 h-3.5 text-violet-400\" />\n                      {feature}\n                    </li>\n                  ))}\n                  {tierData.features.length > 3 && (\n                    <li className=\"text-sm text-zinc-500\">\n                      +{tierData.features.length - 3} weitere Features\n                    </li>\n                  )}\n                </ul>\n              </button>\n            )\n          })}\n        </div>\n\n        {/* Selected Plan Summary */}\n        <div className=\"bg-zinc-900/50 border border-zinc-800 rounded-xl p-6 mb-8\">\n          <h3 className=\"text-lg font-bold text-white mb-4\">Zusammenfassung</h3>\n\n          <div className=\"flex items-center justify-between py-3 border-b border-zinc-800\">\n            <span className=\"text-zinc-400\">Ausgewaehlter Plan</span>\n            <span className=\"text-white font-medium\">{tier.name}</span>\n          </div>\n\n          <div className=\"flex items-center justify-between py-3 border-b border-zinc-800\">\n            <span className=\"text-zinc-400\">Abrechnungszeitraum</span>\n            <span className=\"text-white\">Monatlich</span>\n          </div>\n\n          <div className=\"flex items-center justify-between py-3\">\n            <span className=\"text-zinc-400\">Monatlicher Preis</span>\n            <span className=\"text-2xl font-bold text-white\">{tier.price}€</span>\n          </div>\n        </div>\n\n        {/* Error Message */}\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-xl\">\n            <div className=\"flex items-start gap-3\">\n              <AlertCircle className=\"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5\" />\n              <p className=\"text-red-200\">{error}</p>\n            </div>\n          </div>\n        )}\n\n        {/* Checkout Button */}\n        <button\n          onClick={handleCheckout}\n          disabled={isLoading || !isStripeConfigured}\n          className=\"w-full py-4 bg-violet-500 hover:bg-violet-600 disabled:bg-zinc-700 disabled:cursor-not-allowed text-white font-medium rounded-xl transition-colors flex items-center justify-center gap-2\"\n        >\n          {isLoading ? (\n            <>\n              <Loader2 className=\"w-5 h-5 animate-spin\" />\n              Weiterleitung zu Stripe...\n            </>\n          ) : (\n            <>\n              <ShieldCheck className=\"w-5 h-5\" />\n              Jetzt {tier.price}€/Monat abonnieren\n            </>\n          )}\n        </button>\n\n        {/* Trust badges */}\n        <div className=\"mt-8 flex flex-wrap items-center justify-center gap-6 text-zinc-500 text-sm\">\n          <div className=\"flex items-center gap-2\">\n            <ShieldCheck className=\"w-4 h-4 text-emerald-500\" />\n            <span>Sichere Zahlung</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Check className=\"w-4 h-4 text-emerald-500\" />\n            <span>Jederzeit kuendbar</span>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Check className=\"w-4 h-4 text-emerald-500\" />\n            <span>14 Tage Geld-zurueck</span>\n          </div>\n        </div>\n\n        {/* Legal note */}\n        <p className=\"mt-8 text-center text-zinc-600 text-xs\">\n          Mit dem Klick auf \"Abonnieren\" stimmst du unseren{' '}\n          <Link to=\"/agb\" className=\"text-zinc-500 hover:text-white underline\">\n            AGB\n          </Link>{' '}\n          und{' '}\n          <Link to=\"/datenschutz\" className=\"text-zinc-500 hover:text-white underline\">\n            Datenschutzbestimmungen\n          </Link>{' '}\n          zu.\n        </p>\n      </div>\n    </div>\n  )\n}\n"],"names":["tierOrder","Checkout","searchParams","useSearchParams","navigate","useNavigate","user","authLoading","useAuth","createCheckoutSession","isLoading","error","useCheckout","tierParam","selectedTier","setSelectedTier","useState","useEffect","handleCheckout","tier","SUBSCRIPTION_TIERS","jsx","Loader2","jsxs","Link","ArrowLeft","tierId","tierData","isSelected","isPremium","Star","Check","feature","AlertCircle","Fragment","ShieldCheck"],"mappings":"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"}