import{r as i}from"./vendor-react-4xEIaAEA.js";import{a}from"./api-DZjOEeDy.js";import{u as l,e as p,C as f,f as C}from"./index-DMzOI_GZ.js";function E(){const{user:o}=l(),[c,n]=i.useState(!1),[u,r]=i.useState(null);return{isLoading:c,error:u,isStripeConfigured:!0,createCheckoutSession:async e=>{if(!o){r("Du musst eingeloggt sein");return}n(!0),r(null);try{const s=p[e],t=await a.post("/api/stripe/create-checkout",{price_id:s,user_id:o.id,success_url:C,cancel_url:f});if(t.success&&t.url)window.location.href=t.url;else throw new Error("Checkout-Session konnte nicht erstellt werden")}catch(s){const t=s instanceof Error?s.message:"Unbekannter Fehler";r(t),console.error("Checkout error:",s)}finally{n(!1)}},openCustomerPortal:async()=>{if(!o){r("Du musst eingeloggt sein");return}n(!0),r(null);try{const e=await a.post("/api/stripe/portal",{user_id:o.id,return_url:`${window.location.origin}/settings`});if(e.success&&e.url)window.location.href=e.url;else throw new Error("Portal-Session konnte nicht erstellt werden")}catch(e){const s=e instanceof Error?e.message:"Unbekannter Fehler";r(s),console.error("Portal error:",e)}finally{n(!1)}},clearError:()=>r(null)}}export{E as u};
//# sourceMappingURL=useCheckout-BLIfbZHj.js.map
