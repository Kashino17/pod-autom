import{b as m,u as i,c}from"./vendor-query-CpRdniug.js";import{u as y}from"./index-BNM9HcXn.js";import{a as n}from"./api-BF1n4RIP.js";function b(){const{user:e}=y(),s=m(),d="http://localhost:5001",t=i({queryKey:["pinterest","status",e?.id],queryFn:()=>n.get("/api/pod-autom/pinterest/status"),enabled:!!e,staleTime:1e3*60*2}),a=i({queryKey:["pinterest","ad-accounts",e?.id],queryFn:()=>n.get("/api/pod-autom/pinterest/ad-accounts"),enabled:!!e&&t.data?.connected===!0,staleTime:1e3*60*5}),o=i({queryKey:["pinterest","boards",e?.id],queryFn:()=>n.get("/api/pod-autom/pinterest/boards"),enabled:!!e&&t.data?.connected===!0,staleTime:1e3*60*5}),p=()=>{e&&(window.location.href=`${d}/api/pod-autom/pinterest/authorize?user_id=${e.id}`)},r=c({mutationFn:()=>n.post("/api/pod-autom/pinterest/disconnect"),onSuccess:()=>{s.invalidateQueries({queryKey:["pinterest"]})}}),u=c({mutationFn:l=>n.post("/api/pod-autom/pinterest/select-ad-account",l),onSuccess:()=>{s.invalidateQueries({queryKey:["pinterest","status"]})}});return{isConnected:t.data?.connected??!1,platform:t.data?.platform??null,isLoading:t.isLoading,error:t.error,adAccounts:a.data?.ad_accounts??[],adAccountsLoading:a.isLoading,refetchAdAccounts:a.refetch,boards:o.data?.boards??[],boardsLoading:o.isLoading,refetchBoards:o.refetch,connect:p,disconnect:r.mutate,isDisconnecting:r.isPending,selectAdAccount:u.mutate,isSelectingAdAccount:u.isPending,refetch:()=>{s.invalidateQueries({queryKey:["pinterest"]})}}}export{b as u};
//# sourceMappingURL=usePinterest-DmL-QGJe.js.map
