import{j as e,u as U}from"./vendor-query-CpRdniug.js";import{r as w,L as g}from"./vendor-react-4xEIaAEA.js";import{b as S,S as O,u as _}from"./index-CupJPaFk.js";import{u as K}from"./useShopify-BNCwXObD.js";import{D as W}from"./DashboardLayout-BZDTWsk4.js";import{m as j,d as A,s as I,D as B,t as D,Z as f,b,e as Z,u as V,v as G,L as y,A as k,w as M,h as $,a as H,R as F,x as R,M as Y,y as P,X as z,T as J,z as X,S as q,B as Q}from"./vendor-ui-BMWb517o.js";import{R as ee,A as te,C as se,X as ie,Y as ne,T as ae,a as re}from"./vendor-charts-Cz_1NfFu.js";import{u as le}from"./useCheckout-DuFpMUpr.js";import{a as ce}from"./api-DNziMqA2.js";import"./vendor-supabase-DejIJ_qE.js";function h({title:t,value:n,change:s,icon:a,loading:l,format:i="number"}){const c=s!==void 0&&s>0,o=s!==void 0&&s<0,x=r=>{if(typeof r=="string")return r;switch(i){case"currency":return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(r);case"percent":return`${r.toFixed(1)}%`;default:return new Intl.NumberFormat("de-DE").format(r)}};return e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-5 hover:border-zinc-700 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center",children:a}),s!==void 0&&e.jsxs("div",{className:`flex items-center gap-0.5 text-sm font-medium ${c?"text-emerald-400":o?"text-red-400":"text-zinc-500"}`,children:[c?e.jsx(V,{className:"w-4 h-4"}):o?e.jsx(G,{className:"w-4 h-4"}):null,Math.abs(s).toFixed(1),"%"]})]}),e.jsxs("div",{className:"mt-4",children:[l?e.jsx(y,{className:"w-6 h-6 text-violet-500 animate-spin"}):e.jsx("p",{className:"text-2xl font-bold text-white",children:x(n)}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t})]})]})}function oe({metrics:t,isLoading:n,period:s="30d"}){const a={"7d":"7 Tage","30d":"30 Tage","90d":"90 Tage"}[s];return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Übersicht"}),e.jsxs("span",{className:"text-sm text-zinc-500",children:["Letzte ",a]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(h,{title:"Produkte gesamt",value:t?.totalProducts??0,change:t?.productChange,icon:e.jsx(j,{className:"w-5 h-5 text-violet-400"}),loading:n}),e.jsx(h,{title:"Aktive Produkte",value:t?.activeProducts??0,icon:e.jsx(A,{className:"w-5 h-5 text-violet-400"}),loading:n}),e.jsx(h,{title:"Impressionen",value:t?.totalImpressions??0,change:t?.impressionChange,icon:e.jsx(I,{className:"w-5 h-5 text-violet-400"}),loading:n}),e.jsx(h,{title:"Umsatz",value:t?.totalRevenue??0,change:t?.revenueChange,icon:e.jsx(B,{className:"w-5 h-5 text-violet-400"}),loading:n,format:"currency"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(h,{title:"Verkäufe",value:t?.totalSales??0,change:t?.salesChange,icon:e.jsx(D,{className:"w-5 h-5 text-violet-400"}),loading:n}),e.jsx(h,{title:"Klicks",value:t?.totalClicks??0,icon:e.jsx(f,{className:"w-5 h-5 text-violet-400"}),loading:n}),e.jsx(h,{title:"Conversion Rate",value:t?.conversionRate??0,icon:e.jsx(b,{className:"w-5 h-5 text-violet-400"}),loading:n,format:"percent"}),e.jsx(h,{title:"Wartend",value:t?.pendingProducts??0,icon:e.jsx(Z,{className:"w-5 h-5 text-violet-400"}),loading:n})]})]})}const N=[{key:"impressions",label:"Impressionen",color:"#8b5cf6",format:t=>new Intl.NumberFormat("de-DE").format(t)},{key:"clicks",label:"Klicks",color:"#06b6d4",format:t=>new Intl.NumberFormat("de-DE").format(t)},{key:"sales",label:"Verkäufe",color:"#10b981",format:t=>new Intl.NumberFormat("de-DE").format(t)},{key:"revenue",label:"Umsatz",color:"#f59e0b",format:t=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(t)}];function de({active:t,payload:n,label:s,selectedMetrics:a}){return!t||!n?null:e.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3 shadow-xl",children:[e.jsx("p",{className:"text-sm text-zinc-400 mb-2",children:s}),e.jsx("div",{className:"space-y-1",children:n.map(l=>{const i=N.find(c=>c.key===l.name);return!i||!a.includes(i.key)?null:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:l.color}}),e.jsx("span",{className:"text-sm text-zinc-300",children:i.label})]}),e.jsx("span",{className:"text-sm font-medium text-white",children:i.format(l.value)})]},l.name)})})]})}function me({data:t,isLoading:n}){const[s,a]=w.useState(["impressions","clicks"]),l=i=>{a(c=>c.includes(i)?c.length===1?c:c.filter(o=>o!==i):[...c,i])};return n?e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(y,{className:"w-8 h-8 text-violet-500 animate-spin"})})}):e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Performance"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(i=>e.jsxs("button",{onClick:()=>l(i.key),className:`px-3 py-1.5 rounded-lg text-sm font-medium transition-colors ${s.includes(i.key)?"text-white":"bg-zinc-800 text-zinc-500 hover:text-zinc-300"}`,style:{backgroundColor:s.includes(i.key)?`${i.color}30`:void 0,borderColor:s.includes(i.key)?`${i.color}50`:void 0,borderWidth:s.includes(i.key)?1:0},children:[e.jsx("span",{className:"inline-block w-2 h-2 rounded-full mr-2",style:{backgroundColor:i.color}}),i.label]},i.key))})]}),e.jsx("div",{className:"h-64 sm:h-80",children:t.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-zinc-500",children:"Keine Daten verfügbar"}):e.jsx(ee,{width:"100%",height:"100%",children:e.jsxs(te,{data:t,margin:{top:10,right:10,left:0,bottom:0},children:[e.jsx("defs",{children:N.map(i=>e.jsxs("linearGradient",{id:`gradient-${i.key}`,x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"0%",stopColor:i.color,stopOpacity:.3}),e.jsx("stop",{offset:"100%",stopColor:i.color,stopOpacity:0})]},i.key))}),e.jsx(se,{strokeDasharray:"3 3",stroke:"#27272a"}),e.jsx(ie,{dataKey:"date",stroke:"#71717a",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(ne,{stroke:"#71717a",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:i=>i>=1e3?`${(i/1e3).toFixed(0)}k`:i}),e.jsx(ae,{content:e.jsx(de,{selectedMetrics:s})}),N.filter(i=>s.includes(i.key)).map(i=>e.jsx(re,{type:"monotone",dataKey:i.key,stroke:i.color,strokeWidth:2,fill:`url(#gradient-${i.key})`},i.key))]})})})]})}function xe({status:t}){const n={active:{label:"Aktiv",icon:e.jsx(H,{className:"w-3 h-3"}),className:"bg-emerald-500/20 text-emerald-400"},pending:{label:"Wartend",icon:e.jsx($,{className:"w-3 h-3"}),className:"bg-amber-500/20 text-amber-400"},draft:{label:"Entwurf",icon:e.jsx(j,{className:"w-3 h-3"}),className:"bg-zinc-700 text-zinc-400"},winner:{label:"Winner",icon:e.jsx(b,{className:"w-3 h-3"}),className:"bg-violet-500/20 text-violet-400"},loser:{label:"Loser",icon:e.jsx(M,{className:"w-3 h-3"}),className:"bg-red-500/20 text-red-400"}},{label:s,icon:a,className:l}=n[t];return e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded-full text-xs font-medium ${l}`,children:[a,s]})}function he({product:t}){const n=a=>new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(a),s=a=>new Intl.NumberFormat("de-DE").format(a);return e.jsxs("div",{className:"flex items-center gap-4 p-3 rounded-lg hover:bg-zinc-800/50 transition-colors",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-800 rounded-lg overflow-hidden flex-shrink-0",children:t.imageUrl?e.jsx("img",{src:t.imageUrl,alt:t.title,loading:"lazy",decoding:"async",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(j,{className:"w-5 h-5 text-zinc-600"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx(xe,{status:t.status}),e.jsx("span",{className:"text-xs text-zinc-500",children:new Date(t.createdAt).toLocaleDateString("de-DE")})]})]}),e.jsxs("div",{className:"hidden sm:flex items-center gap-6 text-right",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-white flex items-center gap-1 justify-end",children:[e.jsx(I,{className:"w-3.5 h-3.5 text-zinc-500"}),s(t.impressions)]}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Impressionen"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-white flex items-center gap-1 justify-end",children:[e.jsx(D,{className:"w-3.5 h-3.5 text-zinc-500"}),t.sales]}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Verkäufe"})]}),e.jsxs("div",{className:"w-20",children:[e.jsx("p",{className:"text-sm font-medium text-white",children:n(t.revenue)}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Umsatz"})]})]}),e.jsxs("div",{className:"hidden md:block",children:[t.trend==="up"&&e.jsx(b,{className:"w-5 h-5 text-emerald-400"}),t.trend==="down"&&e.jsx(M,{className:"w-5 h-5 text-red-400"}),t.trend==="neutral"&&e.jsx("div",{className:"w-5 h-1 bg-zinc-600 rounded"})]})]})}function ue({products:t,isLoading:n}){return n?e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(y,{className:"w-6 h-6 text-violet-500 animate-spin"})})}):e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Neueste Produkte"}),e.jsxs(g,{to:"/dashboard/products",className:"text-sm text-violet-400 hover:text-violet-300 flex items-center gap-1 transition-colors",children:["Alle anzeigen",e.jsx(k,{className:"w-4 h-4"})]})]}),e.jsx("div",{className:"p-2",children:t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-800 rounded-full flex items-center justify-center mb-3",children:e.jsx(j,{className:"w-6 h-6 text-zinc-600"})}),e.jsx("p",{className:"text-zinc-400",children:"Noch keine Produkte erstellt"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:"Starte die Automatisierung, um Produkte zu generieren."})]}):e.jsx("div",{className:"divide-y divide-zinc-800/50",children:t.map(s=>e.jsx(he,{product:s},s.id))})})]})}function ge({type:t}){const n={product_created:{icon:e.jsx(j,{className:"w-4 h-4"}),className:"bg-violet-500/20 text-violet-400"},product_optimized:{icon:e.jsx(f,{className:"w-4 h-4"}),className:"bg-cyan-500/20 text-cyan-400"},campaign_synced:{icon:e.jsx(Y,{className:"w-4 h-4"}),className:"bg-blue-500/20 text-blue-400"},winner_found:{icon:e.jsx(b,{className:"w-4 h-4"}),className:"bg-emerald-500/20 text-emerald-400"},sale:{icon:e.jsx(D,{className:"w-4 h-4"}),className:"bg-green-500/20 text-green-400"},error:{icon:e.jsx(R,{className:"w-4 h-4"}),className:"bg-red-500/20 text-red-400"},system:{icon:e.jsx(F,{className:"w-4 h-4"}),className:"bg-zinc-700 text-zinc-400"}},{icon:s,className:a}=n[t];return e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${a}`,children:s})}function fe(t){const n=new Date,s=new Date(t),a=Math.floor((n.getTime()-s.getTime())/1e3);return a<60?"gerade eben":a<3600?`vor ${Math.floor(a/60)} Min.`:a<86400?`vor ${Math.floor(a/3600)} Std.`:a<604800?`vor ${Math.floor(a/86400)} Tagen`:s.toLocaleDateString("de-DE")}function pe({activity:t}){return e.jsxs("div",{className:"flex gap-3 py-3",children:[e.jsx(ge,{type:t.type}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm text-white",children:t.title}),t.description&&e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5 truncate",children:t.description}),e.jsx("p",{className:"text-xs text-zinc-600 mt-1",children:fe(t.timestamp)})]})]})}function je({activities:t,isLoading:n,maxItems:s=10}){const a=t.slice(0,s);return n?e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-6",children:e.jsx("div",{className:"flex items-center justify-center h-48",children:e.jsx(y,{className:"w-6 h-6 text-violet-500 animate-spin"})})}):e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800",children:[e.jsx("div",{className:"p-4 border-b border-zinc-800",children:e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Aktivität"})}),e.jsx("div",{className:"p-4",children:a.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-zinc-800 rounded-full flex items-center justify-center mb-3",children:e.jsx(F,{className:"w-6 h-6 text-zinc-600"})}),e.jsx("p",{className:"text-zinc-400",children:"Keine Aktivität"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:"Aktivitäten werden hier angezeigt."})]}):e.jsx("div",{className:"divide-y divide-zinc-800/50",children:a.map(l=>e.jsx(pe,{activity:l},l.id))})}),t.length>s&&e.jsx("div",{className:"p-4 border-t border-zinc-800",children:e.jsxs("button",{className:"w-full text-sm text-violet-400 hover:text-violet-300 transition-colors",children:["Mehr anzeigen (",t.length-s," weitere)"]})})]})}function be({targetTier:t,title:n,description:s,variant:a="banner",dismissible:l=!1,onDismiss:i}){const[c,o]=w.useState(!1),{tier:x}=S(),r=t||(x==="basis"?"premium":"vip"),u=O[r];if(x){const p=["basis","premium","vip"],E=p.indexOf(x),L=p.indexOf(r);if(E>=L)return null}if(c)return null;const d=()=>{o(!0),i?.()},m=`Upgrade auf ${u.name}`,C=`Schalte mehr Features frei ab ${u.price}€/Monat`;return a==="compact"?e.jsxs(g,{to:`/checkout?tier=${r}`,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-violet-500/10 hover:bg-violet-500/20 border border-violet-500/30 rounded-lg transition-colors group",children:[e.jsx(f,{className:"w-4 h-4 text-violet-400"}),e.jsx("span",{className:"text-sm text-violet-300 group-hover:text-violet-200",children:n||m}),e.jsx(k,{className:"w-3 h-3 text-violet-400 group-hover:translate-x-0.5 transition-transform"})]}):a==="banner"?e.jsx("div",{className:"relative bg-gradient-to-r from-violet-500/20 via-violet-500/10 to-violet-500/20 border border-violet-500/30 rounded-xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-violet-500/20 flex items-center justify-center",children:r==="vip"?e.jsx(P,{className:"w-5 h-5 text-amber-400"}):e.jsx(f,{className:"w-5 h-5 text-violet-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:n||m}),e.jsx("p",{className:"text-sm text-zinc-400",children:s||C})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{to:`/checkout?tier=${r}`,className:"px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Upgraden"}),l&&e.jsx("button",{onClick:d,className:"p-2 text-zinc-500 hover:text-zinc-300 transition-colors",children:e.jsx(z,{className:"w-4 h-4"})})]})]})}):e.jsxs("div",{className:"relative bg-zinc-800/50 border border-violet-500/30 rounded-xl p-6 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-violet-500/10 rounded-full blur-2xl"}),l&&e.jsx("button",{onClick:d,className:"absolute top-4 right-4 p-1 text-zinc-500 hover:text-zinc-300 transition-colors",children:e.jsx(z,{className:"w-4 h-4"})}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-violet-500/20 flex items-center justify-center",children:r==="vip"?e.jsx(P,{className:"w-6 h-6 text-amber-400"}):e.jsx(f,{className:"w-6 h-6 text-violet-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white",children:n||m}),e.jsx("p",{className:"text-sm text-zinc-400",children:s||C})]})]}),e.jsx("ul",{className:"space-y-2 mb-6",children:u.features.slice(0,3).map(p=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-zinc-300",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-violet-400"}),p]},p))}),e.jsxs(g,{to:`/checkout?tier=${r}`,className:"flex items-center justify-center gap-2 w-full py-3 bg-violet-500 hover:bg-violet-600 text-white font-medium rounded-xl transition-colors",children:["Jetzt upgraden",e.jsx(k,{className:"w-4 h-4"})]})]})]})}function ve(){const[t,n]=w.useState(!1),{subscription:s,isPastDue:a,daysUntilRenewal:l}=S(),{openCustomerPortal:i,isLoading:c}=le();let o=null;if(s?a?o="past_due":s.status==="canceled"?o="canceled":s.status==="trialing"&&l!==null&&l<=3&&(o="trial_ending"):o="no_subscription",t||!o)return null;const r={past_due:{icon:R,iconColor:"text-red-400",bgColor:"bg-red-500/10 border-red-500/30",title:"Zahlung fehlgeschlagen",description:"Bitte aktualisiere deine Zahlungsmethode, um weiterhin alle Features nutzen zu koennen.",action:"Zahlungsmethode aktualisieren",actionType:"portal",dismissible:!1},trial_ending:{icon:$,iconColor:"text-amber-400",bgColor:"bg-amber-500/10 border-amber-500/30",title:`Testphase endet in ${l} ${l===1?"Tag":"Tagen"}`,description:"Upgrade jetzt, um ohne Unterbrechung weiterzuarbeiten.",action:"Jetzt upgraden",actionType:"checkout",dismissible:!0},no_subscription:{icon:X,iconColor:"text-violet-400",bgColor:"bg-violet-500/10 border-violet-500/30",title:"Kein aktives Abonnement",description:"Waehle einen Plan, um alle Features freizuschalten.",action:"Plan auswaehlen",actionType:"checkout",dismissible:!0},canceled:{icon:J,iconColor:"text-orange-400",bgColor:"bg-orange-500/10 border-orange-500/30",title:"Abonnement gekuendigt",description:l?`Dein Zugang endet in ${l} ${l===1?"Tag":"Tagen"}.`:"Dein Zugang endet bald.",action:"Abonnement reaktivieren",actionType:"portal",dismissible:!0}}[o],u=r.icon,d=()=>{r.actionType==="portal"&&i()};return e.jsx("div",{className:`border rounded-xl p-4 mb-6 ${r.bgColor}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(u,{className:`w-5 h-5 ${r.iconColor}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-white",children:r.title}),e.jsx("p",{className:"text-sm text-zinc-400 mt-0.5",children:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[r.actionType==="checkout"?e.jsx(g,{to:"/checkout",className:"px-4 py-2 bg-violet-500 hover:bg-violet-600 text-white text-sm font-medium rounded-lg transition-colors",children:r.action}):e.jsx("button",{onClick:d,disabled:c,className:"px-4 py-2 bg-violet-500 hover:bg-violet-600 disabled:bg-zinc-600 text-white text-sm font-medium rounded-lg transition-colors",children:c?"Laden...":r.action}),r.dismissible&&e.jsx("button",{onClick:()=>n(!0),className:"p-2 text-zinc-500 hover:text-zinc-300 transition-colors",children:e.jsx(z,{className:"w-4 h-4"})})]})]})})}function T(t){const n=t==="7d"?7:t==="30d"?30:90,s=[],a=new Date;for(let d=n-1;d>=0;d--){const m=new Date(a);m.setDate(m.getDate()-d),s.push({date:m.toLocaleDateString("de-DE",{day:"2-digit",month:"2-digit"}),impressions:Math.floor(Math.random()*5e3)+1e3,clicks:Math.floor(Math.random()*500)+100,sales:Math.floor(Math.random()*20)+1,revenue:Math.floor(Math.random()*500)+50})}const l=s.reduce((d,m)=>d+m.impressions,0),i=s.reduce((d,m)=>d+m.clicks,0),c=s.reduce((d,m)=>d+m.sales,0),o=s.reduce((d,m)=>d+m.revenue,0),x={totalProducts:47,activeProducts:32,pendingProducts:8,totalImpressions:l,totalClicks:i,totalSales:c,totalRevenue:o,conversionRate:i>0?c/i*100:0,productChange:15.2,impressionChange:8.5,salesChange:12.3,revenueChange:-3.1},r=[{id:"1",title:"Fitness Motivation T-Shirt",status:"winner",impressions:3240,sales:12,revenue:359.88,trend:"up",createdAt:new Date(Date.now()-2880*60*1e3).toISOString()},{id:"2",title:"Yoga Life Hoodie",status:"active",impressions:1890,sales:5,revenue:199.95,trend:"up",createdAt:new Date(Date.now()-4320*60*1e3).toISOString()},{id:"3",title:"Coffee Lover Mug Design",status:"active",impressions:920,sales:3,revenue:59.97,trend:"neutral",createdAt:new Date(Date.now()-5760*60*1e3).toISOString()},{id:"4",title:"Gaming Setup Poster",status:"pending",impressions:450,sales:1,revenue:24.99,trend:"down",createdAt:new Date(Date.now()-7200*60*1e3).toISOString()},{id:"5",title:"Mountain Adventure Tee",status:"active",impressions:680,sales:2,revenue:59.98,trend:"up",createdAt:new Date(Date.now()-8640*60*1e3).toISOString()}],u=[{id:"1",type:"product_created",title:"3 neue Produkte erstellt",description:"Fitness Nische",timestamp:new Date(Date.now()-7200*1e3).toISOString()},{id:"2",type:"campaign_synced",title:"Pinterest Sync abgeschlossen",description:"15 Pins aktualisiert",timestamp:new Date(Date.now()-14400*1e3).toISOString()},{id:"3",type:"winner_found",title:"2 Winner identifiziert",description:"Fitness Motivation T-Shirt, Yoga Life Hoodie",timestamp:new Date(Date.now()-360*60*1e3).toISOString()},{id:"4",type:"sale",title:"Neue Bestellung",description:"Fitness Motivation T-Shirt - €29.99",timestamp:new Date(Date.now()-480*60*1e3).toISOString()},{id:"5",type:"product_optimized",title:"5 Produkte optimiert",description:"Titel und Beschreibungen aktualisiert",timestamp:new Date(Date.now()-720*60*1e3).toISOString()},{id:"6",type:"system",title:"Shop verbunden",description:"my-shop.myshopify.com",timestamp:new Date(Date.now()-1440*60*1e3).toISOString()}];return{success:!0,metrics:x,chartData:s,recentProducts:r,activities:u}}function Ne(t,n="30d"){const{session:s}=_();return U({queryKey:["dashboard-stats",t,n],queryFn:async()=>{if(!t)return T(n);try{return await ce.get(`/api/pod-autom/dashboard/${t}?period=${n}`)}catch{return T(n)}},enabled:!!s,staleTime:1e3*60*5,refetchInterval:1e3*60*5})}function we({value:t,onChange:n}){const s=[{value:"7d",label:"7 Tage"},{value:"30d",label:"30 Tage"},{value:"90d",label:"90 Tage"}];return e.jsx("div",{className:"flex bg-zinc-800 rounded-lg p-1",children:s.map(a=>e.jsx("button",{onClick:()=>n(a.value),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors ${t===a.value?"bg-violet-500 text-white":"text-zinc-400 hover:text-white"}`,children:a.label},a.value))})}function v({title:t,description:n,icon:s,href:a,onClick:l}){const i=e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-10 h-10 bg-violet-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:t}),e.jsx("p",{className:"text-sm text-zinc-400",children:n})]})]}),c="flex items-start gap-4 p-4 rounded-xl bg-zinc-800/50 border border-zinc-700 hover:border-violet-500/50 hover:bg-zinc-800 transition-all text-left w-full";return a?e.jsx(g,{to:a,className:c,children:i}):e.jsx("button",{onClick:l,className:c,children:i})}function Me(){const{shops:t,isLoading:n}=K(),{tier:s}=S(),[a,l]=w.useState("30d"),i=t.length>0,c=t[0]?.id||null,{data:o,isLoading:x}=Ne(c,a),r=n||x;return e.jsx(W,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Dashboard"}),e.jsx("p",{className:"text-zinc-400",children:"Willkommen zurück! Hier ist deine Übersicht."})]}),e.jsx(we,{value:a,onChange:l})]}),e.jsx(ve,{}),!n&&!i&&e.jsx("div",{className:"p-6 rounded-xl bg-amber-500/10 border border-amber-500/30",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(f,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Shop verbinden"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:"Verbinde deinen Shopify Store, um mit der Automatisierung zu starten."}),e.jsx(g,{to:"/onboarding",className:"inline-block mt-3 text-sm text-amber-400 hover:text-amber-300",children:"Jetzt einrichten →"})]})]})}),e.jsx(oe,{metrics:o?.metrics||null,isLoading:r,period:a}),e.jsx(me,{data:o?.chartData||[],isLoading:r}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ue,{products:o?.recentProducts||[],isLoading:r})}),e.jsx("div",{children:e.jsx(je,{activities:o?.activities||[],isLoading:r,maxItems:6})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Schnellaktionen"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(v,{title:"Produkte erstellen",description:"Neue Produkte mit KI generieren",icon:e.jsx(q,{className:"w-5 h-5 text-violet-400"}),href:"/dashboard/products"}),e.jsx(v,{title:"Kampagne starten",description:"Pinterest/Meta Kampagne",icon:e.jsx(b,{className:"w-5 h-5 text-violet-400"}),href:"/dashboard/campaigns"}),e.jsx(v,{title:"Winner skalieren",description:"Top-Performer identifizieren",icon:e.jsx(A,{className:"w-5 h-5 text-violet-400"}),href:"/dashboard/winners"}),e.jsx(v,{title:"Einstellungen",description:"Shop & Nischen konfigurieren",icon:e.jsx(Q,{className:"w-5 h-5 text-violet-400"}),href:"/settings"})]})]}),s==="basis"&&e.jsx(be,{variant:"banner",title:"Mehr Power fuer dein Business",description:"Schalte Winner Scaling, Multi-Plattform und Priority Support frei.",dismissible:!0})]})})}export{Me as default};
//# sourceMappingURL=Dashboard-CW1H_LFx.js.map
