import{j as e}from"./vendor-query-CpRdniug.js";import{f as m,h as f,r as l}from"./vendor-react-4xEIaAEA.js";import{a as x,s as p}from"./index-DMzOI_GZ.js";import{L as b,a as j,C as v}from"./vendor-ui-BMWb517o.js";import"./vendor-supabase-DejIJ_qE.js";import"./vendor-charts-Cz_1NfFu.js";function E(){const o=m(),[a]=f(),n=x(d=>d.addToast),[r,t]=l.useState("loading"),[g,s]=l.useState("Authentifizierung wird verarbeitet...");return l.useEffect(()=>{(async()=>{try{const i=a.get("code"),u=a.get("error"),h=a.get("error_description");if(u){t("error"),s(h||"Authentifizierung fehlgeschlagen"),n({type:"error",title:"Authentifizierung fehlgeschlagen",description:h||u});return}if(!i){t("error"),s("Kein Authentifizierungscode gefunden");return}const{error:c}=await p.auth.exchangeCodeForSession(i);if(c){t("error"),s(c.message),n({type:"error",title:"Authentifizierung fehlgeschlagen",description:c.message});return}t("success"),s("Erfolgreich angemeldet!"),setTimeout(()=>{o("/dashboard",{replace:!0})},1500)}catch(i){console.error("Auth callback error:",i),t("error"),s("Ein unerwarteter Fehler ist aufgetreten")}})()},[a,o,n]),e.jsx("div",{className:"flex min-h-screen items-center justify-center bg-black",children:e.jsxs("div",{className:"flex flex-col items-center gap-6 rounded-xl border border-zinc-800 bg-zinc-900 p-8 shadow-lg",children:[r==="loading"&&e.jsx("div",{className:"rounded-full bg-violet-500/10 p-4",children:e.jsx(b,{className:"h-8 w-8 animate-spin text-violet-500"})}),r==="success"&&e.jsx("div",{className:"rounded-full bg-emerald-500/10 p-4",children:e.jsx(j,{className:"h-8 w-8 text-emerald-500"})}),r==="error"&&e.jsx("div",{className:"rounded-full bg-red-500/10 p-4",children:e.jsx(v,{className:"h-8 w-8 text-red-500"})}),e.jsxs("div",{className:"text-center",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:[r==="loading"&&"Authentifizierung...",r==="success"&&"Erfolgreich!",r==="error"&&"Fehler"]}),e.jsx("p",{className:"mt-2 text-sm text-zinc-400",children:g})]}),r==="error"&&e.jsx("button",{onClick:()=>o("/login",{replace:!0}),className:"rounded-lg bg-violet-600 px-6 py-2 text-sm font-medium text-white transition-colors hover:bg-violet-700",children:"Zurueck zum Login"})]})})}export{E as default};
//# sourceMappingURL=AuthCallback-Czsw12AJ.js.map
